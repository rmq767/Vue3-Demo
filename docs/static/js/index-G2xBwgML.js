import{l as y,b as I}from"./element-plus-vO1D8aWL.js";import"./mobx-preact-PKhkWFJ1.js";import"./preact-n22zw_-M.js";import{L as T}from"./@logicflow-mdbNyzRF.js";import B from"./node-panel-p2j-Fgc_.js";import{r as C,a as E,b as u}from"./index-xZ_esT_D.js";import D from"./control-vKzWyjJl.js";import V from"./setting-Kc4JCg-J.js";import{d as F,r as _,e as L,s as $,l as G,c as P,a as v,V as m,Q as h,P as R,S,o as w,U as x}from"./@vue-1pEateLc.js";import{_ as A}from"./plugin-vueexport-helper-x3n3nnut.js";import"./lodash-es-88S84ShG.js";import"./@vueuse-sS3gTgD0.js";import"./@element-plus-sRoPj2gC.js";import"./@sxzz--N-3kK7X.js";import"./@ctrl-ZggoHSuR.js";import"./dayjs-1TH0Fy64.js";import"./acorn-bQvPYi_r.js";import"./async-validator-BHjhHa7C.js";import"./memoize-one-JaOscZgY.js";import"./normalize-wheel-es-1urBKM79.js";import"./@floating-ui-_1sru3kO.js";import"./mobx-1kTRUggc.js";import"./uuid-hzB4Li_C.js";import"./classnames-JlRyRjWq.js";import"./mousetrap-zqaP2qoP.js";import"./mobx-utils-wtfDcc3Y.js";import"./flow-setting-LYYvm8PL.js";import"./start-flow-setting-htDBoa4r.js";import"./choose-person-FqpuhweA.js";import"./action-setting-vXqhc_bh.js";import"./edge-setting-HYGhGem3.js";import"./link-setting-n6MvMXU2.js";import"./review-setting-r3ktfSE9.js";const M={class:"logic-flow-container"},q={class:"logic-flow-header"},K={class:"logic-flow-main"},Q={name:"LogicFlow"},U=F({...Q,setup(j){const f=_(),i=_(),n=L({settingType:"all"}),o=$(),g=e=>{switch(e.type){case"launch":i.value=e,n.settingType=e.type;break;case"approver":i.value=e,n.settingType=e.type;break;case"link":i.value=e,n.settingType=e.type;break;case"review":i.value=e,n.settingType=e.type;break;case"polyline":case"dashedLine":i.value=e,n.settingType=e.type;break}},k=e=>{var s,a,c,d,p;(s=e.value)==null||s.on("blank:click",t=>{n.settingType="all"}),(a=e.value)==null||a.on("node:mousedown",({data:t})=>{var r;(r=e.value)==null||r.selectElementById(t.id,!1),g(t)}),(c=e.value)==null||c.on("edge:click",({data:t})=>{var r;(r=e.value)==null||r.selectElementById(t.id,!1),g(t)}),(d=e.value)==null||d.on("connection:not-allowed",t=>(y.error(t.msg),!1)),(p=e.value)==null||p.on("node:dnd-add",({data:t})=>{var r,l;(r=e.value)==null||r.selectElementById(t.id,!1),g(t),(l=e.value)==null||l.container.focus()})},b=()=>{var e;console.log((e=o.value)==null?void 0:e.getGraphData())},N=()=>{var s,a,c,d;const{nodes:e}=(s=o.value)==null?void 0:s.getGraphData();for(let p=0;p<e.length;p++){const t=e[p],{properties:r}=t;for(const l in r)if(Array.isArray(r[l])){if(u[l]&&r[l].length===0)return y.error(`${(a=t.text)==null?void 0:a.value}节点 ${u[l]}`)}else if(u[l]&&!r[l])return y.error(`${(c=t.text)==null?void 0:c.value}节点 ${u[l]}`)}console.log((d=o.value)==null?void 0:d.getGraphData())};return G(()=>{o.value=new T({container:f.value,grid:!0,keyboard:{enabled:!0,shortcuts:C(o,i)},textEdit:!1}),E(o),k(o),o.value.render({nodes:[{id:"node_1",type:"start",x:100,y:300,properties:{width:60,height:60},text:{x:100,y:300,value:"开始"}},{id:"node_2",type:"launch",x:100,y:400,properties:{width:120,height:50},text:{x:100,y:400,value:"发起流程"}},{id:"node_3",type:"end",x:100,y:600,properties:{width:60,height:60},text:{x:100,y:600,value:"结束"}}],edges:[{id:"edge_1",type:"startPolyline",sourceNodeId:"node_1",targetNodeId:"node_2"},{id:"edge_2",type:"polyline",sourceNodeId:"node_2",targetNodeId:"node_3"}]}),o.value.translateCenter()}),(e,s)=>{const a=I;return w(),P("div",M,[v("div",q,[m(a,{type:"primary",onClick:b},{default:h(()=>[x("获取数据")]),_:1}),m(a,{type:"primary",onClick:N},{default:h(()=>[x("提交")]),_:1})]),v("div",K,[v("div",{class:"logic-flow",ref_key:"logicFlowRef",ref:f},null,512),m(V,{class:"logic-flow-setting",data:i.value,lf:o.value,type:n.settingType},null,8,["data","lf","type"]),m(B,{lf:o.value},null,8,["lf"])]),o.value?(w(),R(D,{key:0,lf:o.value},null,8,["lf"])):S("",!0)])}}}),Ie=A(U,[["__scopeId","data-v-f78883b0"]]);export{Ie as default};
