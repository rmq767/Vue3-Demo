import"./leafer-ui-BkUVF8YB.js";import k from"./leaflet-DBVi3GWn.js";import{a as H,X as v,g as N}from"./@leafer-ui-CS0pT7tI.js";import{d as T,s as C,c as E,a as S,R as V,o as W}from"./@vue-AhIeOBdH.js";import{_ as B}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./@leafer-Dgei2GiV.js";import"./element-plus-t8j70jxJ.js";import"./lodash-es-CVJ_Bk8S.js";import"./@vueuse-CAc1CHwG.js";import"./@element-plus-CLWHGgw5.js";import"./@sxzz-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BkBTkyCe.js";import"./@turf-Bfw5sV2K.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-D0iZPv2f.js";import"./leaflet-BJ9rajuP.js";import"./leaflet.chinatmsproviders-DrehvF96.js";const m=20;let y=0,x=0,u=0,l=0,i=.2;const F=n=>{let s=0;return n.forEach(o=>{s=Math.max(s,o.length)}),s},R=(n,s,o)=>{var e,f;y=(e=n.value)==null?void 0:e.width,x=(f=n.value)==null?void 0:f.height;const a=Number(o.value.toFixed(4));u=Number(((y-m*s.value.length)/a).toFixed(2));const c=F(s.value);l=Number((x/c).toFixed(4))},I=(n,s)=>{const{distance:o,length:a}=n;return new H({x:o*u+m*s,y:0,width:m,height:a*l,fill:"#90caf9"})},L=n=>{const{info:s,distance:o}=n,a=[];for(let c=0;c<s.length;c++){const e=s[c],f=new v({fill:`#${c}b${c}04${c}`,points:[0,e.start*l-i,o*u,e.start*l-i,o*u,e.end*l+i,0,e.end*l+i]});a.push(f)}return a},$=(n,s)=>{const{distance:o,info:a,length:c}=n,e=[];for(let f=0;f<a.length;f++){const t=a[f],p=new v({fill:`#${f}b${f}04${f}`,points:[o*u+m*(s+1),t.start*l-i,y,t.start*l-i,y,t.end*l+i,o*u+m*(s+1),t.end*l+i]});e.push(p)}return e},X=(n,s,o,a)=>{const{distance:c,length:e,info:f}=n,{distance:t,length:p,info:d}=o,r=c*u+m*(s+1),g=t*u+m*(a+1)-r-m,A=[];for(let h=0;h<f.length;h++){const w=f[h];for(let _=0;_<d.length;_++){const b=d[_];if(w.type===b.type){const D=new v({fill:`#${h}b${h}04${h}`,points:[r,w.start*l-i,r+g,b.start*l-i,r+g,b.end*l+i,r,w.end*l+i]});A.push(D)}}}return{bg:new v({fill:{type:"linear",from:"top-left",to:"bottom-right",stops:[{offset:0,color:"#fff"},{offset:.03,color:"#fff"},{offset:.03,color:"#000"},{offset:.04,color:"#000"},{offset:.04,color:"#fff"},{offset:.07,color:"#fff"},{offset:.07,color:"#000"},{offset:.08,color:"#000"},{offset:.08,color:"#fff"},{offset:.11,color:"#fff"},{offset:.11,color:"#000"},{offset:.12,color:"#000"},{offset:.12,color:"#fff"},{offset:.15,color:"#fff"},{offset:.15,color:"#000"},{offset:.16,color:"#000"},{offset:.16,color:"#fff"},{offset:.19,color:"#fff"},{offset:.19,color:"#000"},{offset:.2,color:"#000"},{offset:.2,color:"#fff"},{offset:.23,color:"#fff"},{offset:.23,color:"#000"},{offset:.24,color:"#000"},{offset:.24,color:"#fff"},{offset:.27,color:"#fff"},{offset:.27,color:"#000"},{offset:.28,color:"#000"},{offset:.28,color:"#fff"},{offset:.31,color:"#fff"},{offset:.31,color:"#000"},{offset:.32,color:"#000"},{offset:.32,color:"#fff"},{offset:.35,color:"#fff"},{offset:.35,color:"#000"},{offset:.36,color:"#000"},{offset:.36,color:"#fff"},{offset:.39,color:"#fff"},{offset:.39,color:"#000"},{offset:.4,color:"#000"},{offset:.4,color:"#fff"},{offset:.43,color:"#fff"},{offset:.43,color:"#000"},{offset:.44,color:"#000"},{offset:.44,color:"#fff"},{offset:.47,color:"#fff"},{offset:.47,color:"#000"},{offset:.48,color:"#000"},{offset:.48,color:"#fff"},{offset:.51,color:"#fff"},{offset:.51,color:"#000"},{offset:.52,color:"#000"},{offset:.52,color:"#fff"},{offset:.55,color:"#fff"},{offset:.55,color:"#000"},{offset:.56,color:"#000"},{offset:.56,color:"#fff"},{offset:.59,color:"#fff"},{offset:.59,color:"#000"},{offset:.6,color:"#000"},{offset:.6,color:"#fff"},{offset:.63,color:"#fff"},{offset:.63,color:"#000"},{offset:.64,color:"#000"},{offset:.64,color:"#fff"},{offset:.67,color:"#fff"},{offset:.67,color:"#000"},{offset:.68,color:"#000"},{offset:.68,color:"#fff"},{offset:.71,color:"#fff"},{offset:.71,color:"#000"},{offset:.72,color:"#000"},{offset:.72,color:"#fff"},{offset:.75,color:"#fff"},{offset:.75,color:"#000"},{offset:.76,color:"#000"},{offset:.76,color:"#fff"},{offset:.79,color:"#fff"},{offset:.79,color:"#000"},{offset:.8,color:"#000"},{offset:.8,color:"#fff"},{offset:.83,color:"#fff"},{offset:.83,color:"#000"},{offset:.84,color:"#000"},{offset:.84,color:"#fff"},{offset:.87,color:"#fff"},{offset:.87,color:"#000"},{offset:.88,color:"#000"},{offset:.88,color:"#fff"},{offset:.91,color:"#fff"},{offset:.91,color:"#000"},{offset:.92,color:"#000"},{offset:.92,color:"#fff"},{offset:.95,color:"#fff"},{offset:.95,color:"#000"},{offset:.96,color:"#000"},{offset:.96,color:"#fff"},{offset:.99,color:"#fff"},{offset:1,color:"#fff"}]},points:[r,f[0].start*l,r+g,d[0].start*l,r+g,d[d.length-1].end*l,r,f[f.length-1].end*l]}),polygonArr:A}},G={class:"leafer-container"},P={name:"Leafer"},j=T({...P,setup(n){const s=[{name:"井0706002",businessId:"1676779130877161474",type:3,wellType:"定向井",pointData:[{lon:103.987124,lat:30.598889,remark:""}],info:[{type:"地层1",start:0,end:2e3},{type:"地层2",start:2e3,end:4e3},{type:"地层3",start:4e3,end:5e3}],length:5e3},{name:"井1",businessId:"1679789842331381761",type:3,wellType:"直井",pointData:[{lon:105.06149,lat:31.570505,remark:"33"}],info:[{type:"地层1",start:0,end:2e3},{type:"地层1-1",start:2e3,end:3e3},{type:"地层2",start:3e3,end:6e3},{type:"地层3",start:6e3,end:8e3}],length:8e3},{name:"宁209H13-9",businessId:"1680792663432409090",type:3,wellType:"水平井",pointData:[{lon:102.24508,lat:32.923487,remark:"测试（HX）"}],info:[{type:"地层1",start:0,end:2e3},{type:"地层1-1",start:2e3,end:3e3},{type:"地层2",start:3e3,end:6e3},{type:"地层3",start:6e3,end:7e3}],length:7e3},{name:"20242",businessId:"1840656103032012802",type:3,wellType:"直井",pointData:[{lon:108.646241,lat:27.995644,remark:""}],info:[{type:"地层1",start:0,end:2e3},{type:"地层1-1",start:2e3,end:3e3},{type:"地层2",start:3e3,end:6e3},{type:"地层3",start:6e3,end:9e3}],length:9e3}],o=C(),a=(e,f)=>{o.value&&o.value.removeAll(),console.log(e.value),c(e,f)},c=(e,f)=>{if(o.value=new N({view:"leafer",wheel:{disabled:!0},zoom:{min:.02,max:256},move:{drag:!1,scroll:!1}}),e.value.length!==0)if(R(o,e,f),e.value.length===1){const t=e.value[0],p=I(t,0);if(o.value.add(p),t.distance!==0){const d=L(t);o.value.add(d)}if(t.distance!==f.value){const d=$(t,0);o.value.add(d)}}else for(let t=0;t<e.value.length;t++){const p=e.value[t],d=I(p,t);if(o.value.add(d),t===0){if(p.distance!==0){const r=L(p);o.value.add(r)}}else{const{bg:r,polygonArr:g}=X(e.value[t-1],t-1,p,t);o.value.add(r),o.value.add(g)}if(t===e.value.length-1&&p.distance!==f.value){const r=$(p,t);o.value.add(r)}}};return(e,f)=>(W(),E("div",G,[f[0]||(f[0]=S("div",{id:"leafer",style:{width:"100%",height:"100vh"}},null,-1)),V(k,{data:s,class:"leaflet",onGetPoints:a})]))}}),po=B(j,[["__scopeId","data-v-a5a84efb"]]);export{po as default};
