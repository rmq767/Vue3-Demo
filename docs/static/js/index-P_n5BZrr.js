import"./leafer-ui-opb8pArW.js";import k from"./leaflet-UkqmyJ-e.js";import{R as H,f as y,L as N}from"./@leafer-ui-pBRh-c6v.js";import{d as S,s as T,c as C,V,aw as E,ax as R,a as W,o as B}from"./@vue-1pEateLc.js";import{_ as F}from"./plugin-vueexport-helper-x3n3nnut.js";import"./@leafer-dMhI7V6q.js";import"./element-plus-9-QK-U0O.js";import"./lodash-es-88S84ShG.js";import"./@vueuse-sS3gTgD0.js";import"./@element-plus-GFHZwatb.js";import"./@sxzz--N-3kK7X.js";import"./@ctrl-ZggoHSuR.js";import"./dayjs-0oS7_Iqn.js";import"./@turf-VZU31W4K.js";import"./async-validator-BHjhHa7C.js";import"./memoize-one-JaOscZgY.js";import"./normalize-wheel-es-1urBKM79.js";import"./@floating-ui-_1sru3kO.js";import"./leaflet-dgfGk-q1.js";import"./leaflet.chinatmsproviders-MeioCgZa.js";const m=20;let v=0,I=0,u=0,l=0,i=.2;const P=r=>{let s=0;return r.forEach(o=>{s=Math.max(s,o.length)}),s},G=(r,s,o)=>{var f,e;v=(f=r.value)==null?void 0:f.width,I=(e=r.value)==null?void 0:e.height;const a=Number(o.value.toFixed(4));u=Number(((v-m*s.value.length)/a).toFixed(2));const n=P(s.value);l=Number((I/n).toFixed(4))},x=(r,s)=>{const{distance:o,length:a}=r;return new H({x:o*u+m*s,y:0,width:m,height:a*l,fill:"#90caf9"})},L=r=>{const{info:s,distance:o}=r,a=[];for(let n=0;n<s.length;n++){const f=s[n],e=new y({fill:`#${n}b${n}04${n}`,points:[0,f.start*l-i,o*u,f.start*l-i,o*u,f.end*l+i,0,f.end*l+i]});a.push(e)}return a},$=(r,s)=>{const{distance:o,info:a,length:n}=r,f=[];for(let e=0;e<a.length;e++){const t=a[e],p=new y({fill:`#${e}b${e}04${e}`,points:[o*u+m*(s+1),t.start*l-i,v,t.start*l-i,v,t.end*l+i,o*u+m*(s+1),t.end*l+i]});f.push(p)}return f},j=(r,s,o,a)=>{const{distance:n,length:f,info:e}=r,{distance:t,length:p,info:d}=o,c=n*u+m*(s+1),h=t*u+m*(a+1)-c-m,A=[];for(let g=0;g<e.length;g++){const w=e[g];for(let _=0;_<d.length;_++){const b=d[_];if(w.type===b.type){const D=new y({fill:`#${g}b${g}04${g}`,points:[c,w.start*l-i,c+h,b.start*l-i,c+h,b.end*l+i,c,w.end*l+i]});A.push(D)}}}return{bg:new y({fill:{type:"linear",from:"top-left",to:"bottom-right",stops:[{offset:0,color:"#fff"},{offset:.03,color:"#fff"},{offset:.03,color:"#000"},{offset:.04,color:"#000"},{offset:.04,color:"#fff"},{offset:.07,color:"#fff"},{offset:.07,color:"#000"},{offset:.08,color:"#000"},{offset:.08,color:"#fff"},{offset:.11,color:"#fff"},{offset:.11,color:"#000"},{offset:.12,color:"#000"},{offset:.12,color:"#fff"},{offset:.15,color:"#fff"},{offset:.15,color:"#000"},{offset:.16,color:"#000"},{offset:.16,color:"#fff"},{offset:.19,color:"#fff"},{offset:.19,color:"#000"},{offset:.2,color:"#000"},{offset:.2,color:"#fff"},{offset:.23,color:"#fff"},{offset:.23,color:"#000"},{offset:.24,color:"#000"},{offset:.24,color:"#fff"},{offset:.27,color:"#fff"},{offset:.27,color:"#000"},{offset:.28,color:"#000"},{offset:.28,color:"#fff"},{offset:.31,color:"#fff"},{offset:.31,color:"#000"},{offset:.32,color:"#000"},{offset:.32,color:"#fff"},{offset:.35,color:"#fff"},{offset:.35,color:"#000"},{offset:.36,color:"#000"},{offset:.36,color:"#fff"},{offset:.39,color:"#fff"},{offset:.39,color:"#000"},{offset:.4,color:"#000"},{offset:.4,color:"#fff"},{offset:.43,color:"#fff"},{offset:.43,color:"#000"},{offset:.44,color:"#000"},{offset:.44,color:"#fff"},{offset:.47,color:"#fff"},{offset:.47,color:"#000"},{offset:.48,color:"#000"},{offset:.48,color:"#fff"},{offset:.51,color:"#fff"},{offset:.51,color:"#000"},{offset:.52,color:"#000"},{offset:.52,color:"#fff"},{offset:.55,color:"#fff"},{offset:.55,color:"#000"},{offset:.56,color:"#000"},{offset:.56,color:"#fff"},{offset:.59,color:"#fff"},{offset:.59,color:"#000"},{offset:.6,color:"#000"},{offset:.6,color:"#fff"},{offset:.63,color:"#fff"},{offset:.63,color:"#000"},{offset:.64,color:"#000"},{offset:.64,color:"#fff"},{offset:.67,color:"#fff"},{offset:.67,color:"#000"},{offset:.68,color:"#000"},{offset:.68,color:"#fff"},{offset:.71,color:"#fff"},{offset:.71,color:"#000"},{offset:.72,color:"#000"},{offset:.72,color:"#fff"},{offset:.75,color:"#fff"},{offset:.75,color:"#000"},{offset:.76,color:"#000"},{offset:.76,color:"#fff"},{offset:.79,color:"#fff"},{offset:.79,color:"#000"},{offset:.8,color:"#000"},{offset:.8,color:"#fff"},{offset:.83,color:"#fff"},{offset:.83,color:"#000"},{offset:.84,color:"#000"},{offset:.84,color:"#fff"},{offset:.87,color:"#fff"},{offset:.87,color:"#000"},{offset:.88,color:"#000"},{offset:.88,color:"#fff"},{offset:.91,color:"#fff"},{offset:.91,color:"#000"},{offset:.92,color:"#000"},{offset:.92,color:"#fff"},{offset:.95,color:"#fff"},{offset:.95,color:"#000"},{offset:.96,color:"#000"},{offset:.96,color:"#fff"},{offset:.99,color:"#fff"},{offset:1,color:"#fff"}]},points:[c,e[0].start*l,c+h,d[0].start*l,c+h,d[d.length-1].end*l,c,e[e.length-1].end*l]}),polygonArr:A}},z=r=>(E("data-v-a5a84efb"),r=r(),R(),r),M={class:"leafer-container"},X=z(()=>W("div",{id:"leafer",style:{width:"100%",height:"100vh"}},null,-1)),q={name:"Leafer"},J=S({...q,setup(r){const s=[{name:"井0706002",businessId:"1676779130877161474",type:3,wellType:"定向井",pointData:[{lon:103.987124,lat:30.598889,remark:""}],info:[{type:"地层1",start:0,end:2e3},{type:"地层2",start:2e3,end:4e3},{type:"地层3",start:4e3,end:5e3}],length:5e3},{name:"井1",businessId:"1679789842331381761",type:3,wellType:"直井",pointData:[{lon:105.06149,lat:31.570505,remark:"33"}],info:[{type:"地层1",start:0,end:2e3},{type:"地层1-1",start:2e3,end:3e3},{type:"地层2",start:3e3,end:6e3},{type:"地层3",start:6e3,end:8e3}],length:8e3},{name:"宁209H13-9",businessId:"1680792663432409090",type:3,wellType:"水平井",pointData:[{lon:102.24508,lat:32.923487,remark:"测试（HX）"}],info:[{type:"地层1",start:0,end:2e3},{type:"地层1-1",start:2e3,end:3e3},{type:"地层2",start:3e3,end:6e3},{type:"地层3",start:6e3,end:7e3}],length:7e3},{name:"20242",businessId:"1840656103032012802",type:3,wellType:"直井",pointData:[{lon:108.646241,lat:27.995644,remark:""}],info:[{type:"地层1",start:0,end:2e3},{type:"地层1-1",start:2e3,end:3e3},{type:"地层2",start:3e3,end:6e3},{type:"地层3",start:6e3,end:9e3}],length:9e3}],o=T(),a=(f,e)=>{o.value&&o.value.removeAll(),console.log(f.value),n(f,e)},n=(f,e)=>{if(o.value=new N({view:"leafer",wheel:{disabled:!0},zoom:{min:.02,max:256},move:{drag:!1,scroll:!1}}),f.value.length!==0)if(G(o,f,e),f.value.length===1){const t=f.value[0],p=x(t,0);if(o.value.add(p),t.distance!==0){const d=L(t);o.value.add(d)}if(t.distance!==e.value){const d=$(t,0);o.value.add(d)}}else for(let t=0;t<f.value.length;t++){const p=f.value[t],d=x(p,t);if(o.value.add(d),t===0){if(p.distance!==0){const c=L(p);o.value.add(c)}}else{const{bg:c,polygonArr:h}=j(f.value[t-1],t-1,p,t);o.value.add(c),o.value.add(h)}if(t===f.value.length-1&&p.distance!==e.value){const c=$(p,t);o.value.add(c)}}};return(f,e)=>(B(),C("div",M,[X,V(k,{data:s,class:"leaflet",onGetPoints:a})]))}}),go=F(J,[["__scopeId","data-v-a5a84efb"]]);export{go as default};
