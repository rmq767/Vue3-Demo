import{l as f,b as I}from"./element-plus-9-QK-U0O.js";import"./mobx-preact-PKhkWFJ1.js";import"./preact-n22zw_-M.js";import{L as B}from"./@logicflow-AS830fMk.js";import C from"./node-panel-p2j-Fgc_.js";import{r as E,a as D,b as u}from"./index-w32eI8DV.js";import V from"./control-CS4bO6dg.js";import F from"./setting-OJ8r6rf4.js";import{d as L,r as g,s as $,l as G,c as P,a as y,V as m,Q as h,P as R,S,o as w,U as x}from"./@vue-1pEateLc.js";import{_ as A}from"./plugin-vueexport-helper-x3n3nnut.js";import"./lodash-es-88S84ShG.js";import"./@vueuse-sS3gTgD0.js";import"./@element-plus-GFHZwatb.js";import"./@sxzz--N-3kK7X.js";import"./@ctrl-ZggoHSuR.js";import"./dayjs-0oS7_Iqn.js";import"./@turf-VZU31W4K.js";import"./async-validator-BHjhHa7C.js";import"./memoize-one-JaOscZgY.js";import"./normalize-wheel-es-1urBKM79.js";import"./@floating-ui-_1sru3kO.js";import"./mobx-1kTRUggc.js";import"./uuid-hzB4Li_C.js";import"./classnames-3BoOvlBi.js";import"./mousetrap-HOn0kHTO.js";import"./mobx-utils-wtfDcc3Y.js";import"./flow-setting-yDnW_cCf.js";import"./start-flow-setting-H8RIOoiT.js";import"./choose-person-wKVOHEPq.js";import"./action-setting-J3JHtuIF.js";import"./edge-setting-CElfxnt-.js";import"./link-setting-kwx1DAQz.js";import"./review-setting-qIjfFJCH.js";const M={class:"logic-flow-container"},T={class:"logic-flow-header"},q={class:"logic-flow-main"},K={name:"LogicFlow"},Q=L({...K,setup(U){const _=g(),n=g(),a=g("all"),o=$(),v=e=>{switch(e.type){case"launch":n.value=e,a.value=e.type;break;case"approver":n.value=e,a.value=e.type;break;case"link":n.value=e,a.value=e.type;break;case"review":n.value=e,a.value=e.type;break;case"polyline":case"dashedLine":n.value=e,a.value=e.type;break}},k=e=>{var s,i,p,d,c;(s=e.value)==null||s.on("blank:click",t=>{a.value="all"}),(i=e.value)==null||i.on("node:mousedown",({data:t})=>{var r;(r=e.value)==null||r.selectElementById(t.id,!1),v(t)}),(p=e.value)==null||p.on("edge:click",({data:t})=>{var r;(r=e.value)==null||r.selectElementById(t.id,!1),v(t)}),(d=e.value)==null||d.on("connection:not-allowed",t=>(f.error(t.msg),!1)),(c=e.value)==null||c.on("node:dnd-add",({data:t})=>{var r,l;(r=e.value)==null||r.selectElementById(t.id,!1),v(t),(l=e.value)==null||l.container.focus()})},b=()=>{var e;console.log((e=o.value)==null?void 0:e.getGraphData())},N=()=>{var s,i,p,d;const{nodes:e}=(s=o.value)==null?void 0:s.getGraphData();for(let c=0;c<e.length;c++){const t=e[c],{properties:r}=t;for(const l in r)if(Array.isArray(r[l])){if(u[l]&&r[l].length===0)return f.error(`${(i=t.text)==null?void 0:i.value}节点 ${u[l]}`)}else if(u[l]&&!r[l])return f.error(`${(p=t.text)==null?void 0:p.value}节点 ${u[l]}`)}console.log((d=o.value)==null?void 0:d.getGraphData())};return G(()=>{o.value=new B({container:_.value,grid:!0,keyboard:{enabled:!0,shortcuts:E(o,n,a)},textEdit:!1}),D(o),k(o),o.value.render({nodes:[{id:"node_1",type:"start",x:100,y:300,properties:{width:60,height:60},text:{x:100,y:300,value:"开始"}},{id:"node_2",type:"launch",x:100,y:400,properties:{width:120,height:50},text:{x:100,y:400,value:"发起流程"}},{id:"node_3",type:"end",x:100,y:600,properties:{width:60,height:60},text:{x:100,y:600,value:"结束"}}],edges:[{id:"edge_1",type:"startPolyline",sourceNodeId:"node_1",targetNodeId:"node_2"},{id:"edge_2",type:"polyline",sourceNodeId:"node_2",targetNodeId:"node_3"}]}),o.value.translateCenter()}),(e,s)=>{const i=I;return w(),P("div",M,[y("div",T,[m(i,{type:"primary",onClick:b},{default:h(()=>[x("获取数据")]),_:1}),m(i,{type:"primary",onClick:N},{default:h(()=>[x("提交")]),_:1})]),y("div",q,[y("div",{class:"logic-flow",ref_key:"logicFlowRef",ref:_},null,512),m(F,{class:"logic-flow-setting",data:n.value,lf:o.value,type:a.value},null,8,["data","lf","type"]),m(C,{lf:o.value},null,8,["lf"])]),o.value?(w(),R(V,{key:0,lf:o.value},null,8,["lf"])):S("",!0)])}}}),Ne=A(Q,[["__scopeId","data-v-c1f3fdb1"]]);export{Ne as default};
