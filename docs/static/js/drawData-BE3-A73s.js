import{a as w,c as $,b as G,d as H}from"./element-plus-t8j70jxJ.js";import{i as J,u as L,Z as j,C as q,g as D,a as C,P as z,b as A,c as Q,d as W}from"./zoom-J9Oajw2t.js";import{Q as K,R as X,t as Y}from"./@element-plus-CLWHGgw5.js";import{d as F,e as x,I as ee,o as E,J as i,a,R as t,u as d,P as te,n as oe,w as ae,r as se,c as ne,O as le}from"./@vue-AhIeOBdH.js";import{_ as N}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./lodash-es-CVJ_Bk8S.js";import"./@vueuse-CAc1CHwG.js";import"./@sxzz-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BkBTkyCe.js";import"./@turf-Bfw5sV2K.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-D0iZPv2f.js";const ie={id:"cesium-container"},re={class:"shortcut-keys"},ce={class:"btn-group"},me={class:"btn-content"},ue={class:"btn-content"},de={class:"btn-content"},pe={name:"Cesium"},_e=F({...pe,setup(R,{expose:r}){const s=x({visible:!1,isFull:!1});let{viewer:g,zoomFn:c,loadRoadNetwork:m,destroyed:p,init:v,adjustNorthUp:h,flyTo:P,orbitTickFunction:k,getFrame:V}=J();const{drawArea:B,drawLine:T,drawPoint:y,initHoverEvent:I}=L(g,!0),M=()=>{var n=document.fullscreenElement;if(n)document.exitFullscreen(),s.isFull=!1;else{const e=document.getElementById("cesium-container");e.requestFullscreen&&(e.requestFullscreen(),s.isFull=!0)}},O=()=>{V()},S=n=>{var l;const e=((l=g.value)==null?void 0:l.camera.pitch)||Number((-Cesium.Math.PI/2).toFixed(15));switch(n){case"top":e<=Cesium.Math.toRadians(-10)&&k(0,.01);break;case"bottom":e>Cesium.Math.toRadians(-90)&&k(0,-.01);break;case"left":k(.01,0);break;case"right":k(-.01,0);break}},U=()=>{p(),s.visible=!1},Z=n=>{let e=[];n.forEach(o=>{const f=o.pointData.map(u=>D([u.lon,u.lat]));e.push(...f),o.type===C.Block?B(f,z.Area,{properties:o}):o.type===C.Pipeline?(T(f,{properties:o,showPoint:!1,is3D:!0}),o.pointData.forEach(u=>{y(D([u.lon,u.lat]),{properties:u,point:{color:Cesium.Color.BLUE,heightReference:Cesium.HeightReference.NONE},label:{text:u.remark,heightReference:Cesium.HeightReference.NONE}})})):o.type===C.Well?y(f[0],{properties:o}):o.type===C.Device&&y(f[0],{properties:o,img:o.pointData[0].img,billboard:{width:50,height:50}})});const[l,_]=A(e),{maxDistance:b}=Q(e);P(l,_,b)};return r({open:n=>{s.visible=!0,oe(()=>{v(),I(),Z(n)})}}),(n,e)=>{const l=$,_=w,b=G;return E(),ee(b,{title:"只读渲染",modelValue:s.visible,"onUpdate:modelValue":e[0]||(e[0]=o=>s.visible=o),center:"",fullscreen:!0,onClose:U,class:"gis-dialog","destroy-on-close":"","append-to-body":!0},{default:i(()=>[a("div",ie,[e[3]||(e[3]=a("div",{id:"cesium"},null,-1)),a("div",re,[a("div",ce,[t(_,{title:"路网地名",onClick:d(m)},{default:i(()=>[a("div",me,[t(l,null,{default:i(()=>[t(d(K))]),_:1}),e[1]||(e[1]=a("span",null,"路网地名",-1))])]),_:1},8,["onClick"]),t(_,{title:"正向俯视",onClick:d(h)},{default:i(()=>[a("div",ue,[t(l,null,{default:i(()=>[t(d(X))]),_:1}),e[2]||(e[2]=a("span",null,"正向俯视",-1))])]),_:1},8,["onClick"]),t(_,{title:"全屏控制",onClick:M},{default:i(()=>[a("div",de,[t(l,null,{default:i(()=>[t(d(Y))]),_:1}),a("span",null,te(s.isFull?"退出全屏":"全屏"),1)])]),_:1}),t(j,{onZoom:d(c),class:"zoom-control"},null,8,["onZoom"])])])]),t(q,{class:"camera-control",onMoveCamera:S,onMouseDown:O})]),_:1},8,["modelValue"])}}}),fe=N(_e,[["__scopeId","data-v-cf99a939"]]),ge={class:"gis-getdata"},ke={class:"handle"},Ce={name:"getData"},ve=F({...Ce,setup(R){const r=x({drawType:W.Point,data:[{type:1,name:"区块",remark:"面",pointData:[{lon:103.49,lat:31.24,name:"",remark:"",img:""},{lon:103.15,lat:30.48,name:"",remark:"",img:""},{lon:103.9,lat:30.33,name:"",remark:"",img:""},{lon:104.17,lat:30.75,name:"",remark:"",img:""}]},{type:4,name:"管道",remark:"线",pointData:[{lon:103.53,lat:31.02,remark:"起点",name:"",img:""},{lon:103.57,lat:31.03,name:"",remark:"",img:""},{lon:103.61,lat:31,name:"",remark:"",img:""},{lon:103.64,lat:30.95,remark:"终点",name:"",img:""}]},{type:3,name:"点",remark:"点",pointData:[{lon:104.07,lat:30.63,name:"体育馆",remark:"四川省体育馆",img:""}]},{type:5,name:"图片",remark:"图片",pointData:[{lon:104.06,lat:30.57,remark:"环球中心",img:"https://picsum.photos/200",name:""}]}],code:""});ae(()=>r.data,(c,m)=>{const p=JSON.stringify(c,null,2);r.code=p},{deep:!0,immediate:!0});const s=se(),g=()=>{var c;(c=s.value)==null||c.open(JSON.parse(r.code))};return(c,m)=>{const p=H,v=w;return E(),ne("div",ge,[t(p,{type:"textarea",rows:30,modelValue:r.code,"onUpdate:modelValue":m[0]||(m[0]=h=>r.code=h)},null,8,["modelValue"]),a("div",ke,[t(v,{type:"primary",onClick:g},{default:i(()=>[...m[1]||(m[1]=[le("渲染数据",-1)])]),_:1})]),t(fe,{ref_key:"gisRef",ref:s},null,512)])}}}),Oe=N(ve,[["__scopeId","data-v-06940cc0"]]);export{Oe as default};
