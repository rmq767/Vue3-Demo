import"./leafer-ui-opb8pArW.js";import _ from"./leaflet2-0j9sCFde.js";import{g as w,f as v,L as y}from"./@leafer-ui-pBRh-c6v.js";import{d as L,s as x,c as b,V as A,aw as I,ax as k,a as H,o as N}from"./@vue-1pEateLc.js";import{_ as S}from"./plugin-vueexport-helper-x3n3nnut.js";import"./@leafer-dMhI7V6q.js";import"./element-plus-9-QK-U0O.js";import"./lodash-es-88S84ShG.js";import"./@vueuse-sS3gTgD0.js";import"./@element-plus-GFHZwatb.js";import"./@sxzz--N-3kK7X.js";import"./@ctrl-ZggoHSuR.js";import"./dayjs-0oS7_Iqn.js";import"./@turf-VZU31W4K.js";import"./async-validator-BHjhHa7C.js";import"./memoize-one-JaOscZgY.js";import"./normalize-wheel-es-1urBKM79.js";import"./@floating-ui-_1sru3kO.js";import"./leaflet-dgfGk-q1.js";import"./leaflet.chinatmsproviders-MeioCgZa.js";const f=10,c=200;let u=0,h=0,d=0,l=0,i=.2;const C=r=>{let n=0;return r.forEach(e=>{n=Math.max(n,e.length)}),n},W=(r,n,e)=>{var t,s;u=(t=r.value)==null?void 0:t.width,h=(s=r.value)==null?void 0:s.height;const o=Number(e.value.toFixed(4));d=Number(((u-f*n.value.length-c*2)/o).toFixed(2));const a=C(n.value);l=Number((h/a).toFixed(4))},$=(r,n)=>{const{info:e,length:o}=r,a=[];for(let s=0;s<e.length;s++){const p=e[s],m=[p.distance*d+c,p.end*l];a.push(...m)}return new w({points:a,strokeWidth:f,stroke:"rgb(50,205,121)",cornerRadius:f,strokeCap:"round",strokeJoin:"round"})},E=r=>{const{info:n}=r,e=[];for(let o=1;o<n.length;o++){const a=n[o],t=n[o-1],s=new v({fill:`#${o}b${o}04${o}`,points:[0,t.end*l-i,t.distance*d+c,t.end*l-i,a.distance*d+c,a.end*l+i,0,a.end*l+i]});e.push(s)}return e},V=r=>{const{info:n}=r,e=[];for(let o=1;o<n.length;o++){const a=n[o],t=n[o-1],s=new v({fill:`#${o}b${o}04${o}`,points:[t.distance*d+c,t.end*l-i,u,t.end*l-i,u,a.end*l+i,a.distance*d+c,a.end*l+i]});e.push(s)}return e},P=r=>(I("data-v-ee6df927"),r=r(),k(),r),T={class:"leafer-container"},B=P(()=>H("div",{id:"leafer",style:{width:"100%",height:"100vh"}},null,-1)),D={name:"Leafer"},F=L({...D,setup(r){const n=[{name:"宁209H13-9",businessId:"1680792663432409090",type:3,wellType:"水平井",pointData:[{lon:102.24508,lat:32.923487,remark:"测试（HX）"}],info:[{type:"start",start:0,end:0,coordinate:[102.24508,32.923487]},{type:"地层1",start:0,end:2e3,coordinate:[102.24008,32.923487]},{type:"地层1-1",start:2e3,end:3e3,coordinate:[102.236319,32.923487]},{type:"地层2",start:3e3,end:6e3,coordinate:[102.221319,32.923487]},{type:"地层3",start:6e3,end:7e3,coordinate:[102.211319,32.923487]}],length:7e3}],e=x(),o=(t,s)=>{e.value&&e.value.removeAll(),a(t,s),console.log(t.value,s.value)},a=(t,s)=>{if(e.value?e.value.clear():e.value=new y({view:"leafer",wheel:{disabled:!0},move:{drag:!1,scroll:!1}}),W(e,t,s),t.value.length===1){const p=E(t.value[0]);e.value.add(p);const m=V(t.value[0]);e.value.add(m);const g=$(t.value[0]);e.value.add(g)}};return(t,s)=>(N(),b("div",T,[B,A(_,{data:n,class:"leaflet",onGetPoints:o})]))}}),ae=S(F,[["__scopeId","data-v-ee6df927"]]);export{ae as default};
