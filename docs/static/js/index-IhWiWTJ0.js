import"./mobx-preact-PKhkWFJ1.js";import{_ as r}from"./preact-n22zw_-M.js";import{P as M,C as I,a as z,R as m,b as S,c as j}from"./@logicflow-AS830fMk.js";import{a as y}from"./uuid-hzB4Li_C.js";function F(n){var A,N,k,E,R,C,T,O;class b extends I{getShape(){const{x:t,y:i}=this.props.model,s=this.props.model.getNodeStyle();return r("g",{},[r("circle",{...s,cx:t,cy:i,r:30,stroke:"#000",fill:"#000"})])}getText(){const{x:t,y:i,text:s}=this.props.model;return r("text",{x:t,y:i,fill:"#fff",textAnchor:"middle",alignmentBaseline:"middle",style:{fontSize:12}},s.value)}}class c extends z{setAttributes(){this.r=30,this.isSelected=!1}getConnectedTargetRules(){const t=super.getConnectedTargetRules(),i={message:"开始节点只能连出，不能连入！",validate:(s,l)=>{let e=!0;return l&&(e=!1),e}};return t.push(i),t}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"开始节点只能连出一条线！",validate:(s,l)=>{let e=!0;return s!=null&&s.outgoing.edges.length&&(e=!1),e}};return t.push(i),t}createId(){return y()}}(A=n.value)==null||A.register({type:"start",view:b,model:c});class h extends m{getShape(){const{x:t,y:i,width:s,height:l,radius:e}=this.props.model,x=this.props.model.getNodeStyle();return r("g",{},[r("rect",{...x,x:t-s/2,y:i-l/2,rx:e,ry:e,width:120,height:50,stroke:"#000",fill:"#000"})])}getText(){const{x:t,y:i,text:s,width:l,height:e}=this.props.model;return r("foreignObject",{x:t-l/2,y:i-e/2,className:"foreign-object",style:{width:l,height:e}},[r("p",{style:{fontSize:12,width:l,height:e,lineHeight:e+"px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",padding:"0 8px",boxSizing:"border-box",margin:"0",color:"#fff"}},s.value)])}}class f extends S{setAttributes(){this.width=120,this.height=50,this.radius=4,this.isSelected=!1}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"不能连接自己",validate:(s,l)=>{let e=!0;return(s==null?void 0:s.id)===(l==null?void 0:l.id)&&(e=!1),e}};return t.push(i),t}createId(){return y()}}(N=n.value)==null||N.register({type:"launch",view:h,model:f});class w extends m{getShape(){const{x:t,y:i,width:s,height:l,radius:e}=this.props.model,x=this.props.model.getNodeStyle();return r("g",{},[r("rect",{...x,x:t-s/2,y:i-l/2,rx:e,ry:e,width:120,height:50,stroke:"#facd91",fill:"#facd91"})])}getText(){const{x:t,y:i,text:s,width:l,height:e}=this.props.model;return r("foreignObject",{x:t-l/2,y:i-e/2,className:"foreign-object",style:{width:l,height:e}},[r("p",{style:{fontSize:12,width:l,height:e,lineHeight:e+"px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",padding:"0 8px",boxSizing:"border-box",margin:"0"}},s.value)])}}class u extends S{setAttributes(){this.width=120,this.height=50,this.radius=4,this.isSelected=!1}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"不能连接自己",validate:(s,l)=>{let e=!0;return(s==null?void 0:s.id)===(l==null?void 0:l.id)&&(e=!1),e}};return t.push(i),t}createId(){return y()}}(k=n.value)==null||k.register({type:"approver",view:w,model:u});class g extends m{getShape(){const{x:t,y:i,width:s,height:l,radius:e}=this.props.model,x=this.props.model.getNodeStyle();return r("g",{},[r("rect",{...x,x:t-s/2,y:i-l/2,rx:e,ry:e,width:120,height:50,stroke:"#caf982",fill:"#caf982"})])}getText(){const{x:t,y:i,text:s,width:l,height:e}=this.props.model;return r("foreignObject",{x:t-l/2,y:i-e/2,className:"foreign-object",style:{width:l,height:e}},[r("p",{style:{fontSize:12,width:l,height:e,lineHeight:e+"px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",padding:"0 8px",boxSizing:"border-box",margin:"0"}},s.value)])}}class p extends S{setAttributes(){this.width=120,this.height=50,this.radius=4,this.isSelected=!1}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"不能连接自己",validate:(s,l)=>{let e=!0;return(s==null?void 0:s.id)===(l==null?void 0:l.id)&&(e=!1),e}};return t.push(i),t}createId(){return y()}}(E=n.value)==null||E.register({type:"link",view:g,model:p});class a extends m{getShape(){const{x:t,y:i,width:s,height:l,radius:e}=this.props.model,x=this.props.model.getNodeStyle();return r("g",{},[r("rect",{...x,x:t-s/2,y:i-l/2,rx:e,ry:e,width:120,height:50,stroke:"#81d3f8",fill:"#81d3f8"})])}getText(){const{x:t,y:i,text:s,width:l,height:e}=this.props.model;return r("foreignObject",{x:t-l/2,y:i-e/2,className:"foreign-object",style:{width:l,height:e}},[r("p",{style:{fontSize:12,width:l,height:e,lineHeight:e+"px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",padding:"0 8px",boxSizing:"border-box",margin:"0"}},s.value)])}}class o extends S{setAttributes(){this.width=120,this.height=50,this.radius=4,this.isSelected=!1}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"不能连接自己",validate:(s,l)=>{let e=!0;return(s==null?void 0:s.id)===(l==null?void 0:l.id)&&(e=!1),e}};return t.push(i),t}createId(){return y()}}(R=n.value)==null||R.register({type:"review",view:a,model:o});class v extends I{getShape(){const{x:t,y:i}=this.props.model,s=this.props.model.getNodeStyle();return r("g",{},[r("circle",{...s,cx:t,cy:i,r:30,stroke:"#000",fill:"#000"})])}getText(){const{x:t,y:i,text:s}=this.props.model;return r("text",{x:t,y:i,fill:"#fff",textAnchor:"middle",alignmentBaseline:"middle",style:{fontSize:12}},s.value)}}class L extends z{setAttributes(){this.r=30,this.isSelected=!1}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"终止节点不能作为连线的起点",validate:()=>!1};return t.push(i),t}createId(){return y()}}(C=n.value)==null||C.register({type:"end",view:v,model:L});class D extends j{getEdgeStyle(){const t=super.getEdgeStyle();return t.stroke="#000",t.strokeDasharray="3 3",t}}(T=n.value)==null||T.register({type:"dashedLine",view:M,model:D});class H extends j{setAttributes(){this.isSelected=!1,this.isHitable=!1}}(O=n.value)==null||O.register({type:"startPolyline",view:M,model:H})}function q(n,b){let c,h=40,f=40;return[{keys:["ctrl + c","cmd + c"],callback:()=>{var u;c=(u=n.value)==null?void 0:u.getSelectElements().nodes}},{keys:["ctrl + v","cmd + v"],callback:()=>{var g,p;if(c==null?void 0:c.find(a=>a.type==="start"||a.type==="end"||a.type==="launch"))return!0;if(c){(g=n.value)==null||g.clearSelectElements(),c.forEach(function(o){return o.x+=h,o.y+=h,o.text.x+=h,o.text.y+=h,o});let a=(p=n.value)==null?void 0:p.addElements({nodes:c,edges:[]},f);if(!a)return!0;a.nodes.forEach(function(o){var v;return b.value=o.getData(),(v=n.value)==null?void 0:v.selectElementById(o.id,!0)}),f=f+h}return!1}},{keys:["backspace"],callback:()=>{var g,p;const u=(g=n.value)==null?void 0:g.getSelectElements(!0);if(u)return(p=n.value)==null||p.clearSelectElements(),u.edges.forEach(function(a){var o;return a.id&&((o=n.value)==null?void 0:o.deleteEdge(a.id))}),u.nodes.forEach(function(a){var o;return a.type==="start"||a.type==="end"||a.type==="launch"?!0:a.id&&((o=n.value)==null?void 0:o.deleteNode(a.id))}),!1}}]}const K=[{label:"新增",value:"add"},{label:"修改",value:"update"},{label:"删除",value:"delete"}],W=[{label:"撤回",value:"back"},{label:"作废",value:"cancel"},{label:"后加签",value:"addSign"},{label:"传阅",value:"circulate"}],G=[{label:"同意",value:"agree"},{label:"不同意",value:"reject"},{label:"退回",value:"back"}],J=[{label:"撤回",value:"back"},{label:"转办",value:"transfer"},{label:"前加签",value:"frontAddSign"},{label:"后加签",value:"backAddSign"},{label:"传阅",value:"circulate"}],Q={initiator:"发起者必填",reviewerSource:"审核者来源必填",reviewer:"审核者必填",auditMethod:"多人审核方式必填",baseAction:"基本操作必填",backAction:"退回操作必填",readerSource:"传阅者来源必填",reader:"传阅者必填"};export{J as a,G as b,F as c,Q as d,K as f,q as r,W as s};
