import{a as g}from"./element-plus-t8j70jxJ.js";import{d as t}from"./dhtmlx-gantt-C-yz-ilC.js";import{h as p}from"./html2canvas-BfYXEYrK.js";import{d as l}from"./dayjs-BkBTkyCe.js";import{r as u,d as c,e as _,k as f,c as m,R as x,a as k,J as y,Q as h,o as v,O as M}from"./@vue-AhIeOBdH.js";import{_ as N}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./lodash-es-CVJ_Bk8S.js";import"./@vueuse-CAc1CHwG.js";import"./@element-plus-CLWHGgw5.js";import"./@sxzz-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-D0iZPv2f.js";import"./@turf-Bfw5sV2K.js";const $=()=>{const e=u();t.gantt.config.date_format="%Y/%m/%d",t.gantt.config.duration_unit="month",t.gantt.config.scale_unit="month",t.gantt.config.date_scale="%Y/%m/%d",t.gantt.config.step=1,t.gantt.i18n.setLocale("cn"),t.gantt.config.autosize=!0,t.gantt.config.autofit=!0,t.gantt.config.open_tree_initially=!0,t.gantt.config.readonly=!0,t.gantt.config.show_grid=!0,t.gantt.templates.grid_open=r=>"<div data-icon='"+(r.$open?"close":"open")+"' class='gantt_tree_icon gantt_"+(r.$open?"close":"open")+"'></div>",t.gantt.templates.grid_folder=r=>"",t.gantt.templates.grid_file=r=>"",t.gantt.templates.task_text=function(r,o,a){if(a.real_end_date){var i=t.gantt.getTaskPosition(a,a.start_date,new Date(l(a.real_end_date).format("YYYY-MM-DD 12:00:00")));return`<div class="real-task" style="position:absolute;left:0px;top:0px;width:${i.width}px;height:100%"></div>`}return""},t.gantt.templates.progress_text=function(r,o,a){const i=a.$level;return console.log(a.$level),a.progress?`<div style="text-align:right;color:#000;background-color:${T("#04aac1",i*20,.8)}">${Math.round(a.progress*100)}%</div>`:""},t.gantt.config.columns=[{name:"keyNode",resize:!0,label:"关键节点",width:200,align:"center",tree:!0},{name:"signee",resize:!0,label:"签收人",width:70,align:"center"}],t.gantt.plugins({marker:!0,tooltip:!0});const n=new Date(l(new Date).format("YYYY-MM-DD 12:00:00")),s=t.gantt.date.date_to_str(t.gantt.config.task_date);return t.gantt.addMarker({start_date:n,css:"today",text:"今日:"+l(new Date).format("YYYY-MM-DD"),title:"Today: "+s(n)}),t.gantt.templates.tooltip_text=function(r,o,a){return(a.keyNode?`<b>关键节点:${a.keyNode}</b><br/>`:"")+(a.signee?`<b>签收人:${a.signee}</b>`:"")},{init:r=>{t.gantt.init(e.value),t.gantt.parse(r)},ganttRef:e}};function T(e,n,s){let d=e.length===3||e.length===4,r=/^#[0-9a-fA-F]{6}$/.test(e);if(!d&&!r)throw new Error("Invalid color format. Accepted formats: RGB (e.g., [255, 0, 0]) or Hex (e.g., #ff0000)");let o;return d?o=[...e,s]:r&&(o=[...Y(e),s]),o=w(o,n),`rgba(${o[0]},${o[1]},${o[2]},${o[3]})`}function Y(e){let n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function w(e,n){return[Math.round(e[0]+n)>255?255:Math.round(e[0]+n),Math.round(e[1]+n)>255?255:Math.round(e[1]+n),Math.round(e[2]+n)>255?255:Math.round(e[2]+n),e[3]]}const b={name:"Gantt"},D=c({...b,setup(e){const n=_({tasks:{data:[{id:1,text:"Task #1",keyNode:"关键节点文本说明2",signee:"张三三",start_date:"2024-01-17",end_date:"2024-01-30",real_end_date:"2024-02-24",progress:1,parent:0,open:!0},{id:2,text:"Task #2",keyNode:"关键节点文本说明2",signee:"张三三",start_date:"2024-01-17",end_date:"2024-01-30",real_end_date:"2024-01-24",progress:1,parent:0,open:!0},{id:20,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:1},{id:21,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:1},{id:201,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:21},{id:2001,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:201},{id:20001,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:2001},{id:200001,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:20001},{id:2000001,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6}]}}),{init:s,ganttRef:d}=$(),r=()=>{p(document.querySelector("#custom")).then(function(o){document.body.querySelector("#app").appendChild(o)})};return f(()=>{s(n.tasks)}),(o,a)=>{const i=g;return v(),m(h,null,[x(i,{type:"primary",size:"default",onClick:r},{default:y(()=>[...a[0]||(a[0]=[M("截图",-1)])]),_:1}),k("div",{id:"custom",ref_key:"ganttRef",ref:d,class:"h-full w-full"},null,512)],64)}}}),O=N(D,[["__scopeId","data-v-8450259d"]]);export{O as default};
