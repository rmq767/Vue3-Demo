import{q as f,a as N}from"./element-plus-CU5GJTiG.js";import"./mobx-preact-Bh0rinU2.js";import"./preact-Dv5xcXl8.js";import{L as B}from"./@logicflow-C_Zfo9qY.js";import C from"./node-panel-D_GdN2ZO.js";import{r as E,a as D,b as u}from"./index-CoD4fdWf.js";import L from"./control-CcU1PEPs.js";import F from"./setting-Bn6OyxtK.js";import{d as R,r as g,s as V,k as $,c as G,a as y,I as q,L as A,R as m,J as h,o as k,O as w}from"./@vue-AhIeOBdH.js";import{_ as M}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./lodash-es-CVJ_Bk8S.js";import"./@vueuse-CAc1CHwG.js";import"./@element-plus-BPC4xHUH.js";import"./@sxzz-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BkBTkyCe.js";import"./@turf-Bfw5sV2K.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-D0iZPv2f.js";import"./mobx-DdXfW9UA.js";import"./uuid-Dj2d8qur.js";import"./classnames-Bd-IOj2N.js";import"./mousetrap-DBMTPuUY.js";import"./mobx-utils-CAWeVucu.js";import"./flow-setting-CKWgHtrH.js";import"./start-flow-setting-M8dFl6Yb.js";import"./choose-person-C5GUolBL.js";import"./action-setting-phU8-Kkh.js";import"./edge-setting-DrJ29mKK.js";import"./link-setting-C09OXkBx.js";import"./review-setting-Dc6eD7Kz.js";const P={class:"logic-flow-container"},S={class:"logic-flow-header"},T={class:"logic-flow-main"},J={name:"LogicFlow"},K=R({...J,setup(O){const _=g(),s=g(),i=g("all"),o=V(),v=e=>{switch(e.type){case"launch":s.value=e,i.value=e.type;break;case"approver":s.value=e,i.value=e.type;break;case"link":s.value=e,i.value=e.type;break;case"review":s.value=e,i.value=e.type;break;case"polyline":case"dashedLine":s.value=e,i.value=e.type;break}},x=e=>{var l,n,c,d,p;(l=e.value)==null||l.on("blank:click",t=>{i.value="all"}),(n=e.value)==null||n.on("node:mousedown",({data:t})=>{var r;(r=e.value)==null||r.selectElementById(t.id,!1),v(t)}),(c=e.value)==null||c.on("edge:click",({data:t})=>{var r;(r=e.value)==null||r.selectElementById(t.id,!1),v(t)}),(d=e.value)==null||d.on("connection:not-allowed",t=>(f.error(t.msg),!1)),(p=e.value)==null||p.on("node:dnd-add",({data:t})=>{var r,a;(r=e.value)==null||r.selectElementById(t.id,!1),v(t),(a=e.value)==null||a.container.focus()})},b=()=>{var e;console.log((e=o.value)==null?void 0:e.getGraphData())},I=()=>{var l,n,c,d;const{nodes:e}=(l=o.value)==null?void 0:l.getGraphData();for(let p=0;p<e.length;p++){const t=e[p],{properties:r}=t;for(const a in r)if(Array.isArray(r[a])){if(u[a]&&r[a].length===0)return f.error(`${(n=t.text)==null?void 0:n.value}节点 ${u[a]}`)}else if(u[a]&&!r[a])return f.error(`${(c=t.text)==null?void 0:c.value}节点 ${u[a]}`)}console.log((d=o.value)==null?void 0:d.getGraphData())};return $(()=>{o.value=new B({container:_.value,grid:!0,keyboard:{enabled:!0,shortcuts:E(o,s,i)},textEdit:!1}),D(o),x(o),o.value.render({nodes:[{id:"node_1",type:"start",x:100,y:300,properties:{width:60,height:60},text:{x:100,y:300,value:"开始"}},{id:"node_2",type:"launch",x:100,y:400,properties:{width:120,height:50},text:{x:100,y:400,value:"发起流程"}},{id:"node_3",type:"end",x:100,y:600,properties:{width:60,height:60},text:{x:100,y:600,value:"结束"}}],edges:[{id:"edge_1",type:"startPolyline",sourceNodeId:"node_1",targetNodeId:"node_2"},{id:"edge_2",type:"polyline",sourceNodeId:"node_2",targetNodeId:"node_3"}]}),o.value.translateCenter()}),(e,l)=>{const n=N;return k(),G("div",P,[y("div",S,[m(n,{type:"primary",onClick:b},{default:h(()=>[...l[0]||(l[0]=[w("获取数据",-1)])]),_:1}),m(n,{type:"primary",onClick:I},{default:h(()=>[...l[1]||(l[1]=[w("提交",-1)])]),_:1})]),y("div",T,[y("div",{class:"logic-flow",ref_key:"logicFlowRef",ref:_},null,512),m(F,{class:"logic-flow-setting",data:s.value,lf:o.value,type:i.value},null,8,["data","lf","type"]),m(C,{lf:o.value},null,8,["lf"])]),o.value?(k(),q(L,{key:0,lf:o.value},null,8,["lf"])):A("",!0)])}}}),Ie=M(K,[["__scopeId","data-v-c1f3fdb1"]]);export{Ie as default};
