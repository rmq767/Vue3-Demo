import"./mobx-preact-Bh0rinU2.js";import{_ as r}from"./preact-Dv5xcXl8.js";import{P as I,C as z,a as j,R as S,b,c as L}from"./@logicflow-C_Zfo9qY.js";import{a as f}from"./uuid-Dj2d8qur.js";function F(a){var N,k,E,R,C,T,O,M;class w extends j{getShape(){const{x:t,y:i}=this.props.model,s=this.props.model.getNodeStyle();return r("g",{},[r("circle",{...s,cx:t,cy:i,r:30,stroke:"#000",fill:"#000"})])}getText(){const{x:t,y:i,text:s}=this.props.model;return r("text",{x:t,y:i,fill:"#fff",textAnchor:"middle",alignmentBaseline:"middle",style:{fontSize:12}},s.value)}}class v extends z{setAttributes(){this.r=30,this.isSelected=!1}getConnectedTargetRules(){const t=super.getConnectedTargetRules(),i={message:"开始节点只能连出，不能连入！",validate:(s,l)=>{let e=!0;return l&&(e=!1),e}};return t.push(i),t}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"开始节点只能连出一条线！",validate:(s,l)=>{let e=!0;return s!=null&&s.outgoing.edges.length&&(e=!1),e}};return t.push(i),t}createId(){return f()}}(N=a.value)==null||N.register({type:"start",view:w,model:v});class c extends b{getShape(){const{x:t,y:i,width:s,height:l,radius:e}=this.props.model,x=this.props.model.getNodeStyle();return r("g",{},[r("rect",{...x,x:t-s/2,y:i-l/2,rx:e,ry:e,width:120,height:50,stroke:"#000",fill:"#000"})])}getText(){const{x:t,y:i,text:s,width:l,height:e}=this.props.model;return r("foreignObject",{x:t-l/2,y:i-e/2,className:"foreign-object",style:{width:l,height:e}},[r("p",{style:{fontSize:12,width:l,height:e,lineHeight:e+"px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",padding:"0 8px",boxSizing:"border-box",margin:"0",color:"#fff"}},s.value)])}}class h extends S{setAttributes(){this.width=120,this.height=50,this.radius=4,this.isSelected=!1}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"不能连接自己",validate:(s,l)=>{let e=!0;return(s==null?void 0:s.id)===(l==null?void 0:l.id)&&(e=!1),e}};return t.push(i),t}createId(){return f()}}(k=a.value)==null||k.register({type:"launch",view:c,model:h});class y extends b{getShape(){const{x:t,y:i,width:s,height:l,radius:e}=this.props.model,x=this.props.model.getNodeStyle();return r("g",{},[r("rect",{...x,x:t-s/2,y:i-l/2,rx:e,ry:e,width:120,height:50,stroke:"#facd91",fill:"#facd91"})])}getText(){const{x:t,y:i,text:s,width:l,height:e}=this.props.model;return r("foreignObject",{x:t-l/2,y:i-e/2,className:"foreign-object",style:{width:l,height:e}},[r("p",{style:{fontSize:12,width:l,height:e,lineHeight:e+"px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",padding:"0 8px",boxSizing:"border-box",margin:"0"}},s.value)])}}class A extends S{setAttributes(){this.width=120,this.height=50,this.radius=4,this.isSelected=!1}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"不能连接自己",validate:(s,l)=>{let e=!0;return(s==null?void 0:s.id)===(l==null?void 0:l.id)&&(e=!1),e}};return t.push(i),t}createId(){return f()}}(E=a.value)==null||E.register({type:"approver",view:y,model:A});class u extends b{getShape(){const{x:t,y:i,width:s,height:l,radius:e}=this.props.model,x=this.props.model.getNodeStyle();return r("g",{},[r("rect",{...x,x:t-s/2,y:i-l/2,rx:e,ry:e,width:120,height:50,stroke:"#caf982",fill:"#caf982"})])}getText(){const{x:t,y:i,text:s,width:l,height:e}=this.props.model;return r("foreignObject",{x:t-l/2,y:i-e/2,className:"foreign-object",style:{width:l,height:e}},[r("p",{style:{fontSize:12,width:l,height:e,lineHeight:e+"px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",padding:"0 8px",boxSizing:"border-box",margin:"0"}},s.value)])}}class g extends S{setAttributes(){this.width=120,this.height=50,this.radius=4,this.isSelected=!1}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"不能连接自己",validate:(s,l)=>{let e=!0;return(s==null?void 0:s.id)===(l==null?void 0:l.id)&&(e=!1),e}};return t.push(i),t}createId(){return f()}}(R=a.value)==null||R.register({type:"link",view:u,model:g});class p extends b{getShape(){const{x:t,y:i,width:s,height:l,radius:e}=this.props.model,x=this.props.model.getNodeStyle();return r("g",{},[r("rect",{...x,x:t-s/2,y:i-l/2,rx:e,ry:e,width:120,height:50,stroke:"#81d3f8",fill:"#81d3f8"})])}getText(){const{x:t,y:i,text:s,width:l,height:e}=this.props.model;return r("foreignObject",{x:t-l/2,y:i-e/2,className:"foreign-object",style:{width:l,height:e}},[r("p",{style:{fontSize:12,width:l,height:e,lineHeight:e+"px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",padding:"0 8px",boxSizing:"border-box",margin:"0"}},s.value)])}}class n extends S{setAttributes(){this.width=120,this.height=50,this.radius=4,this.isSelected=!1}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"不能连接自己",validate:(s,l)=>{let e=!0;return(s==null?void 0:s.id)===(l==null?void 0:l.id)&&(e=!1),e}};return t.push(i),t}createId(){return f()}}(C=a.value)==null||C.register({type:"review",view:p,model:n});class o extends j{getShape(){const{x:t,y:i}=this.props.model,s=this.props.model.getNodeStyle();return r("g",{},[r("circle",{...s,cx:t,cy:i,r:30,stroke:"#000",fill:"#000"})])}getText(){const{x:t,y:i,text:s}=this.props.model;return r("text",{x:t,y:i,fill:"#fff",textAnchor:"middle",alignmentBaseline:"middle",style:{fontSize:12}},s.value)}}class m extends z{setAttributes(){this.r=30,this.isSelected=!1}getConnectedSourceRules(){const t=super.getConnectedSourceRules(),i={message:"终止节点不能作为连线的起点",validate:()=>!1};return t.push(i),t}createId(){return f()}}(T=a.value)==null||T.register({type:"end",view:o,model:m});class D extends L{getEdgeStyle(){const t=super.getEdgeStyle();return t.stroke="#000",t.strokeDasharray="3 3",t}}(O=a.value)==null||O.register({type:"dashedLine",view:I,model:D});class H extends L{setAttributes(){this.isSelected=!1,this.isHitable=!1}}(M=a.value)==null||M.register({type:"startPolyline",view:I,model:H})}function q(a,w,v){let c,h=40,y=40;return[{keys:["ctrl + c","cmd + c"],callback:()=>{var u;c=(u=a.value)==null?void 0:u.getSelectElements().nodes}},{keys:["ctrl + v","cmd + v"],callback:()=>{var g,p;if(c==null?void 0:c.find(n=>n.type==="start"||n.type==="end"||n.type==="launch"))return!0;if(c){(g=a.value)==null||g.clearSelectElements(),c.forEach(function(o){return o.x+=h,o.y+=h,o.text.x+=h,o.text.y+=h,o});let n=(p=a.value)==null?void 0:p.addElements({nodes:c,edges:[]},y);if(!n)return!0;n.nodes.forEach(function(o){var m;return w.value=o.getData(),(m=a.value)==null?void 0:m.selectElementById(o.id,!0)}),y=y+h}return!1}},{keys:["backspace"],callback:()=>{var g,p;const u=(g=a.value)==null?void 0:g.getSelectElements(!0);if(u)return(p=a.value)==null||p.clearSelectElements(),u.edges.forEach(function(n){var o;return n.id&&((o=a.value)==null||o.deleteEdge(n.id)),v.value="all"}),u.nodes.forEach(function(n){var o;return n.type==="start"||n.type==="end"||n.type==="launch"?!0:(n.id&&((o=a.value)==null||o.deleteNode(n.id)),v.value="all")}),!1}}]}const K=[{label:"新增",value:"add"},{label:"修改",value:"update"},{label:"删除",value:"delete"}],W=[{label:"撤回",value:"back"},{label:"作废",value:"cancel"},{label:"后加签",value:"addSign"},{label:"传阅",value:"circulate"}],G=[{label:"同意",value:"agree"},{label:"不同意",value:"reject"},{label:"退回",value:"back"}],J=[{label:"撤回",value:"back"},{label:"转办",value:"transfer"},{label:"前加签",value:"frontAddSign"},{label:"后加签",value:"backAddSign"},{label:"传阅",value:"circulate"}],Q={initiator:"发起者必填",reviewerSource:"审核者来源必填",reviewer:"审核者必填",auditMethod:"多人审核方式必填",baseAction:"基本操作必填",backAction:"退回操作必填",readerSource:"传阅者来源必填",reader:"传阅者必填"};export{J as a,G as b,F as c,Q as d,K as f,q as r,W as s};
