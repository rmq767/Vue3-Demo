import R from"./left-YjCfgdM2.js";import{o as b,S}from"./grid-layout-plus-PaIlcj6s.js";import{r as y,l as z,B as D,d as N,s as m,c as w,a as x,V as _,Q as I,u as k,aw as P,ax as V,o as p,F as G,a8 as M,P as E,R as F,L as O,S as U,n as X}from"./@vue-1pEateLc.js";import Y from"./line-chart-Lrw8JtxW.js";import j from"./bar-chart-KOoG-sv6.js";import H from"./pie-chart-p9kMRo0t.js";import{_ as Q}from"./plugin-vueexport-helper-x3n3nnut.js";import"./@vexip-ui-zupMWbn8.js";import"./interactjs-hiaLavfK.js";import"./acorn-bQvPYi_r.js";import"./echarts-wwpdnPZR.js";import"./tslib-21A5UWR7.js";import"./zrender-Gq13zmkq.js";const T=()=>{const h=y({x:0,y:0}),a=v=>{h.value={x:v.clientX,y:v.clientY}};return z(()=>{document.addEventListener("dragover",a)}),D(()=>{document.removeEventListener("dragover",a)}),{position:h}},W=h=>(P("data-v-08012a38"),h=h(),V(),h),q={class:"drag-layout"},A={class:"left-container"},J=W(()=>x("div",{class:"right-container"},null,-1)),K={name:"DragLayout"},Z=N({...K,setup(h){const a=y([]),v=y(),d=m(),{position:s}=T(),c=m(new Map),f=y(),l="drop",e={x:-1,y:-1,w:2,h:2,i:""},B=()=>{var o;const r=(o=v.value)==null?void 0:o.getBoundingClientRect();if(!r||!d.value)return;const i=s.value.x>r.left&&s.value.x<r.right&&s.value.y>r.top&&s.value.y<r.bottom;i&&!a.value.find(n=>n.i===l)&&a.value.push({x:a.value.length*2%12,y:a.value.length+12,w:2,h:2,i:l});const t=a.value.findIndex(n=>n.i===l);if(t!==-1){const n=d.value.getItem(l);if(!n)return;try{n.wrapper.style.display="none"}catch{}Object.assign(n.state,{top:s.value.y-r.top,left:s.value.x-r.left});const u=n.calcXY(s.value.y-r.top,s.value.x-r.left);i?(d.value.dragEvent("dragstart",l,u.x,u.y,e.h,e.w),e.i=String(t),e.x=a.value[t].x,e.y=a.value[t].y):(d.value.dragEvent("dragend",l,u.x,u.y,e.h,e.w),a.value=a.value.filter(g=>g.i!==l))}};function C(r){var n;const i=(n=v.value)==null?void 0:n.getBoundingClientRect();if(!i||!d.value)return;if(s.value.x>i.left&&s.value.x<i.right&&s.value.y>i.top&&s.value.y<i.bottom)d.value.dragEvent("dragend",l,e.x,e.y,e.h,e.w),a.value=a.value.filter(u=>u.i!==l);else return;const o=d.value.getItem(l);switch(a.value.push({x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}),d.value.dragEvent("dragend",e.i,e.x,e.y,e.h,e.w),r.id){case 1:c.value.set(e.i,{index:e.i,chartId:r.id,chart:Y,width:o.state.style.width,height:o.state.style.height});break;case 2:c.value.set(e.i,{index:e.i,chartId:r.id,chart:j,width:o.state.style.width,height:o.state.style.height});break;case 3:c.value.set(e.i,{index:e.i,chartId:r.id,chart:H,width:o.state.style.width,height:o.state.style.height});break}if(o)try{o.wrapper.style.display=""}catch{}}const L=(r,i,t,o,n)=>{const u=c.value.get(r);u.width=n+"px",u.height=o+"px",X(()=>{f.value&&f.value[Number(r)].resize()})};return(r,i)=>(p(),w("div",q,[x("div",A,[_(R,{onDrag:B,onDragEnd:C})]),x("div",{ref_key:"wrapper",ref:v,class:"main-container"},[_(k(S),{ref_key:"gridLayout",ref:d,layout:a.value,"onUpdate:layout":i[0]||(i[0]=t=>a.value=t),"col-num":8,"row-height":100,"is-bounded":!0,"auto-size":!0},{default:I(()=>[(p(!0),w(G,null,M(a.value,t=>(p(),E(k(b),{key:t.i,x:t.x,y:t.y,w:t.w,h:t.h,i:t.i,onResized:L},{default:I(()=>[c.value.get(t.i)?(p(),E(F(c.value.get(t.i).chart),{key:t.i,index:t.i,style:O({width:c.value.get(t.i).width,height:c.value.get(t.i).height}),ref_for:!0,ref_key:"chartRef",ref:f},null,8,["index","style"])):U("",!0)]),_:2},1032,["x","y","w","h","i"]))),128))]),_:1},8,["layout"])],512),J]))}}),he=Q(Z,[["__scopeId","data-v-08012a38"]]);export{he as default};
