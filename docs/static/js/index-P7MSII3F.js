import{a as g}from"./element-plus-i0VujY-j.js";import{d as t}from"./dhtmlx-gantt-hxoxGPDc.js";import{h as c}from"./html2canvas-obiqNZW0.js";import{d as l}from"./dayjs-1TH0Fy64.js";import{b as p,d as u,Z as _,i as f,o as m,c as x,T as y,O as k,a as h,F as v,S as M}from"./@vue-Af5-7kJW.js";import{_ as N}from"./plugin-vueexport-helper-x3n3nnut.js";import"./lodash-es-f5-qkO2x.js";import"./@vueuse-R4uT6QVn.js";import"./@element-plus-gEfZcgVY.js";import"./@sxzz--N-3kK7X.js";import"./@ctrl-ZggoHSuR.js";import"./async-validator-BHjhHa7C.js";import"./memoize-one-JaOscZgY.js";import"./escape-html-MDmRonL6.js";import"./acorn-bQvPYi_r.js";import"./normalize-wheel-es-1urBKM79.js";import"./@floating-ui-uFjme6UL.js";const T=()=>{const e=p();t.gantt.config.date_format="%Y/%m/%d",t.gantt.config.duration_unit="month",t.gantt.config.scale_unit="month",t.gantt.config.date_scale="%Y/%m/%d",t.gantt.config.step=1,t.gantt.i18n.setLocale("cn"),t.gantt.config.autosize=!0,t.gantt.config.autofit=!0,t.gantt.config.open_tree_initially=!0,t.gantt.config.readonly=!0,t.gantt.config.show_grid=!0,t.gantt.templates.grid_open=r=>"<div data-icon='"+(r.$open?"close":"open")+"' class='gantt_tree_icon gantt_"+(r.$open?"close":"open")+"'></div>",t.gantt.templates.grid_folder=r=>"",t.gantt.templates.grid_file=r=>"",t.gantt.templates.task_text=function(r,o,n){if(n.real_end_date){var i=t.gantt.getTaskPosition(n,n.start_date,new Date(l(n.real_end_date).format("YYYY-MM-DD 12:00:00")));return`<div class="real-task" style="position:absolute;left:0px;top:0px;width:${i.width}px;height:100%"></div>`}return""},t.gantt.templates.progress_text=function(r,o,n){const i=n.$level;return console.log(n.$level),n.progress?`<div style="text-align:right;color:#000;background-color:${$("#04aac1",i*20,.8)}">${Math.round(n.progress*100)}%</div>`:""},t.gantt.config.columns=[{name:"keyNode",resize:!0,label:"关键节点",width:200,align:"center",tree:!0},{name:"signee",resize:!0,label:"签收人",width:70,align:"center"}],t.gantt.plugins({marker:!0,tooltip:!0});const a=new Date(l(new Date).format("YYYY-MM-DD 12:00:00")),s=t.gantt.date.date_to_str(t.gantt.config.task_date);return t.gantt.addMarker({start_date:a,css:"today",text:"今日:"+l(new Date).format("YYYY-MM-DD"),title:"Today: "+s(a)}),t.gantt.templates.tooltip_text=function(r,o,n){return(n.keyNode?`<b>关键节点:${n.keyNode}</b><br/>`:"")+(n.signee?`<b>签收人:${n.signee}</b>`:"")},{init:r=>{t.gantt.init(e.value),t.gantt.parse(r)},ganttRef:e}};function $(e,a,s){let d=e.length===3||e.length===4,r=/^#[0-9a-fA-F]{6}$/.test(e);if(!d&&!r)throw new Error("Invalid color format. Accepted formats: RGB (e.g., [255, 0, 0]) or Hex (e.g., #ff0000)");let o;return d?o=[...e,s]:r&&(o=[...Y(e),s]),o=w(o,a),`rgba(${o[0]},${o[1]},${o[2]},${o[3]})`}function Y(e){let a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:null}function w(e,a){return[Math.round(e[0]+a)>255?255:Math.round(e[0]+a),Math.round(e[1]+a)>255?255:Math.round(e[1]+a),Math.round(e[2]+a)>255?255:Math.round(e[2]+a),e[3]]}const b={name:"Gantt"},D=u({...b,setup(e){const a=_({tasks:{data:[{id:1,text:"Task #1",keyNode:"关键节点文本说明2",signee:"张三三",start_date:"2024-01-17",end_date:"2024-01-30",real_end_date:"2024-02-24",progress:1,parent:0,open:!0},{id:2,text:"Task #2",keyNode:"关键节点文本说明2",signee:"张三三",start_date:"2024-01-17",end_date:"2024-01-30",real_end_date:"2024-01-24",progress:1,parent:0,open:!0},{id:20,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:1},{id:21,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:1},{id:201,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:21},{id:2001,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:201},{id:20001,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:2001},{id:200001,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6,parent:20001},{id:2000001,text:"Task #1-1",keyNode:"关键节点文本说明3",signee:"张三三1",start_date:"2024-02-17",end_date:"2024-02-27",progress:.6}]}}),{init:s,ganttRef:d}=T(),r=()=>{c(document.querySelector("#custom")).then(function(o){document.body.querySelector("#app").appendChild(o)})};return f(()=>{s(a.tasks)}),(o,n)=>{const i=g;return m(),x(v,null,[y(i,{type:"primary",size:"default",onClick:r},{default:k(()=>[M("截图")]),_:1}),h("div",{id:"custom",ref_key:"ganttRef",ref:d,class:"h-full w-full"},null,512)],64)}}}),Z=N(D,[["__scopeId","data-v-8450259d"]]);export{Z as default};
