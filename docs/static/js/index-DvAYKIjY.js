import"./leafer-ui-BkUVF8YB.js";import _ from"./leaflet2-CsCNEMht.js";import{X as g,L as w,g as y}from"./@leafer-ui-CS0pT7tI.js";import{d as L,s as x,c as b,a as A,R as k,o as H}from"./@vue-DtXbQ2UY.js";import{_ as N}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./@leafer-Dgei2GiV.js";import"./element-plus-DRy_UtcF.js";import"./lodash-es-CVJ_Bk8S.js";import"./@vueuse-ZySg_D90.js";import"./@element-plus-dWmgPpBK.js";import"./@sxzz-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-B7BNuc5J.js";import"./@turf-n0MF4LHv.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-D0iZPv2f.js";import"./leaflet-v1Y5QXvJ.js";import"./leaflet.chinatmsproviders-DrehvF96.js";const f=10,c=200;let m=0,h=0,d=0,a=0,i=.2;const C=l=>{let s=0;return l.forEach(e=>{s=Math.max(s,e.length)}),s},W=(l,s,e)=>{var t,n;m=(t=l.value)==null?void 0:t.width,h=(n=l.value)==null?void 0:n.height;const o=Number(e.value.toFixed(4));d=Number(((m-f*s.value.length-c*2)/o).toFixed(2));const r=C(s.value);a=Number((h/r).toFixed(4))},$=(l,s)=>{const{info:e,length:o}=l,r=[];for(let n=0;n<e.length;n++){const p=e[n],u=[p.distance*d+c,p.end*a];r.push(...u)}return new w({points:r,strokeWidth:f,stroke:"rgb(50,205,121)",cornerRadius:f,strokeCap:"round",strokeJoin:"round"})},E=l=>{const{info:s}=l,e=[];for(let o=1;o<s.length;o++){const r=s[o],t=s[o-1],n=new g({fill:`#${o}b${o}04${o}`,points:[0,t.end*a-i,t.distance*d+c,t.end*a-i,r.distance*d+c,r.end*a+i,0,r.end*a+i]});e.push(n)}return e},I=l=>{const{info:s}=l,e=[];for(let o=1;o<s.length;o++){const r=s[o],t=s[o-1],n=new g({fill:`#${o}b${o}04${o}`,points:[t.distance*d+c,t.end*a-i,m,t.end*a-i,m,r.end*a+i,r.distance*d+c,r.end*a+i]});e.push(n)}return e},R={class:"leafer-container"},S={name:"Leafer"},T=L({...S,setup(l){const s=[{name:"宁209H13-9",businessId:"1680792663432409090",type:3,wellType:"水平井",pointData:[{lon:102.24508,lat:32.923487,remark:"测试（HX）"}],info:[{type:"start",start:0,end:0,coordinate:[102.24508,32.923487]},{type:"地层1",start:0,end:2e3,coordinate:[102.24008,32.923487]},{type:"地层1-1",start:2e3,end:3e3,coordinate:[102.236319,32.923487]},{type:"地层2",start:3e3,end:6e3,coordinate:[102.221319,32.923487]},{type:"地层3",start:6e3,end:7e3,coordinate:[102.211319,32.923487]}],length:7e3}],e=x(),o=(t,n)=>{e.value&&e.value.removeAll(),r(t,n),console.log(t.value,n.value)},r=(t,n)=>{if(e.value?e.value.clear():e.value=new y({view:"leafer",wheel:{disabled:!0},move:{drag:!1,scroll:!1}}),W(e,t,n),t.value.length===1){const p=E(t.value[0]);e.value.add(p);const u=I(t.value[0]);e.value.add(u);const v=$(t.value[0]);e.value.add(v)}};return(t,n)=>(H(),b("div",R,[n[0]||(n[0]=A("div",{id:"leafer",style:{width:"100%",height:"100vh"}},null,-1)),k(_,{data:s,class:"leaflet",onGetPoints:o})]))}}),oe=N(T,[["__scopeId","data-v-ee6df927"]]);export{oe as default};
