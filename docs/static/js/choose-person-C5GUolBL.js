import{d as L,u as T,n as w,x as E,y as N}from"./element-plus-CU5GJTiG.js";import{d as R,e as B,r as D,w as I,I as u,J as i,n as K,al as P,o as c,a as o,R as d,O as p,u as U,c as M,Q as S,a6 as F,P as G}from"./@vue-AhIeOBdH.js";import{_ as J}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./lodash-es-CVJ_Bk8S.js";import"./@vueuse-CAc1CHwG.js";import"./@element-plus-BPC4xHUH.js";import"./@sxzz-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BkBTkyCe.js";import"./@turf-Bfw5sV2K.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-D0iZPv2f.js";const O={class:"type"},Q={class:"panel"},$={class:"left-panel"},j={class:"search"},q={class:"content"},z={class:"right-panel"},A={class:"content checked-content"},H={name:"ChoosePerson"},W=R({...H,emits:["submit"],setup(X,{expose:m,emit:k}){const t=B({visible:!1,type:"1",filterText:"",value:[],data:[{label:"张三",key:"1"},{label:"李四",key:"2"},{label:"王五",key:"3",children:[{label:"王五1",key:"31"},{label:"王五2",key:"32"}]}],checked:[],checkedList:[]}),n=D(),f=k;I(()=>t.filterText,l=>{n.value.filter(l)});const _=l=>{t.visible=!0,K(()=>{var e;t.checked=l,(e=n.value)==null||e.setCheckedKeys([...l],!1)})},r=()=>{t.visible=!1,t.filterText=""},y=()=>{f("submit",t.checked,t.checkedList),r()},h=(l,e)=>l?e.label.includes(l):!0,v=()=>{var l,e;t.checked=(l=n.value)==null?void 0:l.getCheckedNodes(!0,!1).map(s=>s.key),t.checkedList=(e=n.value)==null?void 0:e.getCheckedNodes(!0,!1).map(s=>({label:s.label,key:s.key}))},b=l=>{var e;t.checkedList=t.checkedList.filter(s=>s.key!==l),(e=n.value)==null||e.setCheckedKeys(t.checkedList.map(s=>s.key),!1)};return m({open:_,clear:()=>{var l;t.checkedList=[],t.checked=[],(l=n.value)==null||l.setCheckedKeys([],!1)}}),(l,e)=>{const s=T,C=L,x=w,V=N,g=P("MyDialog");return c(),u(g,{modelValue:t.visible,"onUpdate:modelValue":e[2]||(e[2]=a=>t.visible=a),title:"选择人员",width:"800px",onClose:r,onCancel:r,onSubmit:y},{default:i(()=>[o("div",O,[o("label",null,[e[5]||(e[5]=o("span",null,"发起人：",-1)),d(C,{modelValue:t.type,"onUpdate:modelValue":e[0]||(e[0]=a=>t.type=a)},{default:i(()=>[d(s,{value:"1"},{default:i(()=>[...e[3]||(e[3]=[p("指定人员",-1)])]),_:1}),d(s,{value:"2"},{default:i(()=>[...e[4]||(e[4]=[p("角色",-1)])]),_:1})]),_:1},8,["modelValue"])])]),o("div",Q,[o("div",$,[e[6]||(e[6]=o("div",{class:"panel-title"},"人员选择",-1)),o("div",j,[d(x,{modelValue:t.filterText,"onUpdate:modelValue":e[1]||(e[1]=a=>t.filterText=a),style:{width:"100%"},placeholder:"请输入筛选内容"},null,8,["modelValue"])]),o("div",q,[d(U(E),{ref_key:"treeRef",ref:n,data:t.data,"show-checkbox":"","node-key":"key","check-on-click-node":!0,"filter-node-method":h,onCheckChange:v},null,8,["data"])])]),o("div",z,[e[7]||(e[7]=o("div",{class:"panel-title"},"已选择",-1)),o("div",A,[(c(!0),M(S,null,F(t.checkedList,a=>(c(),u(V,{key:a.key,closable:"",type:"primary",onClose:Z=>b(a.key)},{default:i(()=>[p(G(a.label),1)]),_:2},1032,["onClose"]))),128))])])])]),_:1},8,["modelValue"])}}}),ke=J(W,[["__scopeId","data-v-51a683c0"]]);export{ke as default};
