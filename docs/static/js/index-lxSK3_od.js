import b from"./left-DoOsvwGa.js";import{o as B,D}from"./grid-layout-plus-B2Pgi6hR.js";import{r as y,k as z,X as M,d as N,s as x,c as w,a as m,R as _,J as k,u as I,o as v,Q as G,a6 as P,I as E,L as V,M as X,D as O,n as S}from"./@vue-DtXbQ2UY.js";import U from"./line-chart-BuZ3Bith.js";import Y from"./bar-chart-CZ7Pi1Bz.js";import j from"./pie-chart-BT5sdpRF.js";import{_ as F}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./@vexip-ui-D8KORgdK.js";import"./interactjs-vBOoolo3.js";import"./@turf-n0MF4LHv.js";import"./echarts-C-WeUV9I.js";import"./tslib-BDyQ-Jie.js";import"./zrender-BIAL-eiR.js";const H=()=>{const f=y({x:0,y:0}),a=h=>{f.value={x:h.clientX,y:h.clientY}};return z(()=>{document.addEventListener("dragover",a)}),M(()=>{document.removeEventListener("dragover",a)}),{position:f}},J={class:"drag-layout"},Q={class:"left-container"},T={name:"DragLayout"},W=N({...T,setup(f){const a=y([]),h=y(),d=x(),{position:s}=H(),c=x(new Map),g=y(),l="drop",e={x:-1,y:-1,w:2,h:2,i:""},C=()=>{var o;const r=(o=h.value)==null?void 0:o.getBoundingClientRect();if(!r||!d.value)return;const n=s.value.x>r.left&&s.value.x<r.right&&s.value.y>r.top&&s.value.y<r.bottom;n&&!a.value.find(i=>i.i===l)&&a.value.push({x:a.value.length*2%12,y:a.value.length+12,w:2,h:2,i:l});const t=a.value.findIndex(i=>i.i===l);if(t!==-1){const i=d.value.getItem(l);if(!i)return;try{i.wrapper.style.display="none"}catch{}Object.assign(i.state,{top:s.value.y-r.top,left:s.value.x-r.left});const u=i.calcXY(s.value.y-r.top,s.value.x-r.left);n?(d.value.dragEvent("dragstart",l,u.x,u.y,e.h,e.w),e.i=String(t),e.x=a.value[t].x,e.y=a.value[t].y):(d.value.dragEvent("dragend",l,u.x,u.y,e.h,e.w),a.value=a.value.filter(p=>p.i!==l))}};function L(r){var i;const n=(i=h.value)==null?void 0:i.getBoundingClientRect();if(!n||!d.value)return;if(s.value.x>n.left&&s.value.x<n.right&&s.value.y>n.top&&s.value.y<n.bottom)d.value.dragEvent("dragend",l,e.x,e.y,e.h,e.w),a.value=a.value.filter(u=>u.i!==l);else return;const o=d.value.getItem(l);switch(a.value.push({x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}),d.value.dragEvent("dragend",e.i,e.x,e.y,e.h,e.w),r.id){case 1:c.value.set(e.i,{index:e.i,chartId:r.id,chart:U,width:o.state.style.width,height:o.state.style.height});break;case 2:c.value.set(e.i,{index:e.i,chartId:r.id,chart:Y,width:o.state.style.width,height:o.state.style.height});break;case 3:c.value.set(e.i,{index:e.i,chartId:r.id,chart:j,width:o.state.style.width,height:o.state.style.height});break}if(o)try{o.wrapper.style.display=""}catch{}}const R=(r,n,t,o,i)=>{const u=c.value.get(r);u.width=i+"px",u.height=o+"px",S(()=>{g.value&&g.value[Number(r)].resize()})};return(r,n)=>(v(),w("div",J,[m("div",Q,[_(b,{onDrag:C,onDragEnd:L})]),m("div",{ref_key:"wrapper",ref:h,class:"main-container"},[_(I(D),{ref_key:"gridLayout",ref:d,layout:a.value,"onUpdate:layout":n[0]||(n[0]=t=>a.value=t),"col-num":8,"row-height":100,"is-bounded":!0,"auto-size":!0},{default:k(()=>[(v(!0),w(G,null,P(a.value,t=>(v(),E(I(B),{key:t.i,x:t.x,y:t.y,w:t.w,h:t.h,i:t.i,onResized:R},{default:k(()=>[c.value.get(t.i)?(v(),E(X(c.value.get(t.i).chart),{key:t.i,index:t.i,style:O({width:c.value.get(t.i).width,height:c.value.get(t.i).height}),ref_for:!0,ref_key:"chartRef",ref:g},null,8,["index","style"])):V("",!0)]),_:2},1032,["x","y","w","h","i"]))),128))]),_:1},8,["layout"])],512),n[1]||(n[1]=m("div",{class:"right-container"},null,-1))]))}}),le=F(W,[["__scopeId","data-v-08012a38"]]);export{le as default};
