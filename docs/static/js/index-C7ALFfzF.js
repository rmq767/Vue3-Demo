import{S as A}from"./四川省1-CnqJjG9t.js";import{s as B,r as I,k as S,U as T,d as V,c as k,a as g,P as _,u as h,D as M,o as N}from"./@vue-AhIeOBdH.js";import{p as H,s as O}from"./@turf-Bfw5sV2K.js";import{_ as U}from"./plugin-vueexport-helper-DlAUqK2U.js";const W=[{position:[101.73,26.56],name:"攀枝花",value:100,desc:"攀枝花市，四川省辖地级市，别称渡口、钢城，地处中国西南川滇结合部，位于四川省最南端，东、北面与四川省凉山彝族自治州的会理、德昌、盐源3县接壤，西、南面与云南省的宁蒗、华坪、永仁3县交界，地处攀西裂谷中南段，属浸蚀、剥蚀中山丘陵、山原峡谷地貌，夏季长，四季不分明，而旱、雨季分明，全市总面积7440平方千米。截至2022年10月，全市辖3个区、2个县。2023年末，攀枝花市户籍总人口106.65万人，常住人口121.8万人。"},{position:[103.04,30.02],name:"雅安",value:59,desc:"雅安市，别称雨城，四川省地级市，位于四川盆地西缘、邛崃山东麓，东靠成都市、西连甘孜藏族自治州、南接凉山彝族自治州、北接阿坝藏族羌族自治州，属四川盆地西缘山地，跨四川盆地和青藏高原两大地形区，属亚热带季风性湿润气候，全市总面积15046平方千米。 [39]截至2025年3月，雅安市辖2个市辖区、6个县。 [79]截至2024年末，雅安市常住人口143.3万人。"},{position:[103.77,29.55],name:"乐山",value:80,desc:"乐山市，古称嘉州、嘉定州，四川省辖地级市，位于四川中部，四川盆地西南部，北与眉山市接壤，东与自贡市、宜宾市毗邻，南与凉山州相接，西与雅安市连界。 [91]地势西南高，东北低，属中亚热带气候带，总面积12720.03平方千米。截至2023年6月，全市辖4个区、6个县，代管1个县级市。 [44]截至2023年底，全市常住人口314.7万人。"},{position:[103.85,30.08],name:"眉山",value:70,desc:"眉山市（Meishan City），古称眉州，四川省辖地级市。地处成都平原南部，北接省会成都市，南连乐山市，东邻内江市、资阳市、自贡市，西接雅安市，总面积7140平方千米。 [4]截至2024年10月，眉山市辖2个区、4个县。 [44]截至2024年末，眉山市常住人口295.6万人。 [131]眉山话属于西南官话灌赤片中的岷江小片。"},{position:[104.07,30.57],name:"成都",value:200,desc:"成都市（Chengdu City），简称“蓉”，别称蓉城、锦城，四川省辖地级市、省会、副省级市、超大城市，地处中国西南地区、四川盆地西部、青藏高原东缘，地势由西北向东南倾斜，西部以深丘和山地为主，东部主要由平原、台地和部分低山丘陵组成，是成都平原的腹心地带，属亚热带季风气候区，热量充足，雨量丰富，四季分明，雨热同期，总面积14335平方千米，通用语言为西南官话。 [317-318]截至2025年3月，成都市下辖12个区、3个县、代管5个县级市。截至2024年末，成都市常住人口2147.4万人。"},{position:[104.68,31.47],name:"绵阳",value:120,desc:"绵阳市（Mianyang City），简称“绵”，别称绵州、涪城，四川省辖地级市，省域副中心城市， [172]Ⅱ型大城市， [171]三线城市。 [179]位于四川盆地西北部，涪江中上游地带。东邻广元市和南充市，南接遂宁市，西接德阳市，西北与阿坝藏族羌族自治州、甘肃省陇南市接壤。介于北纬30°42′—33°03′、东经103°45′—105°43′之间，总面积2.02万平方千米。 [1]截至2022年10月，绵阳市辖3个区、5个县、代管1个县级市。 [169]2023年末，绵阳常住人口491.10万人。 [217]绵阳方言属北方方言区。"},{position:[105.59,30.53],name:"遂宁",value:75,desc:"遂宁市，别称斗城、遂州，四川省辖地级市。位于四川盆地中部，涪江中游 [120]，与重庆市、成都市呈等距三角；是成渝经济区区域性中心城市，四川省现代产业基地，以“养心”文化为特色的现代生态花园城市。 [1]总面积5322.25平方公里 [95]，辖2个市辖区、2个县，代管1个县级市。 [74]地处丘陵低山地区，气候属亚热带湿润季风气候 [68]。2024年末，遂宁市常住人口274.8万人，户籍人口351.06万人。 "},{position:[107.47,31.21],name:"达州",value:80,desc:"达州市，四川省辖地级市，公元965年北宋时期改通州为达州而得名 [131]，处于四川省东北部，大巴山南麓，北高南低，由东北向西南倾斜，山、丘间分布宽缓谷地及缓丘平坝，地貌复杂多样，石灰岩广布，喀斯特地貌发育，属亚热带季风气候，气候温和，四季分明，总面积1.66万平方千米。 [19] [38]截至2024年1月，达州市辖2个区、4个县，代管1个县级市， [36]截至2023年末，达州市常住人口532.4万人。"}];let v=[];const F=l=>{const e=B(),t=I({x:0,y:0,show:!1,info:{}}),c=I(),E=async()=>{e.value=new Cesium.Viewer(l,{geocoder:!1,sceneModePicker:!1,baseLayerPicker:!1,navigationHelpButton:!1,homeButton:!1,animation:!1,fullscreenButton:!1,timeline:!1,scene3DOnly:!0,infoBox:!1,shadows:!1,requestRenderMode:!0,sceneMode:Cesium.SceneMode.SCENE3D,selectionIndicator:!1}),e.value.cesiumWidget.creditContainer.style.display="none",e.value.scene.screenSpaceCameraController.minimumZoomDistance=1e5,e.value.scene.screenSpaceCameraController.maximumZoomDistance=1e6,q(e.value),W.forEach(o=>{var r;v=[];const s=R(o);(r=e.value)==null||r.dataSources.add(s).then(n=>{v.push(n)})})},b=()=>{const o=new Cesium.ScreenSpaceEventHandler(e.value.canvas);let s=null;o.setInputAction(r=>{var C,p,d;const n=(C=e.value)==null?void 0:C.scene.pick(r.endPosition);if(n&&n.id){if(s&&s!==n.id){const i=s.entityCollection,f=s.properties,w=i.getById("label"+f.name);w.label.fillColor=new Cesium.ConstantProperty(Cesium.Color.WHITE)}s=n.id,e.value._container.style.cursor="pointer";const a=s.entityCollection,u=s.properties,m=a.getById("label"+u.name);m.label.fillColor=new Cesium.ConstantProperty(Cesium.Color.PINK),(p=e.value)==null||p.scene.requestRender()}else{if(e.value._container.style.cursor="default",!n&&s){const a=s.entityCollection,u=s.properties,m=a.getById("label"+u.name);m.label.fillColor=new Cesium.ConstantProperty(Cesium.Color.WHITE)}(d=e.value)==null||d.scene.requestRender()}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},L=()=>{var s;let o=null;(s=e.value)==null||s.screenSpaceEventHandler.setInputAction(r=>{var C,p,d;const n=(C=e.value)==null?void 0:C.scene.pick(r.position);if(n&&n.id){const u=n.id.entityCollection,m=u.owner;if(o===m)return;t.value.show=!1,(p=e.value)==null||p.flyTo(u,{duration:.5}).then(()=>{m==null||m.entities.values.forEach(i=>{var f;i.name==="box"&&(c.value=i,x(i),t.value.info=(f=i.properties)==null?void 0:f.getValue(),t.value.show=!0)})}),o=m,v==null||v.forEach(i=>{i==null||i.entities.values.forEach(f=>{if(f.name==="box")if(i===m){const y=f.box.material.color;y.setValue(Cesium.Color.fromAlpha(y.getValue(),.8))}else{const y=f.box.material.color;y.setValue(Cesium.Color.fromAlpha(y.getValue(),.1))}})})}else o&&(c.value=null,t.value.show=!1,v==null||v.forEach(a=>{a==null||a.entities.values.forEach(u=>{if(u.name==="box"){const i=u.box.material.color;i.setValue(Cesium.Color.fromAlpha(i.getValue(),.8))}})}),o=null);(d=e.value)==null||d.scene.requestRender(),setTimeout(()=>{var a;(a=e.value)==null||a.scene.requestRender()},100)},Cesium.ScreenSpaceEventType.LEFT_CLICK)},P=()=>{var o;(o=e.value)==null||o.scene.postRender.addEventListener(D)};S(()=>{E(),b(),L(),P()}),T(()=>{var o;(o=e.value)==null||o.scene.postRender.removeEventListener(D),e.value.destroy()});const R=o=>{const s=new Cesium.CustomDataSource("bar"),r=Cesium.Cartesian3.fromDegrees(o.position[0],o.position[1],0);let n=Cesium.Color.BLUE.withAlpha(.8);o.value>=200?n=Cesium.Color.RED.withAlpha(.8):o.value>=100?n=Cesium.Color.YELLOW.withAlpha(.8):o.value>=60?n=Cesium.Color.GREEN.withAlpha(.8):n=Cesium.Color.BLUE.withAlpha(.8);const C=new Cesium.Entity({id:"box"+o.name,name:"box",position:r,box:{dimensions:new Cesium.Cartesian3(1e4,1e4,o.value*1e3),material:n,heightReference:Cesium.HeightReference.RELATIVE_TO_GROUND},properties:o}),p=Cesium.Cartesian3.fromDegrees(o.position[0],o.position[1],o.value*1e3+5e3),d=new Cesium.Entity({id:"label"+o.name,name:"label",position:p,label:{text:o.name,font:"20px sans-serif",fillColor:Cesium.Color.WHITE,outlineWidth:2,outlineColor:Cesium.Color.BLACK,style:Cesium.LabelStyle.FILL_AND_OUTLINE},properties:o}),a=Cesium.Cartesian3.fromDegrees(o.position[0],o.position[1],o.value*1e3+5e3),u=new Cesium.Entity({id:"value"+o.name,name:"value",position:a,label:{text:String(o.value),font:"16px sans-serif",fillColor:Cesium.Color.SKYBLUE,outlineWidth:2,outlineColor:Cesium.Color.WHITE,style:Cesium.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new Cesium.Cartesian2(0,-20)},properties:o});return s.entities.add(C),s.entities.add(d),s.entities.add(u),s};function x(o){var p,d;const s=(p=o.position)==null?void 0:p.getValue();let r=K(s);r[0]=r[0]+.1;let n=$(r,((d=o.properties)==null?void 0:d.value.getValue())*1e3*.9);const C=G(n,e.value);t.value.x=C.x,t.value.y=C.y}function D(){c.value&&t.value.show&&x(c.value)}return{viewer:e,tooltips:t}};function q(l){l.scene.skyAtmosphere.show=!1;const e=A.features[0].geometry.coordinates[0],t=H(e),c=O(t,{tolerance:.05,highQuality:!0}),E=new Cesium.ClippingPolygon({positions:Cesium.Cartesian3.fromDegreesArray(c.geometry.coordinates[0].flat())});l.scene.globe.clippingPolygons=new Cesium.ClippingPolygonCollection({polygons:[E],inverse:!0});const b=-40*Math.PI/180;l.camera.setView({destination:Cesium.Cartesian3.fromDegrees(103.06,22.45,6e5),orientation:{heading:0,pitch:b,roll:0}})}const K=l=>{const e=Cesium.Cartographic.fromCartesian(l),t=Number(Cesium.Math.toDegrees(e.longitude).toFixed(6)),c=Number(Cesium.Math.toDegrees(e.latitude).toFixed(6));return[t,c]},$=(l,e)=>Cesium.Cartesian3.fromDegrees(l[0],l[1],e),G=(l,e)=>Cesium.SceneTransforms.worldToWindowCoordinates(e.scene,l),Y={class:"cesium"},Z={class:"name"},j={class:"value"},z={class:"desc"},Q={name:"Cesium"},J=V({...Q,setup(l){const{tooltips:e}=F("cesium-container");return(t,c)=>(N(),k("div",Y,[c[0]||(c[0]=g("div",{id:"cesium-container"},null,-1)),g("div",{class:"tooltips",style:M({top:`${h(e).y}px`,left:`${h(e).x}px`,display:`${h(e).show?"block":"none"}`})},[g("div",Z,"名称："+_(h(e).info.name),1),g("div",j,"值："+_(h(e).info.value),1),g("div",z,"描述："+_(h(e).info.desc),1)],4)]))}}),ne=U(J,[["__scopeId","data-v-17f75073"]]);export{ne as default};
