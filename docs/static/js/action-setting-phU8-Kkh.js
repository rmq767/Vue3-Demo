import{s as F,t as G,n as L,d as T,u as D,v as J,w as O,q as V}from"./element-plus-CU5GJTiG.js";import{c as Q,d as z}from"./index-CoD4fdWf.js";import H from"./choose-person-C5GUolBL.js";import{d as K,r as k,w as W,c as A,a as f,I as g,R as l,J as r,o as m,L as X,O as d,Q as S,a6 as P,u as C,P as x}from"./@vue-AhIeOBdH.js";import{_ as Y}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./lodash-es-CVJ_Bk8S.js";import"./@vueuse-CAc1CHwG.js";import"./@element-plus-BPC4xHUH.js";import"./@sxzz-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BkBTkyCe.js";import"./@turf-Bfw5sV2K.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-D0iZPv2f.js";import"./mobx-preact-Bh0rinU2.js";import"./preact-Dv5xcXl8.js";import"./mobx-DdXfW9UA.js";import"./@logicflow-C_Zfo9qY.js";import"./uuid-Dj2d8qur.js";import"./classnames-Bd-IOj2N.js";import"./mousetrap-DBMTPuUY.js";import"./mobx-utils-CAWeVucu.js";const Z={class:"node-setting"},$={class:"setting-item"},h={name:"ActionSetting"},ee=K({...h,props:{lf:{},data:{}},setup(N){const i=N,t=k({nodeName:"",reviewerSource:"2",auditMethod:"1",pass:!1,reviewer:[],reviewerString:"",moreAction:["back"],baseAction:["agree","reject","back"],backAction:"1"}),b=k();W(()=>i.data,o=>{var a,_;const{reviewerSource:e,reviewer:u,reviewerString:n,auditMethod:s,pass:v,baseAction:p,backAction:c,moreAction:w}=o.properties;t.value={nodeName:(a=o.text)==null?void 0:a.value,reviewerSource:e||"2",reviewer:u||[],reviewerString:n||"",auditMethod:s||"1",pass:v||!1,baseAction:p||["agree","reject","back"],backAction:c||"1",moreAction:w||["back"]},(_=i.lf)==null||_.setProperties(o.id,{...t.value})},{immediate:!0});const M=()=>{var o;(o=b.value)==null||o.open(t.value.reviewer)},E=(o,e)=>{var u,n;t.value.reviewer=o,t.value.reviewerString=e.map(s=>s.label).join("，"),o.length?(n=i.lf)==null||n.setProperties(i.data.id,{reviewer:t.value.reviewer,reviewerString:t.value.reviewerString}):(V.warning("审核者不能为空"),(u=i.lf)==null||u.setProperties(i.data.id,{reviewer:[],reviewerString:""}))},U=o=>{var u,n;const e=o.target.value;e?(n=i.lf)==null||n.updateText(i.data.id,e):(V.warning("节点名称不能为空"),t.value.nodeName=(u=i.data.text)==null?void 0:u.value)},q=o=>{var e,u;(e=i.lf)==null||e.setProperties(i.data.id,{reviewerSource:o}),o==="1"&&(t.value.reviewer=[],t.value.reviewerString="",(u=b.value)==null||u.clear())},y=o=>{var e;(e=i.lf)==null||e.setProperties(i.data.id,{auditMethod:o})},B=o=>{var e;(e=i.lf)==null||e.setProperties(i.data.id,{pass:o})},R=o=>{var e;(e=i.lf)==null||e.setProperties(i.data.id,{baseAction:o})},I=o=>{var e;(e=i.lf)==null||e.setProperties(i.data.id,{backAction:o})},j=o=>{var e;(e=i.lf)==null||e.setProperties(i.data.id,{moreAction:o})};return(o,e)=>{const u=L,n=G,s=D,v=T,p=J,c=O,w=F;return m(),A("div",Z,[e[17]||(e[17]=f("div",{class:"setting-title"},"节点属性",-1)),f("div",$,[l(w,{model:t.value,"label-width":"110px"},{default:r(()=>[e[14]||(e[14]=f("div",{class:"setting-item-title"},"基础属性",-1)),l(n,{label:"节点名称",required:""},{default:r(()=>[l(u,{modelValue:t.value.nodeName,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.nodeName=a),onBlur:U},null,8,["modelValue"])]),_:1}),e[15]||(e[15]=f("div",{class:"setting-item-title"},"审核者",-1)),l(n,{label:"审核者来源",required:""},{default:r(()=>[l(v,{modelValue:t.value.reviewerSource,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.reviewerSource=a),onChange:q},{default:r(()=>[l(s,{value:"1"},{default:r(()=>[...e[8]||(e[8]=[d("发起者选择",-1)])]),_:1}),l(s,{value:"2"},{default:r(()=>[...e[9]||(e[9]=[d("指定",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t.value.reviewerSource==="2"?(m(),g(n,{key:0,label:"审核者",required:""},{default:r(()=>[l(u,{modelValue:t.value.reviewerString,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.reviewerString=a),readonly:"",onClick:M},null,8,["modelValue"])]),_:1})):X("",!0),l(n,{label:"多人审核方式",required:""},{default:r(()=>[l(v,{modelValue:t.value.auditMethod,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.auditMethod=a),onChange:y},{default:r(()=>[l(s,{value:"1"},{default:r(()=>[...e[10]||(e[10]=[d("会签",-1)])]),_:1}),l(s,{value:"2"},{default:r(()=>[...e[11]||(e[11]=[d("或签",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"审核过流程"},{default:r(()=>[l(p,{modelValue:t.value.pass,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.pass=a),label:"直接通过",onChange:B},null,8,["modelValue"])]),_:1}),e[16]||(e[16]=f("div",{class:"setting-item-title"},"操作权限",-1)),l(n,{label:"基本操作",required:""},{default:r(()=>[l(c,{modelValue:t.value.baseAction,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.baseAction=a),min:1,onChange:R},{default:r(()=>[(m(!0),A(S,null,P(C(Q),a=>(m(),g(p,{key:a.value,value:a.value},{default:r(()=>[d(x(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"退回操作",required:""},{default:r(()=>[l(v,{modelValue:t.value.backAction,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.backAction=a),onChange:I},{default:r(()=>[l(s,{value:"1"},{default:r(()=>[...e[12]||(e[12]=[d("退回到发起人",-1)])]),_:1}),l(s,{value:"2"},{default:r(()=>[...e[13]||(e[13]=[d("退回到上一节点",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"更多操作"},{default:r(()=>[l(c,{modelValue:t.value.moreAction,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.moreAction=a),onChange:j},{default:r(()=>[(m(!0),A(S,null,P(C(z),a=>(m(),g(p,{key:a.value,value:a.value},{default:r(()=>[d(x(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),(m(),g(H,{ref_key:"choosePersonRef",ref:b,key:o.data.id,onSubmit:E}))])}}}),Ce=Y(ee,[["__scopeId","data-v-677d8e08"]]);export{Ce as default};
