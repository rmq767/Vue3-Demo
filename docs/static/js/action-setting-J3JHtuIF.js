import{l as h,s as j,o as T,t as G,u as D,d as L,v as Q,w as z}from"./element-plus-9-QK-U0O.js";import{c as H,d as J}from"./index-w32eI8DV.js";import K from"./choose-person-wKVOHEPq.js";import{d as O,r as k,w as W,c as V,a as f,V as l,Q as r,P as g,aw as X,ax as Y,o as c,U as u,S as Z,F as P,a8 as x,T as C,u as N}from"./@vue-1pEateLc.js";import{_ as $}from"./plugin-vueexport-helper-x3n3nnut.js";import"./lodash-es-88S84ShG.js";import"./@vueuse-sS3gTgD0.js";import"./@element-plus-GFHZwatb.js";import"./@sxzz--N-3kK7X.js";import"./@ctrl-ZggoHSuR.js";import"./dayjs-0oS7_Iqn.js";import"./@turf-VZU31W4K.js";import"./async-validator-BHjhHa7C.js";import"./memoize-one-JaOscZgY.js";import"./normalize-wheel-es-1urBKM79.js";import"./@floating-ui-_1sru3kO.js";import"./mobx-preact-PKhkWFJ1.js";import"./preact-n22zw_-M.js";import"./mobx-1kTRUggc.js";import"./@logicflow-AS830fMk.js";import"./uuid-hzB4Li_C.js";import"./classnames-3BoOvlBi.js";import"./mousetrap-HOn0kHTO.js";import"./mobx-utils-wtfDcc3Y.js";const b=m=>(X("data-v-677d8e08"),m=m(),Y(),m),ee={class:"node-setting"},te=b(()=>f("div",{class:"setting-title"},"节点属性",-1)),ae={class:"setting-item"},oe=b(()=>f("div",{class:"setting-item-title"},"基础属性",-1)),le=b(()=>f("div",{class:"setting-item-title"},"审核者",-1)),re=b(()=>f("div",{class:"setting-item-title"},"操作权限",-1)),ie={name:"ActionSetting"},ne=O({...ie,props:{lf:{},data:{}},setup(m){const i=m,t=k({nodeName:"",reviewerSource:"2",auditMethod:"1",pass:!1,reviewer:[],reviewerString:"",moreAction:["back"],baseAction:["agree","reject","back"],backAction:"1"}),w=k();W(()=>i.data,a=>{var o,S;const{reviewerSource:e,reviewer:s,reviewerString:n,auditMethod:d,pass:v,baseAction:p,backAction:_,moreAction:A}=a.properties;t.value={nodeName:(o=a.text)==null?void 0:o.value,reviewerSource:e||"2",reviewer:s||[],reviewerString:n||"",auditMethod:d||"1",pass:v||!1,baseAction:p||["agree","reject","back"],backAction:_||"1",moreAction:A||["back"]},(S=i.lf)==null||S.setProperties(a.id,{...t.value})},{immediate:!0});const M=()=>{var a;(a=w.value)==null||a.open(t.value.reviewer)},E=(a,e)=>{var s,n;t.value.reviewer=a,t.value.reviewerString=e.map(d=>d.label).join("，"),a.length?(n=i.lf)==null||n.setProperties(i.data.id,{reviewer:t.value.reviewer,reviewerString:t.value.reviewerString}):(h.warning("审核者不能为空"),(s=i.lf)==null||s.setProperties(i.data.id,{reviewer:[],reviewerString:""}))},U=a=>{var s,n;const e=a.target.value;e?(n=i.lf)==null||n.updateText(i.data.id,e):(h.warning("节点名称不能为空"),t.value.nodeName=(s=i.data.text)==null?void 0:s.value)},y=a=>{var e,s;(e=i.lf)==null||e.setProperties(i.data.id,{reviewerSource:a}),a==="1"&&(t.value.reviewer=[],t.value.reviewerString="",(s=w.value)==null||s.clear())},B=a=>{var e;(e=i.lf)==null||e.setProperties(i.data.id,{auditMethod:a})},q=a=>{var e;(e=i.lf)==null||e.setProperties(i.data.id,{pass:a})},I=a=>{var e;(e=i.lf)==null||e.setProperties(i.data.id,{baseAction:a})},R=a=>{var e;(e=i.lf)==null||e.setProperties(i.data.id,{backAction:a})},F=a=>{var e;(e=i.lf)==null||e.setProperties(i.data.id,{moreAction:a})};return(a,e)=>{const s=T,n=G,d=D,v=L,p=Q,_=z,A=j;return c(),V("div",ee,[te,f("div",ae,[l(A,{model:t.value,"label-width":"110px"},{default:r(()=>[oe,l(n,{label:"节点名称",required:""},{default:r(()=>[l(s,{modelValue:t.value.nodeName,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.nodeName=o),onBlur:U},null,8,["modelValue"])]),_:1}),le,l(n,{label:"审核者来源",required:""},{default:r(()=>[l(v,{modelValue:t.value.reviewerSource,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.reviewerSource=o),onChange:y},{default:r(()=>[l(d,{value:"1"},{default:r(()=>[u("发起者选择")]),_:1}),l(d,{value:"2"},{default:r(()=>[u("指定")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t.value.reviewerSource==="2"?(c(),g(n,{key:0,label:"审核者",required:""},{default:r(()=>[l(s,{modelValue:t.value.reviewerString,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.reviewerString=o),readonly:"",onClick:M},null,8,["modelValue"])]),_:1})):Z("",!0),l(n,{label:"多人审核方式",required:""},{default:r(()=>[l(v,{modelValue:t.value.auditMethod,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.auditMethod=o),onChange:B},{default:r(()=>[l(d,{value:"1"},{default:r(()=>[u("会签")]),_:1}),l(d,{value:"2"},{default:r(()=>[u("或签")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"审核过流程"},{default:r(()=>[l(p,{modelValue:t.value.pass,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.pass=o),label:"直接通过",onChange:q},null,8,["modelValue"])]),_:1}),re,l(n,{label:"基本操作",required:""},{default:r(()=>[l(_,{modelValue:t.value.baseAction,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.baseAction=o),min:1,onChange:I},{default:r(()=>[(c(!0),V(P,null,x(N(H),o=>(c(),g(p,{key:o.value,value:o.value},{default:r(()=>[u(C(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"退回操作",required:""},{default:r(()=>[l(v,{modelValue:t.value.backAction,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.backAction=o),onChange:R},{default:r(()=>[l(d,{value:"1"},{default:r(()=>[u("退回到发起人")]),_:1}),l(d,{value:"2"},{default:r(()=>[u("退回到上一节点")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"更多操作"},{default:r(()=>[l(_,{modelValue:t.value.moreAction,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.moreAction=o),onChange:F},{default:r(()=>[(c(!0),V(P,null,x(N(J),o=>(c(),g(p,{key:o.value,value:o.value},{default:r(()=>[u(C(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),(c(),g(K,{ref_key:"choosePersonRef",ref:w,key:a.data.id,onSubmit:E}))])}}}),ye=$(ne,[["__scopeId","data-v-677d8e08"]]);export{ye as default};
