import{i as Bt,H as nn,L as de,j as cn,k as Gt,l as Kt,N as zt,m as sn,n as vn,T as Zt,o as An,p as zn,q as Xt,r as Xe,s as Zn,C as ve,h as jt,t as Vt,D as Wt,M as Fe,u as Ve,v as _e,V as Xn,w as rn,x as Ue,I as Yt,y as qt,z as jn,E as Vn,G as Qt,c as ln,J as Jt,K as Wn,Q as Tn,U as $t,X as un,Y as Yn,e as qn,Z as Qn,_ as es,b as ns,$ as ts,a as ss,a0 as Jn,a1 as rs,a2 as os,a3 as is,a4 as hn,P as $n,a5 as as,a6 as cs,a7 as ls,a8 as us,a9 as hs,aa as et,ab as Cn,ac as nt,ad as fs,ae as ps,af as ds,ag as ms,ah as gs,ai as As,aj as Ts,ak as Es,al as ws,am as On,an as Fn,ao as Un,ap as Dn,aq as Ss,ar as _s,as as Rs,S as xs,W as ys,at as Is,au as Ns,A as Ms,O as Ls}from"./OrbitControls-lwG778yo.js";import{g as bs}from"./lil-gui.module.min-eVeCAemg.js";import{d as vs,r as Cs,o as Os,a as Fs,c as Us,g as Ds}from"./index-EKKFwadC.js";import{_ as ks}from"./_plugin-vue_export-helper-x3n3nnut.js";/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var kn=function(f){return URL.createObjectURL(new Blob([f],{type:"text/javascript"}))};try{URL.revokeObjectURL(kn(""))}catch{kn=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var fe=Uint8Array,Ie=Uint16Array,En=Uint32Array,tt=new fe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),st=new fe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ps=new fe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rt=function(f,e){for(var t=new Ie(31),o=0;o<31;++o)t[o]=e+=1<<f[o-1];for(var s=new En(t[30]),o=1;o<30;++o)for(var a=t[o];a<t[o+1];++a)s[a]=a-t[o]<<5|o;return[t,s]},ot=rt(tt,2),it=ot[0],Hs=ot[1];it[28]=258,Hs[258]=28;var Bs=rt(st,0),Gs=Bs[0],wn=new Ie(32768);for(var j=0;j<32768;++j){var Re=(j&43690)>>>1|(j&21845)<<1;Re=(Re&52428)>>>2|(Re&13107)<<2,Re=(Re&61680)>>>4|(Re&3855)<<4,wn[j]=((Re&65280)>>>8|(Re&255)<<8)>>>1}var je=function(f,e,t){for(var o=f.length,s=0,a=new Ie(e);s<o;++s)++a[f[s]-1];var i=new Ie(e);for(s=0;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var h;if(t){h=new Ie(1<<e);var c=15-e;for(s=0;s<o;++s)if(f[s])for(var u=s<<4|f[s],m=e-f[s],d=i[f[s]-1]++<<m,T=d|(1<<m)-1;d<=T;++d)h[wn[d]>>>c]=u}else for(h=new Ie(o),s=0;s<o;++s)f[s]&&(h[s]=wn[i[f[s]-1]++]>>>15-f[s]);return h},We=new fe(288);for(var j=0;j<144;++j)We[j]=8;for(var j=144;j<256;++j)We[j]=9;for(var j=256;j<280;++j)We[j]=7;for(var j=280;j<288;++j)We[j]=8;var at=new fe(32);for(var j=0;j<32;++j)at[j]=5;var Ks=je(We,9,1),zs=je(at,5,1),fn=function(f){for(var e=f[0],t=1;t<f.length;++t)f[t]>e&&(e=f[t]);return e},pe=function(f,e,t){var o=e/8|0;return(f[o]|f[o+1]<<8)>>(e&7)&t},pn=function(f,e){var t=e/8|0;return(f[t]|f[t+1]<<8|f[t+2]<<16)>>(e&7)},Zs=function(f){return(f/8|0)+(f&7&&1)},Xs=function(f,e,t){(e==null||e<0)&&(e=0),(t==null||t>f.length)&&(t=f.length);var o=new(f instanceof Ie?Ie:f instanceof En?En:fe)(t-e);return o.set(f.subarray(e,t)),o},js=function(f,e,t){var o=f.length;if(!o||t&&!t.l&&o<5)return e||new fe(0);var s=!e||t,a=!t||t.i;t||(t={}),e||(e=new fe(o*3));var i=function(z){var Ee=e.length;if(z>Ee){var we=new fe(Math.max(Ee*2,z));we.set(e),e=we}},h=t.f||0,c=t.p||0,u=t.b||0,m=t.l,d=t.d,T=t.m,x=t.n,v=o*8;do{if(!m){t.f=h=pe(f,c,1);var O=pe(f,c+1,3);if(c+=3,O)if(O==1)m=Ks,d=zs,T=9,x=5;else if(O==2){var W=pe(f,c,31)+257,H=pe(f,c+10,15)+4,se=W+pe(f,c+5,31)+1;c+=14;for(var ne=new fe(se),$=new fe(19),q=0;q<H;++q)$[Ps[q]]=pe(f,c+q*3,7);c+=H*3;for(var ie=fn($),Ne=(1<<ie)-1,on=je($,ie,1),q=0;q<se;){var ce=on[pe(f,c,Ne)];c+=ce&15;var b=ce>>>4;if(b<16)ne[q++]=b;else{var Te=0,me=0;for(b==16?(me=3+pe(f,c,3),c+=2,Te=ne[q-1]):b==17?(me=3+pe(f,c,7),c+=3):b==18&&(me=11+pe(f,c,127),c+=7);me--;)ne[q++]=Te}}var Ye=ne.subarray(0,W),ge=ne.subarray(W);T=fn(Ye),x=fn(ge),m=je(Ye,T,1),d=je(ge,x,1)}else throw"invalid block type";else{var b=Zs(c)+4,U=f[b-4]|f[b-3]<<8,G=b+U;if(G>o){if(a)throw"unexpected EOF";break}s&&i(u+U),e.set(f.subarray(b,G),u),t.b=u+=U,t.p=c=G*8;continue}if(c>v){if(a)throw"unexpected EOF";break}}s&&i(u+131072);for(var qe=(1<<T)-1,Qe=(1<<x)-1,ke=c;;ke=c){var Te=m[pn(f,c)&qe],te=Te>>>4;if(c+=Te&15,c>v){if(a)throw"unexpected EOF";break}if(!Te)throw"invalid length/literal";if(te<256)e[u++]=te;else if(te==256){ke=c,m=null;break}else{var Ce=te-254;if(te>264){var q=te-257,re=tt[q];Ce=pe(f,c,(1<<re)-1)+it[q],c+=re}var Me=d[pn(f,c)&Qe],Le=Me>>>4;if(!Me)throw"invalid distance";c+=Me&15;var ge=Gs[Le];if(Le>3){var re=st[Le];ge+=pn(f,c)&(1<<re)-1,c+=re}if(c>v){if(a)throw"unexpected EOF";break}s&&i(u+131072);for(var Pe=u+Ce;u<Pe;u+=4)e[u]=e[u-ge],e[u+1]=e[u+1-ge],e[u+2]=e[u+2-ge],e[u+3]=e[u+3-ge];u=Pe}}t.l=m,t.p=ke,t.b=u,m&&(h=1,t.m=T,t.d=d,t.n=x)}while(!h);return u==e.length?e:Xs(e,0,u)},Vs=new fe(0),Ws=function(f){if((f[0]&15)!=8||f[0]>>>4>7||(f[0]<<8|f[1])%31)throw"invalid zlib data";if(f[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function tn(f,e){return js((Ws(f),f.subarray(2,-4)),e)}var Ys=typeof TextDecoder<"u"&&new TextDecoder,qs=0;try{Ys.decode(Vs,{stream:!0}),qs=1}catch{}class Qs extends Bt{constructor(e){super(e),this.type=nn}parse(e){const ie=Math.pow(2.7182818,2.2);function Ne(n,r){let l=0;for(let A=0;A<65536;++A)(A==0||n[A>>3]&1<<(A&7))&&(r[l++]=A);const p=l-1;for(;l<65536;)r[l++]=0;return p}function on(n){for(let r=0;r<16384;r++)n[r]={},n[r].len=0,n[r].lit=0,n[r].p=null}const ce={l:0,c:0,lc:0};function Te(n,r,l,p,A){for(;l<n;)r=r<<8|Ln(p,A),l+=8;l-=n,ce.l=r>>l&(1<<n)-1,ce.c=r,ce.lc=l}const me=new Array(59);function Ye(n){for(let l=0;l<=58;++l)me[l]=0;for(let l=0;l<65537;++l)me[n[l]]+=1;let r=0;for(let l=58;l>0;--l){const p=r+me[l]>>1;me[l]=r,r=p}for(let l=0;l<65537;++l){const p=n[l];p>0&&(n[l]=p|me[p]++<<6)}}function ge(n,r,l,p,A,g){const w=r;let _=0,R=0;for(;p<=A;p++){if(w.value-r.value>l)return!1;Te(6,_,R,n,w);const E=ce.l;if(_=ce.c,R=ce.lc,g[p]=E,E==63){if(w.value-r.value>l)throw new Error("Something wrong with hufUnpackEncTable");Te(8,_,R,n,w);let S=ce.l+6;if(_=ce.c,R=ce.lc,p+S>A+1)throw new Error("Something wrong with hufUnpackEncTable");for(;S--;)g[p++]=0;p--}else if(E>=59){let S=E-59+2;if(p+S>A+1)throw new Error("Something wrong with hufUnpackEncTable");for(;S--;)g[p++]=0;p--}}Ye(g)}function qe(n){return n&63}function Qe(n){return n>>6}function ke(n,r,l,p){for(;r<=l;r++){const A=Qe(n[r]),g=qe(n[r]);if(A>>g)throw new Error("Invalid table entry");if(g>14){const w=p[A>>g-14];if(w.len)throw new Error("Invalid table entry");if(w.lit++,w.p){const _=w.p;w.p=new Array(w.lit);for(let R=0;R<w.lit-1;++R)w.p[R]=_[R]}else w.p=new Array(1);w.p[w.lit-1]=r}else if(g){let w=0;for(let _=1<<14-g;_>0;_--){const R=p[(A<<14-g)+w];if(R.len||R.p)throw new Error("Invalid table entry");R.len=g,R.lit=r,w++}}}return!0}const te={c:0,lc:0};function Ce(n,r,l,p){n=n<<8|Ln(l,p),r+=8,te.c=n,te.lc=r}const re={c:0,lc:0};function Me(n,r,l,p,A,g,w,_,R){if(n==r){p<8&&(Ce(l,p,A,g),l=te.c,p=te.lc),p-=8;let E=l>>p;if(E=new Uint8Array([E])[0],_.value+E>R)return!1;const S=w[_.value-1];for(;E-- >0;)w[_.value++]=S}else if(_.value<R)w[_.value++]=n;else return!1;re.c=l,re.lc=p}function Le(n){return n&65535}function Pe(n){const r=Le(n);return r>32767?r-65536:r}const z={a:0,b:0};function Ee(n,r){const l=Pe(n),A=Pe(r),g=l+(A&1)+(A>>1),w=g,_=g-A;z.a=w,z.b=_}function we(n,r){const l=Le(n),p=Le(r),A=l-(p>>1)&65535,g=p+A-32768&65535;z.a=g,z.b=A}function ut(n,r,l,p,A,g,w){const _=w<16384,R=l>A?A:l;let E=1,S,N;for(;E<=R;)E<<=1;for(E>>=1,S=E,E>>=1;E>=1;){N=0;const I=N+g*(A-S),C=g*E,F=g*S,M=p*E,L=p*S;let D,V,Y,ae;for(;N<=I;N+=F){let X=N;const B=N+p*(l-S);for(;X<=B;X+=L){const Q=X+M,ue=X+C,J=ue+M;_?(Ee(n[X+r],n[ue+r]),D=z.a,Y=z.b,Ee(n[Q+r],n[J+r]),V=z.a,ae=z.b,Ee(D,V),n[X+r]=z.a,n[Q+r]=z.b,Ee(Y,ae),n[ue+r]=z.a,n[J+r]=z.b):(we(n[X+r],n[ue+r]),D=z.a,Y=z.b,we(n[Q+r],n[J+r]),V=z.a,ae=z.b,we(D,V),n[X+r]=z.a,n[Q+r]=z.b,we(Y,ae),n[ue+r]=z.a,n[J+r]=z.b)}if(l&E){const Q=X+C;_?Ee(n[X+r],n[Q+r]):we(n[X+r],n[Q+r]),D=z.a,n[Q+r]=z.b,n[X+r]=D}}if(A&E){let X=N;const B=N+p*(l-S);for(;X<=B;X+=L){const Q=X+M;_?Ee(n[X+r],n[Q+r]):we(n[X+r],n[Q+r]),D=z.a,n[Q+r]=z.b,n[X+r]=D}}S=E,E>>=1}return N}function ht(n,r,l,p,A,g,w,_,R){let E=0,S=0;const N=w,I=Math.trunc(p.value+(A+7)/8);for(;p.value<I;)for(Ce(E,S,l,p),E=te.c,S=te.lc;S>=14;){const F=E>>S-14&16383,M=r[F];if(M.len)S-=M.len,Me(M.lit,g,E,S,l,p,_,R,N),E=re.c,S=re.lc;else{if(!M.p)throw new Error("hufDecode issues");let L;for(L=0;L<M.lit;L++){const D=qe(n[M.p[L]]);for(;S<D&&p.value<I;)Ce(E,S,l,p),E=te.c,S=te.lc;if(S>=D&&Qe(n[M.p[L]])==(E>>S-D&(1<<D)-1)){S-=D,Me(M.p[L],g,E,S,l,p,_,R,N),E=re.c,S=re.lc;break}}if(L==M.lit)throw new Error("hufDecode issues")}}const C=8-A&7;for(E>>=C,S-=C;S>0;){const F=r[E<<14-S&16383];if(F.len)S-=F.len,Me(F.lit,g,E,S,l,p,_,R,N),E=re.c,S=re.lc;else throw new Error("hufDecode issues")}return!0}function Rn(n,r,l,p,A,g){const w={value:0},_=l.value,R=oe(r,l),E=oe(r,l);l.value+=4;const S=oe(r,l);if(l.value+=4,R<0||R>=65537||E<0||E>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const N=new Array(65537),I=new Array(16384);on(I);const C=p-(l.value-_);if(ge(n,l,C,R,E,N),S>8*(p-(l.value-_)))throw new Error("Something wrong with hufUncompress");ke(N,R,E,I),ht(N,I,n,l,S,E,g,A,w)}function ft(n,r,l){for(let p=0;p<l;++p)r[p]=n[r[p]]}function xn(n){for(let r=1;r<n.length;r++){const l=n[r-1]+n[r]-128;n[r]=l}}function yn(n,r){let l=0,p=Math.floor((n.length+1)/2),A=0;const g=n.length-1;for(;!(A>g||(r[A++]=n[l++],A>g));)r[A++]=n[p++]}function In(n){let r=n.byteLength;const l=new Array;let p=0;const A=new DataView(n);for(;r>0;){const g=A.getInt8(p++);if(g<0){const w=-g;r-=w+1;for(let _=0;_<w;_++)l.push(A.getUint8(p++))}else{const w=g;r-=2;const _=A.getUint8(p++);for(let R=0;R<w+1;R++)l.push(_)}}return l}function pt(n,r,l,p,A,g){let w=new DataView(g.buffer);const _=l[n.idx[0]].width,R=l[n.idx[0]].height,E=3,S=Math.floor(_/8),N=Math.ceil(_/8),I=Math.ceil(R/8),C=_-(N-1)*8,F=R-(I-1)*8,M={value:0},L=new Array(E),D=new Array(E),V=new Array(E),Y=new Array(E),ae=new Array(E);for(let B=0;B<E;++B)ae[B]=r[n.idx[B]],L[B]=B<1?0:L[B-1]+N*I,D[B]=new Float32Array(64),V[B]=new Uint16Array(64),Y[B]=new Uint16Array(N*64);for(let B=0;B<I;++B){let Q=8;B==I-1&&(Q=F);let ue=8;for(let K=0;K<N;++K){K==N-1&&(ue=C);for(let Z=0;Z<E;++Z)V[Z].fill(0),V[Z][0]=A[L[Z]++],dt(M,p,V[Z]),mt(V[Z],D[Z]),gt(D[Z]);At(D);for(let Z=0;Z<E;++Z)Tt(D[Z],Y[Z],K*64)}let J=0;for(let K=0;K<E;++K){const Z=l[n.idx[K]].type;for(let Se=8*B;Se<8*B+Q;++Se){J=ae[K][Se];for(let ze=0;ze<S;++ze){const Ae=ze*64+(Se&7)*8;w.setUint16(J+0*2*Z,Y[K][Ae+0],!0),w.setUint16(J+1*2*Z,Y[K][Ae+1],!0),w.setUint16(J+2*2*Z,Y[K][Ae+2],!0),w.setUint16(J+3*2*Z,Y[K][Ae+3],!0),w.setUint16(J+4*2*Z,Y[K][Ae+4],!0),w.setUint16(J+5*2*Z,Y[K][Ae+5],!0),w.setUint16(J+6*2*Z,Y[K][Ae+6],!0),w.setUint16(J+7*2*Z,Y[K][Ae+7],!0),J+=8*2*Z}}if(S!=N)for(let Se=8*B;Se<8*B+Q;++Se){const ze=ae[K][Se]+8*S*2*Z,Ae=S*64+(Se&7)*8;for(let en=0;en<ue;++en)w.setUint16(ze+en*2*Z,Y[K][Ae+en],!0)}}}const X=new Uint16Array(_);w=new DataView(g.buffer);for(let B=0;B<E;++B){l[n.idx[B]].decoded=!0;const Q=l[n.idx[B]].type;if(l[B].type==2)for(let ue=0;ue<R;++ue){const J=ae[B][ue];for(let K=0;K<_;++K)X[K]=w.getUint16(J+K*2*Q,!0);for(let K=0;K<_;++K)w.setFloat32(J+K*2*Q,y(X[K]),!0)}}}function dt(n,r,l){let p,A=1;for(;A<64;)p=r[n.value],p==65280?A=64:p>>8==255?A+=p&255:(l[A]=p,A++),n.value++}function mt(n,r){r[0]=y(n[0]),r[1]=y(n[1]),r[2]=y(n[5]),r[3]=y(n[6]),r[4]=y(n[14]),r[5]=y(n[15]),r[6]=y(n[27]),r[7]=y(n[28]),r[8]=y(n[2]),r[9]=y(n[4]),r[10]=y(n[7]),r[11]=y(n[13]),r[12]=y(n[16]),r[13]=y(n[26]),r[14]=y(n[29]),r[15]=y(n[42]),r[16]=y(n[3]),r[17]=y(n[8]),r[18]=y(n[12]),r[19]=y(n[17]),r[20]=y(n[25]),r[21]=y(n[30]),r[22]=y(n[41]),r[23]=y(n[43]),r[24]=y(n[9]),r[25]=y(n[11]),r[26]=y(n[18]),r[27]=y(n[24]),r[28]=y(n[31]),r[29]=y(n[40]),r[30]=y(n[44]),r[31]=y(n[53]),r[32]=y(n[10]),r[33]=y(n[19]),r[34]=y(n[23]),r[35]=y(n[32]),r[36]=y(n[39]),r[37]=y(n[45]),r[38]=y(n[52]),r[39]=y(n[54]),r[40]=y(n[20]),r[41]=y(n[22]),r[42]=y(n[33]),r[43]=y(n[38]),r[44]=y(n[46]),r[45]=y(n[51]),r[46]=y(n[55]),r[47]=y(n[60]),r[48]=y(n[21]),r[49]=y(n[34]),r[50]=y(n[37]),r[51]=y(n[47]),r[52]=y(n[50]),r[53]=y(n[56]),r[54]=y(n[59]),r[55]=y(n[61]),r[56]=y(n[35]),r[57]=y(n[36]),r[58]=y(n[48]),r[59]=y(n[49]),r[60]=y(n[57]),r[61]=y(n[58]),r[62]=y(n[62]),r[63]=y(n[63])}function gt(n){const r=.5*Math.cos(.7853975),l=.5*Math.cos(3.14159/16),p=.5*Math.cos(3.14159/8),A=.5*Math.cos(3*3.14159/16),g=.5*Math.cos(5*3.14159/16),w=.5*Math.cos(3*3.14159/8),_=.5*Math.cos(7*3.14159/16),R=new Array(4),E=new Array(4),S=new Array(4),N=new Array(4);for(let I=0;I<8;++I){const C=I*8;R[0]=p*n[C+2],R[1]=w*n[C+2],R[2]=p*n[C+6],R[3]=w*n[C+6],E[0]=l*n[C+1]+A*n[C+3]+g*n[C+5]+_*n[C+7],E[1]=A*n[C+1]-_*n[C+3]-l*n[C+5]-g*n[C+7],E[2]=g*n[C+1]-l*n[C+3]+_*n[C+5]+A*n[C+7],E[3]=_*n[C+1]-g*n[C+3]+A*n[C+5]-l*n[C+7],S[0]=r*(n[C+0]+n[C+4]),S[3]=r*(n[C+0]-n[C+4]),S[1]=R[0]+R[3],S[2]=R[1]-R[2],N[0]=S[0]+S[1],N[1]=S[3]+S[2],N[2]=S[3]-S[2],N[3]=S[0]-S[1],n[C+0]=N[0]+E[0],n[C+1]=N[1]+E[1],n[C+2]=N[2]+E[2],n[C+3]=N[3]+E[3],n[C+4]=N[3]-E[3],n[C+5]=N[2]-E[2],n[C+6]=N[1]-E[1],n[C+7]=N[0]-E[0]}for(let I=0;I<8;++I)R[0]=p*n[16+I],R[1]=w*n[16+I],R[2]=p*n[48+I],R[3]=w*n[48+I],E[0]=l*n[8+I]+A*n[24+I]+g*n[40+I]+_*n[56+I],E[1]=A*n[8+I]-_*n[24+I]-l*n[40+I]-g*n[56+I],E[2]=g*n[8+I]-l*n[24+I]+_*n[40+I]+A*n[56+I],E[3]=_*n[8+I]-g*n[24+I]+A*n[40+I]-l*n[56+I],S[0]=r*(n[I]+n[32+I]),S[3]=r*(n[I]-n[32+I]),S[1]=R[0]+R[3],S[2]=R[1]-R[2],N[0]=S[0]+S[1],N[1]=S[3]+S[2],N[2]=S[3]-S[2],N[3]=S[0]-S[1],n[0+I]=N[0]+E[0],n[8+I]=N[1]+E[1],n[16+I]=N[2]+E[2],n[24+I]=N[3]+E[3],n[32+I]=N[3]-E[3],n[40+I]=N[2]-E[2],n[48+I]=N[1]-E[1],n[56+I]=N[0]-E[0]}function At(n){for(let r=0;r<64;++r){const l=n[0][r],p=n[1][r],A=n[2][r];n[0][r]=l+1.5747*A,n[1][r]=l-.1873*p-.4682*A,n[2][r]=l+1.8556*p}}function Tt(n,r,l){for(let p=0;p<64;++p)r[l+p]=vn.toHalfFloat(Et(n[p]))}function Et(n){return n<=1?Math.sign(n)*Math.pow(Math.abs(n),2.2):Math.sign(n)*Math.pow(ie,Math.abs(n)-1)}function Nn(n){return new DataView(n.array.buffer,n.offset.value,n.size)}function wt(n){const r=n.viewer.buffer.slice(n.offset.value,n.offset.value+n.size),l=new Uint8Array(In(r)),p=new Uint8Array(l.length);return xn(l),yn(l,p),new DataView(p.buffer)}function an(n){const r=n.array.slice(n.offset.value,n.offset.value+n.size),l=tn(r),p=new Uint8Array(l.length);return xn(l),yn(l,p),new DataView(p.buffer)}function St(n){const r=n.viewer,l={value:n.offset.value},p=new Uint16Array(n.width*n.scanlineBlockSize*(n.channels*n.type)),A=new Uint8Array(8192);let g=0;const w=new Array(n.channels);for(let F=0;F<n.channels;F++)w[F]={},w[F].start=g,w[F].end=w[F].start,w[F].nx=n.width,w[F].ny=n.lines,w[F].size=n.type,g+=w[F].nx*w[F].ny*w[F].size;const _=Be(r,l),R=Be(r,l);if(R>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(_<=R)for(let F=0;F<R-_+1;F++)A[F+_]=Oe(r,l);const E=new Uint16Array(65536),S=Ne(A,E),N=oe(r,l);Rn(n.array,r,l,N,p,g);for(let F=0;F<n.channels;++F){const M=w[F];for(let L=0;L<w[F].size;++L)ut(p,M.start+L,M.nx,M.size,M.ny,M.nx*M.size,S)}ft(E,p,g);let I=0;const C=new Uint8Array(p.buffer.byteLength);for(let F=0;F<n.lines;F++)for(let M=0;M<n.channels;M++){const L=w[M],D=L.nx*L.size,V=new Uint8Array(p.buffer,L.end*2,D*2);C.set(V,I),I+=D*2,L.end+=D}return new DataView(C.buffer)}function _t(n){const r=n.array.slice(n.offset.value,n.offset.value+n.size),l=tn(r),p=n.lines*n.channels*n.width,A=n.type==1?new Uint16Array(p):new Uint32Array(p);let g=0,w=0;const _=new Array(4);for(let R=0;R<n.lines;R++)for(let E=0;E<n.channels;E++){let S=0;switch(n.type){case 1:_[0]=g,_[1]=_[0]+n.width,g=_[1]+n.width;for(let N=0;N<n.width;++N){const I=l[_[0]++]<<8|l[_[1]++];S+=I,A[w]=S,w++}break;case 2:_[0]=g,_[1]=_[0]+n.width,_[2]=_[1]+n.width,g=_[2]+n.width;for(let N=0;N<n.width;++N){const I=l[_[0]++]<<24|l[_[1]++]<<16|l[_[2]++]<<8;S+=I,A[w]=S,w++}break}}return new DataView(A.buffer)}function Mn(n){const r=n.viewer,l={value:n.offset.value},p=new Uint8Array(n.width*n.lines*(n.channels*n.type*2)),A={version:le(r,l),unknownUncompressedSize:le(r,l),unknownCompressedSize:le(r,l),acCompressedSize:le(r,l),dcCompressedSize:le(r,l),rleCompressedSize:le(r,l),rleUncompressedSize:le(r,l),rleRawSize:le(r,l),totalAcUncompressedCount:le(r,l),totalDcUncompressedCount:le(r,l),acCompression:le(r,l)};if(A.version<2)throw new Error("EXRLoader.parse: "+Ke.compression+" version "+A.version+" is unsupported");const g=new Array;let w=Be(r,l)-2;for(;w>0;){const M=Je(r.buffer,l),L=Oe(r,l),D=L>>2&3,V=(L>>4)-1,Y=new Int8Array([V])[0],ae=Oe(r,l);g.push({name:M,index:Y,type:ae,compression:D}),w-=M.length+3}const _=Ke.channels,R=new Array(n.channels);for(let M=0;M<n.channels;++M){const L=R[M]={},D=_[M];L.name=D.name,L.compression=0,L.decoded=!1,L.type=D.pixelType,L.pLinear=D.pLinear,L.width=n.width,L.height=n.lines}const E={idx:new Array(3)};for(let M=0;M<n.channels;++M){const L=R[M];for(let D=0;D<g.length;++D){const V=g[D];L.name==V.name&&(L.compression=V.compression,V.index>=0&&(E.idx[V.index]=M),L.offset=M)}}let S,N,I;if(A.acCompressedSize>0)switch(A.acCompression){case 0:S=new Uint16Array(A.totalAcUncompressedCount),Rn(n.array,r,l,A.acCompressedSize,S,A.totalAcUncompressedCount);break;case 1:const M=n.array.slice(l.value,l.value+A.totalAcUncompressedCount),L=tn(M);S=new Uint16Array(L.buffer),l.value+=A.totalAcUncompressedCount;break}if(A.dcCompressedSize>0){const M={array:n.array,offset:l,size:A.dcCompressedSize};N=new Uint16Array(an(M).buffer),l.value+=A.dcCompressedSize}if(A.rleRawSize>0){const M=n.array.slice(l.value,l.value+A.rleCompressedSize),L=tn(M);I=In(L.buffer),l.value+=A.rleCompressedSize}let C=0;const F=new Array(R.length);for(let M=0;M<F.length;++M)F[M]=new Array;for(let M=0;M<n.lines;++M)for(let L=0;L<R.length;++L)F[L].push(C),C+=R[L].width*n.type*2;pt(E,F,R,S,N,p);for(let M=0;M<R.length;++M){const L=R[M];if(!L.decoded)switch(L.compression){case 2:let D=0,V=0;for(let Y=0;Y<n.lines;++Y){let ae=F[M][D];for(let X=0;X<L.width;++X){for(let B=0;B<2*L.type;++B)p[ae++]=I[V+B*L.width*L.height];V++}D++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(p.buffer)}function Je(n,r){const l=new Uint8Array(n);let p=0;for(;l[r.value+p]!=0;)p+=1;const A=new TextDecoder().decode(l.slice(r.value,r.value+p));return r.value=r.value+p+1,A}function Rt(n,r,l){const p=new TextDecoder().decode(new Uint8Array(n).slice(r.value,r.value+l));return r.value=r.value+l,p}function xt(n,r){const l=He(n,r),p=oe(n,r);return[l,p]}function yt(n,r){const l=oe(n,r),p=oe(n,r);return[l,p]}function He(n,r){const l=n.getInt32(r.value,!0);return r.value=r.value+4,l}function oe(n,r){const l=n.getUint32(r.value,!0);return r.value=r.value+4,l}function Ln(n,r){const l=n[r.value];return r.value=r.value+1,l}function Oe(n,r){const l=n.getUint8(r.value);return r.value=r.value+1,l}const le=function(n,r){let l;return"getBigInt64"in DataView.prototype?l=Number(n.getBigInt64(r.value,!0)):l=n.getUint32(r.value+4,!0)+Number(n.getUint32(r.value,!0)<<32),r.value+=8,l};function ee(n,r){const l=n.getFloat32(r.value,!0);return r.value+=4,l}function It(n,r){return vn.toHalfFloat(ee(n,r))}function y(n){const r=(n&31744)>>10,l=n&1023;return(n>>15?-1:1)*(r?r===31?l?NaN:1/0:Math.pow(2,r-15)*(1+l/1024):6103515625e-14*(l/1024))}function Be(n,r){const l=n.getUint16(r.value,!0);return r.value+=2,l}function Nt(n,r){return y(Be(n,r))}function Mt(n,r,l,p){const A=l.value,g=[];for(;l.value<A+p-1;){const w=Je(r,l),_=He(n,l),R=Oe(n,l);l.value+=3;const E=He(n,l),S=He(n,l);g.push({name:w,pixelType:_,pLinear:R,xSampling:E,ySampling:S})}return l.value+=1,g}function Lt(n,r){const l=ee(n,r),p=ee(n,r),A=ee(n,r),g=ee(n,r),w=ee(n,r),_=ee(n,r),R=ee(n,r),E=ee(n,r);return{redX:l,redY:p,greenX:A,greenY:g,blueX:w,blueY:_,whiteX:R,whiteY:E}}function bt(n,r){const l=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],p=Oe(n,r);return l[p]}function vt(n,r){const l=oe(n,r),p=oe(n,r),A=oe(n,r),g=oe(n,r);return{xMin:l,yMin:p,xMax:A,yMax:g}}function Ct(n,r){const l=["INCREASING_Y"],p=Oe(n,r);return l[p]}function Ot(n,r){const l=ee(n,r),p=ee(n,r);return[l,p]}function Ft(n,r){const l=ee(n,r),p=ee(n,r),A=ee(n,r);return[l,p,A]}function Ut(n,r,l,p,A){if(p==="string"||p==="stringvector"||p==="iccProfile")return Rt(r,l,A);if(p==="chlist")return Mt(n,r,l,A);if(p==="chromaticities")return Lt(n,l);if(p==="compression")return bt(n,l);if(p==="box2i")return vt(n,l);if(p==="lineOrder")return Ct(n,l);if(p==="float")return ee(n,l);if(p==="v2f")return Ot(n,l);if(p==="v3f")return Ft(n,l);if(p==="int")return He(n,l);if(p==="rational")return xt(n,l);if(p==="timecode")return yt(n,l);if(p==="preview")return l.value+=A,"skipped";l.value+=A}function Dt(n,r,l){const p={};if(n.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");p.version=n.getUint8(4);const A=n.getUint8(5);p.spec={singleTile:!!(A&2),longName:!!(A&4),deepFormat:!!(A&8),multiPart:!!(A&16)},l.value=8;let g=!0;for(;g;){const w=Je(r,l);if(w==0)g=!1;else{const _=Je(r,l),R=oe(n,l),E=Ut(n,r,l,_,R);E===void 0?console.warn(`THREE.EXRLoader: Skipped unknown header attribute type '${_}'.`):p[w]=E}}if(A&-5)throw console.error("THREE.EXRHeader:",p),new Error("THREE.EXRLoader: Provided file is currently unsupported.");return p}function kt(n,r,l,p,A){const g={size:0,viewer:r,array:l,offset:p,width:n.dataWindow.xMax-n.dataWindow.xMin+1,height:n.dataWindow.yMax-n.dataWindow.yMin+1,channels:n.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:n.channels[0].pixelType,uncompress:null,getter:null,format:null,colorSpace:de};switch(n.compression){case"NO_COMPRESSION":g.lines=1,g.uncompress=Nn;break;case"RLE_COMPRESSION":g.lines=1,g.uncompress=wt;break;case"ZIPS_COMPRESSION":g.lines=1,g.uncompress=an;break;case"ZIP_COMPRESSION":g.lines=16,g.uncompress=an;break;case"PIZ_COMPRESSION":g.lines=32,g.uncompress=St;break;case"PXR24_COMPRESSION":g.lines=16,g.uncompress=_t;break;case"DWAA_COMPRESSION":g.lines=32,g.uncompress=Mn;break;case"DWAB_COMPRESSION":g.lines=256,g.uncompress=Mn;break;default:throw new Error("EXRLoader.parse: "+n.compression+" is unsupported")}if(g.scanlineBlockSize=g.lines,g.type==1)switch(A){case cn:g.getter=Nt,g.inputSize=2;break;case nn:g.getter=Be,g.inputSize=2;break}else if(g.type==2)switch(A){case cn:g.getter=ee,g.inputSize=4;break;case nn:g.getter=It,g.inputSize=4}else throw new Error("EXRLoader.parse: unsupported pixelType "+g.type+" for "+n.compression+".");g.blockCount=(n.dataWindow.yMax+1)/g.scanlineBlockSize;for(let _=0;_<g.blockCount;_++)le(r,p);g.outputChannels=g.channels==3?4:g.channels;const w=g.width*g.height*g.outputChannels;switch(A){case cn:g.byteArray=new Float32Array(w),g.channels<g.outputChannels&&g.byteArray.fill(1,0,w);break;case nn:g.byteArray=new Uint16Array(w),g.channels<g.outputChannels&&g.byteArray.fill(15360,0,w);break;default:console.error("THREE.EXRLoader: unsupported type: ",A);break}return g.bytesPerLine=g.width*g.inputSize*g.channels,g.outputChannels==4?(g.format=Gt,g.colorSpace=de):(g.format=Kt,g.colorSpace=zt),g}const $e=new DataView(e),Pt=new Uint8Array(e),Ge={value:0},Ke=Dt($e,e,Ge),P=kt(Ke,$e,Pt,Ge,this.type),bn={value:0},Ht={R:0,G:1,B:2,A:3,Y:0};for(let n=0;n<P.height/P.scanlineBlockSize;n++){const r=oe($e,Ge);P.size=oe($e,Ge),P.lines=r+P.scanlineBlockSize>P.height?P.height-r:P.scanlineBlockSize;const p=P.size<P.lines*P.bytesPerLine?P.uncompress(P):Nn(P);Ge.value+=P.size;for(let A=0;A<P.scanlineBlockSize;A++){const g=A+n*P.scanlineBlockSize;if(g>=P.height)break;for(let w=0;w<P.channels;w++){const _=Ht[Ke.channels[w].name];for(let R=0;R<P.width;R++){bn.value=(A*(P.channels*P.width)+w*P.width+R)*P.inputSize;const E=(P.height-1-g)*(P.width*P.outputChannels)+R*P.outputChannels+_;P.byteArray[E]=P.getter(p,bn)}}}}return{header:Ke,width:P.width,height:P.height,data:P.byteArray,format:P.format,colorSpace:P.colorSpace,type:this.type}}setDataType(e){return this.type=e,this}load(e,t,o,s){function a(i,h){i.colorSpace=h.colorSpace,i.minFilter=sn,i.magFilter=sn,i.generateMipmaps=!1,i.flipY=!1,t&&t(i,h)}return super.load(e,a,o,s)}}function Pn(f,e){if(e===Zt)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),f;if(e===An||e===zn){let t=f.getIndex();if(t===null){const i=[],h=f.getAttribute("position");if(h!==void 0){for(let c=0;c<h.count;c++)i.push(c);f.setIndex(i),t=f.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),f}const o=t.count-2,s=[];if(e===An)for(let i=1;i<=o;i++)s.push(t.getX(0)),s.push(t.getX(i)),s.push(t.getX(i+1));else for(let i=0;i<o;i++)i%2===0?(s.push(t.getX(i)),s.push(t.getX(i+1)),s.push(t.getX(i+2))):(s.push(t.getX(i+2)),s.push(t.getX(i+1)),s.push(t.getX(i)));s.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=f.clone();return a.setIndex(s),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),f}class Js extends Xt{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new sr(t)}),this.register(function(t){return new fr(t)}),this.register(function(t){return new pr(t)}),this.register(function(t){return new dr(t)}),this.register(function(t){return new or(t)}),this.register(function(t){return new ir(t)}),this.register(function(t){return new ar(t)}),this.register(function(t){return new cr(t)}),this.register(function(t){return new tr(t)}),this.register(function(t){return new lr(t)}),this.register(function(t){return new rr(t)}),this.register(function(t){return new hr(t)}),this.register(function(t){return new ur(t)}),this.register(function(t){return new er(t)}),this.register(function(t){return new mr(t)}),this.register(function(t){return new gr(t)})}load(e,t,o,s){const a=this;let i;if(this.resourcePath!=="")i=this.resourcePath;else if(this.path!==""){const u=Xe.extractUrlBase(e);i=Xe.resolveURL(u,this.path)}else i=Xe.extractUrlBase(e);this.manager.itemStart(e);const h=function(u){s?s(u):console.error(u),a.manager.itemError(e),a.manager.itemEnd(e)},c=new Zn(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(u){try{a.parse(u,i,function(m){t(m),a.manager.itemEnd(e)},h)}catch(m){h(m)}},o,h)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,o,s){let a;const i={},h={},c=new TextDecoder;if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===ct){try{i[k.KHR_BINARY_GLTF]=new Ar(e)}catch(d){s&&s(d);return}a=JSON.parse(i[k.KHR_BINARY_GLTF].content)}else a=JSON.parse(c.decode(e));else a=e;if(a.asset===void 0||a.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new br(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let m=0;m<this.pluginCallbacks.length;m++){const d=this.pluginCallbacks[m](u);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),h[d.name]=d,i[d.name]=!0}if(a.extensionsUsed)for(let m=0;m<a.extensionsUsed.length;++m){const d=a.extensionsUsed[m],T=a.extensionsRequired||[];switch(d){case k.KHR_MATERIALS_UNLIT:i[d]=new nr;break;case k.KHR_DRACO_MESH_COMPRESSION:i[d]=new Tr(a,this.dracoLoader);break;case k.KHR_TEXTURE_TRANSFORM:i[d]=new Er;break;case k.KHR_MESH_QUANTIZATION:i[d]=new wr;break;default:T.indexOf(d)>=0&&h[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}u.setExtensions(i),u.setPlugins(h),u.parse(o,s)}parseAsync(e,t){const o=this;return new Promise(function(s,a){o.parse(e,t,s,a)})}}function $s(){let f={};return{get:function(e){return f[e]},add:function(e,t){f[e]=t},remove:function(e){delete f[e]},removeAll:function(){f={}}}}const k={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class er{constructor(e){this.parser=e,this.name=k.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let o=0,s=t.length;o<s;o++){const a=t[o];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,o="light:"+e;let s=t.cache.get(o);if(s)return s;const a=t.json,c=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let u;const m=new ve(16777215);c.color!==void 0&&m.setRGB(c.color[0],c.color[1],c.color[2],de);const d=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new Wt(m),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Vt(m),u.distance=d;break;case"spot":u=new jt(m),u.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),u.decay=2,ye(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=t.createUniqueName(c.name||"light_"+e),s=Promise.resolve(u),t.cache.add(o,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,o=this.parser,a=o.json.nodes[e],h=(a.extensions&&a.extensions[this.name]||{}).light;return h===void 0?null:this._loadLight(h).then(function(c){return o._getNodeRef(t.cache,h,c)})}}class nr{constructor(){this.name=k.KHR_MATERIALS_UNLIT}getMaterialType(){return Fe}extendParams(e,t,o){const s=[];e.color=new ve(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const i=a.baseColorFactor;e.color.setRGB(i[0],i[1],i[2],de),e.opacity=i[3]}a.baseColorTexture!==void 0&&s.push(o.assignTexture(e,"map",a.baseColorTexture,Ve))}return Promise.all(s)}}class tr{constructor(e){this.parser=e,this.name=k.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=s.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}}class sr{constructor(e){this.parser=e,this.name=k.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:_e}extendMaterialParams(e,t){const o=this.parser,s=o.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],i=s.extensions[this.name];if(i.clearcoatFactor!==void 0&&(t.clearcoat=i.clearcoatFactor),i.clearcoatTexture!==void 0&&a.push(o.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),i.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),i.clearcoatRoughnessTexture!==void 0&&a.push(o.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),i.clearcoatNormalTexture!==void 0&&(a.push(o.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),i.clearcoatNormalTexture.scale!==void 0)){const h=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Xn(h,h)}return Promise.all(a)}}class rr{constructor(e){this.parser=e,this.name=k.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:_e}extendMaterialParams(e,t){const o=this.parser,s=o.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],i=s.extensions[this.name];return i.iridescenceFactor!==void 0&&(t.iridescence=i.iridescenceFactor),i.iridescenceTexture!==void 0&&a.push(o.assignTexture(t,"iridescenceMap",i.iridescenceTexture)),i.iridescenceIor!==void 0&&(t.iridescenceIOR=i.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),i.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),i.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),i.iridescenceThicknessTexture!==void 0&&a.push(o.assignTexture(t,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(a)}}class or{constructor(e){this.parser=e,this.name=k.KHR_MATERIALS_SHEEN}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:_e}extendMaterialParams(e,t){const o=this.parser,s=o.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new ve(0,0,0),t.sheenRoughness=0,t.sheen=1;const i=s.extensions[this.name];if(i.sheenColorFactor!==void 0){const h=i.sheenColorFactor;t.sheenColor.setRGB(h[0],h[1],h[2],de)}return i.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=i.sheenRoughnessFactor),i.sheenColorTexture!==void 0&&a.push(o.assignTexture(t,"sheenColorMap",i.sheenColorTexture,Ve)),i.sheenRoughnessTexture!==void 0&&a.push(o.assignTexture(t,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(a)}}class ir{constructor(e){this.parser=e,this.name=k.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:_e}extendMaterialParams(e,t){const o=this.parser,s=o.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],i=s.extensions[this.name];return i.transmissionFactor!==void 0&&(t.transmission=i.transmissionFactor),i.transmissionTexture!==void 0&&a.push(o.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(a)}}class ar{constructor(e){this.parser=e,this.name=k.KHR_MATERIALS_VOLUME}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:_e}extendMaterialParams(e,t){const o=this.parser,s=o.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],i=s.extensions[this.name];t.thickness=i.thicknessFactor!==void 0?i.thicknessFactor:0,i.thicknessTexture!==void 0&&a.push(o.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||1/0;const h=i.attenuationColor||[1,1,1];return t.attenuationColor=new ve().setRGB(h[0],h[1],h[2],de),Promise.all(a)}}class cr{constructor(e){this.parser=e,this.name=k.KHR_MATERIALS_IOR}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:_e}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=s.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class lr{constructor(e){this.parser=e,this.name=k.KHR_MATERIALS_SPECULAR}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:_e}extendMaterialParams(e,t){const o=this.parser,s=o.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],i=s.extensions[this.name];t.specularIntensity=i.specularFactor!==void 0?i.specularFactor:1,i.specularTexture!==void 0&&a.push(o.assignTexture(t,"specularIntensityMap",i.specularTexture));const h=i.specularColorFactor||[1,1,1];return t.specularColor=new ve().setRGB(h[0],h[1],h[2],de),i.specularColorTexture!==void 0&&a.push(o.assignTexture(t,"specularColorMap",i.specularColorTexture,Ve)),Promise.all(a)}}class ur{constructor(e){this.parser=e,this.name=k.EXT_MATERIALS_BUMP}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:_e}extendMaterialParams(e,t){const o=this.parser,s=o.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],i=s.extensions[this.name];return t.bumpScale=i.bumpFactor!==void 0?i.bumpFactor:1,i.bumpTexture!==void 0&&a.push(o.assignTexture(t,"bumpMap",i.bumpTexture)),Promise.all(a)}}class hr{constructor(e){this.parser=e,this.name=k.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:_e}extendMaterialParams(e,t){const o=this.parser,s=o.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],i=s.extensions[this.name];return i.anisotropyStrength!==void 0&&(t.anisotropy=i.anisotropyStrength),i.anisotropyRotation!==void 0&&(t.anisotropyRotation=i.anisotropyRotation),i.anisotropyTexture!==void 0&&a.push(o.assignTexture(t,"anisotropyMap",i.anisotropyTexture)),Promise.all(a)}}class fr{constructor(e){this.parser=e,this.name=k.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,o=t.json,s=o.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const a=s.extensions[this.name],i=t.options.ktx2Loader;if(!i){if(o.extensionsRequired&&o.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,i)}}class pr{constructor(e){this.parser=e,this.name=k.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,o=this.parser,s=o.json,a=s.textures[e];if(!a.extensions||!a.extensions[t])return null;const i=a.extensions[t],h=s.images[i.source];let c=o.textureLoader;if(h.uri){const u=o.options.manager.getHandler(h.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return o.loadTextureImage(e,i.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return o.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class dr{constructor(e){this.parser=e,this.name=k.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,o=this.parser,s=o.json,a=s.textures[e];if(!a.extensions||!a.extensions[t])return null;const i=a.extensions[t],h=s.images[i.source];let c=o.textureLoader;if(h.uri){const u=o.options.manager.getHandler(h.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return o.loadTextureImage(e,i.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return o.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class mr{constructor(e){this.name=k.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,o=t.bufferViews[e];if(o.extensions&&o.extensions[this.name]){const s=o.extensions[this.name],a=this.parser.getDependency("buffer",s.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(h){const c=s.byteOffset||0,u=s.byteLength||0,m=s.count,d=s.byteStride,T=new Uint8Array(h,c,u);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(m,d,T,s.mode,s.filter).then(function(x){return x.buffer}):i.ready.then(function(){const x=new ArrayBuffer(m*d);return i.decodeGltfBuffer(new Uint8Array(x),m,d,T,s.mode,s.filter),x})})}else return null}}class gr{constructor(e){this.name=k.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,o=t.nodes[e];if(!o.extensions||!o.extensions[this.name]||o.mesh===void 0)return null;const s=t.meshes[o.mesh];for(const u of s.primitives)if(u.mode!==he.TRIANGLES&&u.mode!==he.TRIANGLE_STRIP&&u.mode!==he.TRIANGLE_FAN&&u.mode!==void 0)return null;const i=o.extensions[this.name].attributes,h=[],c={};for(const u in i)h.push(this.parser.getDependency("accessor",i[u]).then(m=>(c[u]=m,c[u])));return h.length<1?null:(h.push(this.parser.createNodeMesh(e)),Promise.all(h).then(u=>{const m=u.pop(),d=m.isGroup?m.children:[m],T=u[0].count,x=[];for(const v of d){const O=new rn,b=new Ue,U=new nt,G=new Ue(1,1,1),W=new Yt(v.geometry,v.material,T);for(let H=0;H<T;H++)c.TRANSLATION&&b.fromBufferAttribute(c.TRANSLATION,H),c.ROTATION&&U.fromBufferAttribute(c.ROTATION,H),c.SCALE&&G.fromBufferAttribute(c.SCALE,H),W.setMatrixAt(H,O.compose(b,U,G));for(const H in c)if(H==="_COLOR_0"){const se=c[H];W.instanceColor=new qt(se.array,se.itemSize,se.normalized)}else H!=="TRANSLATION"&&H!=="ROTATION"&&H!=="SCALE"&&v.geometry.setAttribute(H,c[H]);jn.prototype.copy.call(W,v),this.parser.assignFinalMaterial(W),x.push(W)}return m.isGroup?(m.clear(),m.add(...x),m):x[0]}))}}const ct="glTF",Ze=12,Hn={JSON:1313821514,BIN:5130562};class Ar{constructor(e){this.name=k.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ze),o=new TextDecoder;if(this.header={magic:o.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ct)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Ze,a=new DataView(e,Ze);let i=0;for(;i<s;){const h=a.getUint32(i,!0);i+=4;const c=a.getUint32(i,!0);if(i+=4,c===Hn.JSON){const u=new Uint8Array(e,Ze+i,h);this.content=o.decode(u)}else if(c===Hn.BIN){const u=Ze+i;this.body=e.slice(u,u+h)}i+=h}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Tr{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=k.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const o=this.json,s=this.dracoLoader,a=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,h={},c={},u={};for(const m in i){const d=Sn[m]||m.toLowerCase();h[d]=i[m]}for(const m in e.attributes){const d=Sn[m]||m.toLowerCase();if(i[m]!==void 0){const T=o.accessors[e.attributes[m]],x=De[T.componentType];u[d]=x.name,c[d]=T.normalized===!0}}return t.getDependency("bufferView",a).then(function(m){return new Promise(function(d,T){s.decodeDracoFile(m,function(x){for(const v in x.attributes){const O=x.attributes[v],b=c[v];b!==void 0&&(O.normalized=b)}d(x)},h,u,de,T)})})}}class Er{constructor(){this.name=k.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class wr{constructor(){this.name=k.KHR_MESH_QUANTIZATION}}class lt extends Rs{constructor(e,t,o,s){super(e,t,o,s)}copySampleValue_(e){const t=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s*3+s;for(let i=0;i!==s;i++)t[i]=o[a+i];return t}interpolate_(e,t,o,s){const a=this.resultBuffer,i=this.sampleValues,h=this.valueSize,c=h*2,u=h*3,m=s-t,d=(o-t)/m,T=d*d,x=T*d,v=e*u,O=v-u,b=-2*x+3*T,U=x-T,G=1-b,W=U-T+d;for(let H=0;H!==h;H++){const se=i[O+H+h],ne=i[O+H+c]*m,$=i[v+H+h],q=i[v+H]*m;a[H]=G*se+W*ne+b*$+U*q}return a}}const Sr=new nt;class _r extends lt{interpolate_(e,t,o,s){const a=super.interpolate_(e,t,o,s);return Sr.fromArray(a).normalize().toArray(a),a}}const he={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},De={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Bn={9728:fs,9729:sn,9984:ps,9985:ds,9986:ms,9987:Wn},Gn={33071:gs,33648:As,10497:Tn},dn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Sn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},xe={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Rr={CUBICSPLINE:void 0,LINEAR:et,STEP:Ts},mn={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function xr(f){return f.DefaultMaterial===void 0&&(f.DefaultMaterial=new qn({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Es})),f.DefaultMaterial}function be(f,e,t){for(const o in t.extensions)f[o]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[o]=t.extensions[o])}function ye(f,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(f.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function yr(f,e,t){let o=!1,s=!1,a=!1;for(let u=0,m=e.length;u<m;u++){const d=e[u];if(d.POSITION!==void 0&&(o=!0),d.NORMAL!==void 0&&(s=!0),d.COLOR_0!==void 0&&(a=!0),o&&s&&a)break}if(!o&&!s&&!a)return Promise.resolve(f);const i=[],h=[],c=[];for(let u=0,m=e.length;u<m;u++){const d=e[u];if(o){const T=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):f.attributes.position;i.push(T)}if(s){const T=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):f.attributes.normal;h.push(T)}if(a){const T=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):f.attributes.color;c.push(T)}}return Promise.all([Promise.all(i),Promise.all(h),Promise.all(c)]).then(function(u){const m=u[0],d=u[1],T=u[2];return o&&(f.morphAttributes.position=m),s&&(f.morphAttributes.normal=d),a&&(f.morphAttributes.color=T),f.morphTargetsRelative=!0,f})}function Ir(f,e){if(f.updateMorphTargets(),e.weights!==void 0)for(let t=0,o=e.weights.length;t<o;t++)f.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(f.morphTargetInfluences.length===t.length){f.morphTargetDictionary={};for(let o=0,s=t.length;o<s;o++)f.morphTargetDictionary[t[o]]=o}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Nr(f){let e;const t=f.extensions&&f.extensions[k.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+gn(t.attributes):e=f.indices+":"+gn(f.attributes)+":"+f.mode,f.targets!==void 0)for(let o=0,s=f.targets.length;o<s;o++)e+=":"+gn(f.targets[o]);return e}function gn(f){let e="";const t=Object.keys(f).sort();for(let o=0,s=t.length;o<s;o++)e+=t[o]+":"+f[t[o]]+";";return e}function _n(f){switch(f){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Mr(f){return f.search(/\.jpe?g($|\?)/i)>0||f.search(/^data\:image\/jpeg/)===0?"image/jpeg":f.search(/\.webp($|\?)/i)>0||f.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Lr=new rn;class br{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new $s,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let o=!1,s=!1,a=-1;typeof navigator<"u"&&(o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,a=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||o||s&&a<98?this.textureLoader=new Vn(this.options.manager):this.textureLoader=new Qt(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Zn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const o=this,s=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(i){return i._markDefs&&i._markDefs()}),Promise.all(this._invokeAll(function(i){return i.beforeRoot&&i.beforeRoot()})).then(function(){return Promise.all([o.getDependencies("scene"),o.getDependencies("animation"),o.getDependencies("camera")])}).then(function(i){const h={scene:i[0][s.scene||0],scenes:i[0],animations:i[1],cameras:i[2],asset:s.asset,parser:o,userData:{}};return be(a,h,s),ye(h,s),Promise.all(o._invokeAll(function(c){return c.afterRoot&&c.afterRoot(h)})).then(function(){e(h)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],o=this.json.meshes||[];for(let s=0,a=t.length;s<a;s++){const i=t[s].joints;for(let h=0,c=i.length;h<c;h++)e[i[h]].isBone=!0}for(let s=0,a=e.length;s<a;s++){const i=e[s];i.mesh!==void 0&&(this._addNodeRef(this.meshCache,i.mesh),i.skin!==void 0&&(o[i.mesh].isSkinnedMesh=!0)),i.camera!==void 0&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,o){if(e.refs[t]<=1)return o;const s=o.clone(),a=(i,h)=>{const c=this.associations.get(i);c!=null&&this.associations.set(h,c);for(const[u,m]of i.children.entries())a(m,h.children[u])};return a(o,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let o=0;o<t.length;o++){const s=e(t[o]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const o=[];for(let s=0;s<t.length;s++){const a=e(t[s]);a&&o.push(a)}return o}getDependency(e,t){const o=e+":"+t;let s=this.cache.get(o);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":s=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(o,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const o=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(a,i){return o.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],o=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[k.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(a,i){o.load(Xe.resolveURL(t.uri,s.path),a,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(o){const s=t.byteLength||0,a=t.byteOffset||0;return o.slice(a,a+s)})}loadAccessor(e){const t=this,o=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const i=dn[s.type],h=De[s.componentType],c=s.normalized===!0,u=new h(s.count*i);return Promise.resolve(new ln(u,i,c))}const a=[];return s.bufferView!==void 0?a.push(this.getDependency("bufferView",s.bufferView)):a.push(null),s.sparse!==void 0&&(a.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(a).then(function(i){const h=i[0],c=dn[s.type],u=De[s.componentType],m=u.BYTES_PER_ELEMENT,d=m*c,T=s.byteOffset||0,x=s.bufferView!==void 0?o.bufferViews[s.bufferView].byteStride:void 0,v=s.normalized===!0;let O,b;if(x&&x!==d){const U=Math.floor(T/x),G="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+U+":"+s.count;let W=t.cache.get(G);W||(O=new u(h,U*x,s.count*x/m),W=new Jt(O,x/m),t.cache.add(G,W)),b=new ws(W,c,T%x/m,v)}else h===null?O=new u(s.count*c):O=new u(h,T,s.count*c),b=new ln(O,c,v);if(s.sparse!==void 0){const U=dn.SCALAR,G=De[s.sparse.indices.componentType],W=s.sparse.indices.byteOffset||0,H=s.sparse.values.byteOffset||0,se=new G(i[1],W,s.sparse.count*U),ne=new u(i[2],H,s.sparse.count*c);h!==null&&(b=new ln(b.array.slice(),b.itemSize,b.normalized));for(let $=0,q=se.length;$<q;$++){const ie=se[$];if(b.setX(ie,ne[$*c]),c>=2&&b.setY(ie,ne[$*c+1]),c>=3&&b.setZ(ie,ne[$*c+2]),c>=4&&b.setW(ie,ne[$*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,o=this.options,a=t.textures[e].source,i=t.images[a];let h=this.textureLoader;if(i.uri){const c=o.manager.getHandler(i.uri);c!==null&&(h=c)}return this.loadTextureImage(e,a,h)}loadTextureImage(e,t,o){const s=this,a=this.json,i=a.textures[e],h=a.images[t],c=(h.uri||h.bufferView)+":"+i.sampler;if(this.textureCache[c])return this.textureCache[c];const u=this.loadImageSource(t,o).then(function(m){m.flipY=!1,m.name=i.name||h.name||"",m.name===""&&typeof h.uri=="string"&&h.uri.startsWith("data:image/")===!1&&(m.name=h.uri);const T=(a.samplers||{})[i.sampler]||{};return m.magFilter=Bn[T.magFilter]||sn,m.minFilter=Bn[T.minFilter]||Wn,m.wrapS=Gn[T.wrapS]||Tn,m.wrapT=Gn[T.wrapT]||Tn,s.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(e,t){const o=this,s=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const i=s.images[e],h=self.URL||self.webkitURL;let c=i.uri||"",u=!1;if(i.bufferView!==void 0)c=o.getDependency("bufferView",i.bufferView).then(function(d){u=!0;const T=new Blob([d],{type:i.mimeType});return c=h.createObjectURL(T),c});else if(i.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(c).then(function(d){return new Promise(function(T,x){let v=T;t.isImageBitmapLoader===!0&&(v=function(O){const b=new On(O);b.needsUpdate=!0,T(b)}),t.load(Xe.resolveURL(d,a.path),v,void 0,x)})}).then(function(d){return u===!0&&h.revokeObjectURL(c),d.userData.mimeType=i.mimeType||Mr(i.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[e]=m,m}assignTexture(e,t,o,s){const a=this;return this.getDependency("texture",o.index).then(function(i){if(!i)return null;if(o.texCoord!==void 0&&o.texCoord>0&&(i=i.clone(),i.channel=o.texCoord),a.extensions[k.KHR_TEXTURE_TRANSFORM]){const h=o.extensions!==void 0?o.extensions[k.KHR_TEXTURE_TRANSFORM]:void 0;if(h){const c=a.associations.get(i);i=a.extensions[k.KHR_TEXTURE_TRANSFORM].extendTexture(i,h),a.associations.set(i,c)}}return s!==void 0&&(i.colorSpace=s),e[t]=i,i})}assignFinalMaterial(e){const t=e.geometry;let o=e.material;const s=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,i=t.attributes.normal===void 0;if(e.isPoints){const h="PointsMaterial:"+o.uuid;let c=this.cache.get(h);c||(c=new $t,un.prototype.copy.call(c,o),c.color.copy(o.color),c.map=o.map,c.sizeAttenuation=!1,this.cache.add(h,c)),o=c}else if(e.isLine){const h="LineBasicMaterial:"+o.uuid;let c=this.cache.get(h);c||(c=new Yn,un.prototype.copy.call(c,o),c.color.copy(o.color),c.map=o.map,this.cache.add(h,c)),o=c}if(s||a||i){let h="ClonedMaterial:"+o.uuid+":";s&&(h+="derivative-tangents:"),a&&(h+="vertex-colors:"),i&&(h+="flat-shading:");let c=this.cache.get(h);c||(c=o.clone(),a&&(c.vertexColors=!0),i&&(c.flatShading=!0),s&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(h,c),this.associations.set(c,this.associations.get(o))),o=c}e.material=o}getMaterialType(){return qn}loadMaterial(e){const t=this,o=this.json,s=this.extensions,a=o.materials[e];let i;const h={},c=a.extensions||{},u=[];if(c[k.KHR_MATERIALS_UNLIT]){const d=s[k.KHR_MATERIALS_UNLIT];i=d.getMaterialType(),u.push(d.extendParams(h,a,t))}else{const d=a.pbrMetallicRoughness||{};if(h.color=new ve(1,1,1),h.opacity=1,Array.isArray(d.baseColorFactor)){const T=d.baseColorFactor;h.color.setRGB(T[0],T[1],T[2],de),h.opacity=T[3]}d.baseColorTexture!==void 0&&u.push(t.assignTexture(h,"map",d.baseColorTexture,Ve)),h.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,h.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(h,"metalnessMap",d.metallicRoughnessTexture)),u.push(t.assignTexture(h,"roughnessMap",d.metallicRoughnessTexture))),i=this._invokeOne(function(T){return T.getMaterialType&&T.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(T){return T.extendMaterialParams&&T.extendMaterialParams(e,h)})))}a.doubleSided===!0&&(h.side=Qn);const m=a.alphaMode||mn.OPAQUE;if(m===mn.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,m===mn.MASK&&(h.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&i!==Fe&&(u.push(t.assignTexture(h,"normalMap",a.normalTexture)),h.normalScale=new Xn(1,1),a.normalTexture.scale!==void 0)){const d=a.normalTexture.scale;h.normalScale.set(d,d)}if(a.occlusionTexture!==void 0&&i!==Fe&&(u.push(t.assignTexture(h,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&i!==Fe){const d=a.emissiveFactor;h.emissive=new ve().setRGB(d[0],d[1],d[2],de)}return a.emissiveTexture!==void 0&&i!==Fe&&u.push(t.assignTexture(h,"emissiveMap",a.emissiveTexture,Ve)),Promise.all(u).then(function(){const d=new i(h);return a.name&&(d.name=a.name),ye(d,a),t.associations.set(d,{materials:e}),a.extensions&&be(s,d,a),d})}createUniqueName(e){const t=es.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,o=this.extensions,s=this.primitiveCache;function a(h){return o[k.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,t).then(function(c){return Kn(c,h,t)})}const i=[];for(let h=0,c=e.length;h<c;h++){const u=e[h],m=Nr(u),d=s[m];if(d)i.push(d.promise);else{let T;u.extensions&&u.extensions[k.KHR_DRACO_MESH_COMPRESSION]?T=a(u):T=Kn(new ns,u,t),s[m]={primitive:u,promise:T},i.push(T)}}return Promise.all(i)}loadMesh(e){const t=this,o=this.json,s=this.extensions,a=o.meshes[e],i=a.primitives,h=[];for(let c=0,u=i.length;c<u;c++){const m=i[c].material===void 0?xr(this.cache):this.getDependency("material",i[c].material);h.push(m)}return h.push(t.loadGeometries(i)),Promise.all(h).then(function(c){const u=c.slice(0,c.length-1),m=c[c.length-1],d=[];for(let x=0,v=m.length;x<v;x++){const O=m[x],b=i[x];let U;const G=u[x];if(b.mode===he.TRIANGLES||b.mode===he.TRIANGLE_STRIP||b.mode===he.TRIANGLE_FAN||b.mode===void 0)U=a.isSkinnedMesh===!0?new ts(O,G):new ss(O,G),U.isSkinnedMesh===!0&&U.normalizeSkinWeights(),b.mode===he.TRIANGLE_STRIP?U.geometry=Pn(U.geometry,zn):b.mode===he.TRIANGLE_FAN&&(U.geometry=Pn(U.geometry,An));else if(b.mode===he.LINES)U=new Jn(O,G);else if(b.mode===he.LINE_STRIP)U=new rs(O,G);else if(b.mode===he.LINE_LOOP)U=new os(O,G);else if(b.mode===he.POINTS)U=new is(O,G);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(U.geometry.morphAttributes).length>0&&Ir(U,a),U.name=t.createUniqueName(a.name||"mesh_"+e),ye(U,a),b.extensions&&be(s,U,b),t.assignFinalMaterial(U),d.push(U)}for(let x=0,v=d.length;x<v;x++)t.associations.set(d[x],{meshes:e,primitives:x});if(d.length===1)return a.extensions&&be(s,d[0],a),d[0];const T=new hn;a.extensions&&be(s,T,a),t.associations.set(T,{meshes:e});for(let x=0,v=d.length;x<v;x++)T.add(d[x]);return T})}loadCamera(e){let t;const o=this.json.cameras[e],s=o[o.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return o.type==="perspective"?t=new $n(as.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):o.type==="orthographic"&&(t=new cs(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),o.name&&(t.name=this.createUniqueName(o.name)),ye(t,o),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],o=[];for(let s=0,a=t.joints.length;s<a;s++)o.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?o.push(this.getDependency("accessor",t.inverseBindMatrices)):o.push(null),Promise.all(o).then(function(s){const a=s.pop(),i=s,h=[],c=[];for(let u=0,m=i.length;u<m;u++){const d=i[u];if(d){h.push(d);const T=new rn;a!==null&&T.fromArray(a.array,u*16),c.push(T)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new ls(h,c)})}loadAnimation(e){const t=this.json,o=this,s=t.animations[e],a=s.name?s.name:"animation_"+e,i=[],h=[],c=[],u=[],m=[];for(let d=0,T=s.channels.length;d<T;d++){const x=s.channels[d],v=s.samplers[x.sampler],O=x.target,b=O.node,U=s.parameters!==void 0?s.parameters[v.input]:v.input,G=s.parameters!==void 0?s.parameters[v.output]:v.output;O.node!==void 0&&(i.push(this.getDependency("node",b)),h.push(this.getDependency("accessor",U)),c.push(this.getDependency("accessor",G)),u.push(v),m.push(O))}return Promise.all([Promise.all(i),Promise.all(h),Promise.all(c),Promise.all(u),Promise.all(m)]).then(function(d){const T=d[0],x=d[1],v=d[2],O=d[3],b=d[4],U=[];for(let G=0,W=T.length;G<W;G++){const H=T[G],se=x[G],ne=v[G],$=O[G],q=b[G];if(H===void 0)continue;H.updateMatrix&&H.updateMatrix();const ie=o._createAnimationTracks(H,se,ne,$,q);if(ie)for(let Ne=0;Ne<ie.length;Ne++)U.push(ie[Ne])}return new us(a,void 0,U)})}createNodeMesh(e){const t=this.json,o=this,s=t.nodes[e];return s.mesh===void 0?null:o.getDependency("mesh",s.mesh).then(function(a){const i=o._getNodeRef(o.meshCache,s.mesh,a);return s.weights!==void 0&&i.traverse(function(h){if(h.isMesh)for(let c=0,u=s.weights.length;c<u;c++)h.morphTargetInfluences[c]=s.weights[c]}),i})}loadNode(e){const t=this.json,o=this,s=t.nodes[e],a=o._loadNodeShallow(e),i=[],h=s.children||[];for(let u=0,m=h.length;u<m;u++)i.push(o.getDependency("node",h[u]));const c=s.skin===void 0?Promise.resolve(null):o.getDependency("skin",s.skin);return Promise.all([a,Promise.all(i),c]).then(function(u){const m=u[0],d=u[1],T=u[2];T!==null&&m.traverse(function(x){x.isSkinnedMesh&&x.bind(T,Lr)});for(let x=0,v=d.length;x<v;x++)m.add(d[x]);return m})}_loadNodeShallow(e){const t=this.json,o=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=t.nodes[e],i=a.name?s.createUniqueName(a.name):"",h=[],c=s._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return c&&h.push(c),a.camera!==void 0&&h.push(s.getDependency("camera",a.camera).then(function(u){return s._getNodeRef(s.cameraCache,a.camera,u)})),s._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){h.push(u)}),this.nodeCache[e]=Promise.all(h).then(function(u){let m;if(a.isBone===!0?m=new hs:u.length>1?m=new hn:u.length===1?m=u[0]:m=new jn,m!==u[0])for(let d=0,T=u.length;d<T;d++)m.add(u[d]);if(a.name&&(m.userData.name=a.name,m.name=i),ye(m,a),a.extensions&&be(o,m,a),a.matrix!==void 0){const d=new rn;d.fromArray(a.matrix),m.applyMatrix4(d)}else a.translation!==void 0&&m.position.fromArray(a.translation),a.rotation!==void 0&&m.quaternion.fromArray(a.rotation),a.scale!==void 0&&m.scale.fromArray(a.scale);return s.associations.has(m)||s.associations.set(m,{}),s.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,o=this.json.scenes[e],s=this,a=new hn;o.name&&(a.name=s.createUniqueName(o.name)),ye(a,o),o.extensions&&be(t,a,o);const i=o.nodes||[],h=[];for(let c=0,u=i.length;c<u;c++)h.push(s.getDependency("node",i[c]));return Promise.all(h).then(function(c){for(let m=0,d=c.length;m<d;m++)a.add(c[m]);const u=m=>{const d=new Map;for(const[T,x]of s.associations)(T instanceof un||T instanceof On)&&d.set(T,x);return m.traverse(T=>{const x=s.associations.get(T);x!=null&&d.set(T,x)}),d};return s.associations=u(a),a})}_createAnimationTracks(e,t,o,s,a){const i=[],h=e.name?e.name:e.uuid,c=[];xe[a.path]===xe.weights?e.traverse(function(T){T.morphTargetInfluences&&c.push(T.name?T.name:T.uuid)}):c.push(h);let u;switch(xe[a.path]){case xe.weights:u=Un;break;case xe.rotation:u=Dn;break;case xe.position:case xe.scale:u=Fn;break;default:switch(o.itemSize){case 1:u=Un;break;case 2:case 3:default:u=Fn;break}break}const m=s.interpolation!==void 0?Rr[s.interpolation]:et,d=this._getArrayFromAccessor(o);for(let T=0,x=c.length;T<x;T++){const v=new u(c[T]+"."+xe[a.path],t.array,d,m);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),i.push(v)}return i}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const o=_n(t.constructor),s=new Float32Array(t.length);for(let a=0,i=t.length;a<i;a++)s[a]=t[a]*o;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(o){const s=this instanceof Dn?_r:lt;return new s(this.times,this.values,this.getValueSize()/3,o)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function vr(f,e,t){const o=e.attributes,s=new Ss;if(o.POSITION!==void 0){const h=t.json.accessors[o.POSITION],c=h.min,u=h.max;if(c!==void 0&&u!==void 0){if(s.set(new Ue(c[0],c[1],c[2]),new Ue(u[0],u[1],u[2])),h.normalized){const m=_n(De[h.componentType]);s.min.multiplyScalar(m),s.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const h=new Ue,c=new Ue;for(let u=0,m=a.length;u<m;u++){const d=a[u];if(d.POSITION!==void 0){const T=t.json.accessors[d.POSITION],x=T.min,v=T.max;if(x!==void 0&&v!==void 0){if(c.setX(Math.max(Math.abs(x[0]),Math.abs(v[0]))),c.setY(Math.max(Math.abs(x[1]),Math.abs(v[1]))),c.setZ(Math.max(Math.abs(x[2]),Math.abs(v[2]))),T.normalized){const O=_n(De[T.componentType]);c.multiplyScalar(O)}h.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(h)}f.boundingBox=s;const i=new _s;s.getCenter(i.center),i.radius=s.min.distanceTo(s.max)/2,f.boundingSphere=i}function Kn(f,e,t){const o=e.attributes,s=[];function a(i,h){return t.getDependency("accessor",i).then(function(c){f.setAttribute(h,c)})}for(const i in o){const h=Sn[i]||i.toLowerCase();h in f.attributes||s.push(a(o[i],h))}if(e.indices!==void 0&&!f.index){const i=t.getDependency("accessor",e.indices).then(function(h){f.setIndex(h)});s.push(i)}return Cn.workingColorSpace!==de&&"COLOR_0"in o&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Cn.workingColorSpace}" not supported.`),ye(f,e),vr(f,e,t),Promise.all(s).then(function(){return e.targets!==void 0?yr(f,e.targets,t):f})}const Cr={class:"three"},Or={name:"Demo"},Fr=vs({...Or,setup(f){const e={scene:null,camera:null,renderder:null,cube:null,controller:null,material:null},t=Cs(),o=()=>{const u=t.value;e.scene=new xs,e.camera=new $n(75,window.innerWidth/window.innerHeight,.1,2e3),e.camera.position.set(2,2,20),e.camera.lookAt(0,0,0),e.renderder=new ys({antialias:!0}),e.renderder.setSize(u.offsetWidth,u.offsetHeight),s(),i(),h(),a(),u.appendChild(e.renderder.domElement),e.renderder.render(e.scene,e.camera),c()},s=()=>{const u=new Vn;let m=u.load("./three/wood/wood5.jpg"),d=u.load("./three/wood/wood4.png"),T=u.load("./three/wood/wood.png");e.material=new Fe({side:Qn,transparent:!0,map:m,aoMap:d,specularMap:T}),new Qs().load("./three/quarry_03_4k.exr",O=>{O.mapping=Is,e.scene.background=O,e.scene.environment=O,e.material.envMap=O}),new bs().add(e.material,"aoMapIntensity").min(0).max(1).step(.1).name("ao强度")},a=()=>{new Js().load("./three/dpf/大牌坊.gltf",m=>{console.log(m),m.scene.traverse(d=>{if(d.isObject3D){const T=d.geometry,x=new Ns(T),v=new Yn({color:65280}),O=new Jn(x,v);e.scene.add(O)}})})},i=()=>{var m;const u=new Ms(10);(m=e.scene)==null||m.add(u)},h=()=>{var u;e.controller=new Ls(e.camera,(u=e.renderder)==null?void 0:u.domElement)},c=()=>{var u,m;(u=e.controller)==null||u.update(),(m=e.renderder)==null||m.render(e.scene,e.camera),requestAnimationFrame(c)};return Os(()=>{o()}),(u,m)=>(Fs(),Us("div",Cr,[Ds("div",{class:"three-demo",ref_key:"threeDemo",ref:t},null,512)]))}}),Hr=ks(Fr,[["__scopeId","data-v-750f0675"]]);export{Hr as default};
