import{i as jn,j as gn,r as li,k as Zn,o as _n,n as Kn,l as Xn,t as Qn,d as Yn,u as Jn,e as $n,a as er,c as tr,g as ir,m as nr}from"./index-KeGZnv_2.js";import{D as rr}from"./demo1-oEx83fmd.js";import{_ as sr}from"./_plugin-vue_export-helper-x3n3nnut.js";function ar(qe){throw new Error('Could not dynamically require "'+qe+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vn={exports:{}};const ur={},or=Object.freeze(Object.defineProperty({__proto__:null,default:ur},Symbol.toStringTag,{value:"Module"})),dn=jn(or);var Bi={exports:{}},pn;function hr(){return pn||(pn=1,function(qe,ot){(function(X,Re){Re(ot)})(gn,function(X){var Re=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],Le=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],R="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",je="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ue={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},st="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",bt={5:st,"5module":st+" export import",6:st+" const class extends export import super"},at=/^in(stanceof)?$/,Me=new RegExp("["+je+"]"),xt=new RegExp("["+je+R+"]");function D(i,u){for(var m=65536,I=0;I<u.length;I+=2){if(m+=u[I],m>i)return!1;if(m+=u[I+1],m>=i)return!0}return!1}function fe(i,u){return i<65?i===36:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&Me.test(String.fromCharCode(i)):u===!1?!1:D(i,Le)}function $(i,u){return i<48?i===36:i<58?!0:i<65?!1:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&xt.test(String.fromCharCode(i)):u===!1?!1:D(i,Le)||D(i,Re)}var ue=function(u,m){m===void 0&&(m={}),this.label=u,this.keyword=m.keyword,this.beforeExpr=!!m.beforeExpr,this.startsExpr=!!m.startsExpr,this.isLoop=!!m.isLoop,this.isAssign=!!m.isAssign,this.prefix=!!m.prefix,this.postfix=!!m.postfix,this.binop=m.binop||null,this.updateContext=null};function Z(i,u){return new ue(i,{beforeExpr:!0,binop:u})}var xe={beforeExpr:!0},oe={startsExpr:!0},Ae={};function ge(i,u){return u===void 0&&(u={}),u.keyword=i,Ae[i]=new ue(i,u)}var P={num:new ue("num",oe),regexp:new ue("regexp",oe),string:new ue("string",oe),name:new ue("name",oe),privateId:new ue("privateId",oe),eof:new ue("eof"),bracketL:new ue("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ue("]"),braceL:new ue("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ue("}"),parenL:new ue("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ue(")"),comma:new ue(",",xe),semi:new ue(";",xe),colon:new ue(":",xe),dot:new ue("."),question:new ue("?",xe),questionDot:new ue("?."),arrow:new ue("=>",xe),template:new ue("template"),invalidTemplate:new ue("invalidTemplate"),ellipsis:new ue("...",xe),backQuote:new ue("`",oe),dollarBraceL:new ue("${",{beforeExpr:!0,startsExpr:!0}),eq:new ue("=",{beforeExpr:!0,isAssign:!0}),assign:new ue("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ue("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ue("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Z("||",1),logicalAND:Z("&&",2),bitwiseOR:Z("|",3),bitwiseXOR:Z("^",4),bitwiseAND:Z("&",5),equality:Z("==/!=/===/!==",6),relational:Z("</>/<=/>=",7),bitShift:Z("<</>>/>>>",8),plusMin:new ue("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Z("%",10),star:Z("*",10),slash:Z("/",10),starstar:new ue("**",{beforeExpr:!0}),coalesce:Z("??",1),_break:ge("break"),_case:ge("case",xe),_catch:ge("catch"),_continue:ge("continue"),_debugger:ge("debugger"),_default:ge("default",xe),_do:ge("do",{isLoop:!0,beforeExpr:!0}),_else:ge("else",xe),_finally:ge("finally"),_for:ge("for",{isLoop:!0}),_function:ge("function",oe),_if:ge("if"),_return:ge("return",xe),_switch:ge("switch"),_throw:ge("throw",xe),_try:ge("try"),_var:ge("var"),_const:ge("const"),_while:ge("while",{isLoop:!0}),_with:ge("with"),_new:ge("new",{beforeExpr:!0,startsExpr:!0}),_this:ge("this",oe),_super:ge("super",oe),_class:ge("class",oe),_extends:ge("extends",xe),_export:ge("export"),_import:ge("import",oe),_null:ge("null",oe),_true:ge("true",oe),_false:ge("false",oe),_in:ge("in",{beforeExpr:!0,binop:7}),_instanceof:ge("instanceof",{beforeExpr:!0,binop:7}),_typeof:ge("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ge("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ge("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},ie=/\r\n?|\n|\u2028|\u2029/,_t=new RegExp(ie.source,"g");function Fe(i){return i===10||i===13||i===8232||i===8233}function Vt(i,u,m){m===void 0&&(m=i.length);for(var I=u;I<m;I++){var N=i.charCodeAt(I);if(Fe(N))return I<m-1&&N===13&&i.charCodeAt(I+1)===10?I+2:I+1}return-1}var Wt=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,tt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,It=Object.prototype,ve=It.hasOwnProperty,fi=It.toString,re=Object.hasOwn||function(i,u){return ve.call(i,u)},yt=Array.isArray||function(i){return fi.call(i)==="[object Array]"},Nt=Object.create(null);function Ee(i){return Nt[i]||(Nt[i]=new RegExp("^(?:"+i.replace(/ /g,"|")+")$"))}function ut(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}var Pi=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Bt=function(u,m){this.line=u,this.column=m};Bt.prototype.offset=function(u){return new Bt(this.line,this.column+u)};var Tt=function(u,m,I){this.start=m,this.end=I,u.sourceFile!==null&&(this.source=u.sourceFile)};function ci(i,u){for(var m=1,I=0;;){var N=Vt(i,I,u);if(N<0)return new Bt(m,u-I);++m,I=N}}var Ze={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Gt=!1;function di(i){var u={};for(var m in Ze)u[m]=i&&re(i,m)?i[m]:Ze[m];if(u.ecmaVersion==="latest"?u.ecmaVersion=1e8:u.ecmaVersion==null?(!Gt&&typeof console=="object"&&console.warn&&(Gt=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),u.ecmaVersion=11):u.ecmaVersion>=2015&&(u.ecmaVersion-=2009),u.allowReserved==null&&(u.allowReserved=u.ecmaVersion<5),(!i||i.allowHashBang==null)&&(u.allowHashBang=u.ecmaVersion>=14),yt(u.onToken)){var I=u.onToken;u.onToken=function(N){return I.push(N)}}return yt(u.onComment)&&(u.onComment=pi(u,u.onComment)),u}function pi(i,u){return function(m,I,N,H,G,te){var he={type:m?"Block":"Line",value:I,start:N,end:H};i.locations&&(he.loc=new Tt(this,G,te)),i.ranges&&(he.range=[N,H]),u.push(he)}}var He=1,We=2,Ge=4,Ai=8,jt=16,Ei=32,ri=64,Ti=128,Zt=256,gi=He|We|Zt;function _i(i,u){return We|(i?Ge:0)|(u?Ai:0)}var Kt=0,Ye=1,wt=2,Ke=3,vi=4,Pe=5,e=function(u,m,I){this.options=u=di(u),this.sourceFile=u.sourceFile,this.keywords=Ee(bt[u.ecmaVersion>=6?6:u.sourceType==="module"?"5module":5]);var N="";u.allowReserved!==!0&&(N=Ue[u.ecmaVersion>=6?6:u.ecmaVersion===5?5:3],u.sourceType==="module"&&(N+=" await")),this.reservedWords=Ee(N);var H=(N?N+" ":"")+Ue.strict;this.reservedWordsStrict=Ee(H),this.reservedWordsStrictBind=Ee(H+" "+Ue.strictBind),this.input=String(m),this.containsEsc=!1,I?(this.pos=I,this.lineStart=this.input.lastIndexOf(`
`,I-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(ie).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=P.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=u.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&u.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(He),this.regexpState=null,this.privateNameStack=[]},t={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};e.prototype.parse=function(){var u=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(u)},t.inFunction.get=function(){return(this.currentVarScope().flags&We)>0},t.inGenerator.get=function(){return(this.currentVarScope().flags&Ai)>0&&!this.currentVarScope().inClassFieldInit},t.inAsync.get=function(){return(this.currentVarScope().flags&Ge)>0&&!this.currentVarScope().inClassFieldInit},t.canAwait.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var u=this.scopeStack[i];if(u.inClassFieldInit||u.flags&Zt)return!1;if(u.flags&We)return(u.flags&Ge)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},t.allowSuper.get=function(){var i=this.currentThisScope(),u=i.flags,m=i.inClassFieldInit;return(u&ri)>0||m||this.options.allowSuperOutsideMethod},t.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Ti)>0},t.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},t.allowNewDotTarget.get=function(){var i=this.currentThisScope(),u=i.flags,m=i.inClassFieldInit;return(u&(We|Zt))>0||m},t.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Zt)>0},e.extend=function(){for(var u=[],m=arguments.length;m--;)u[m]=arguments[m];for(var I=this,N=0;N<u.length;N++)I=u[N](I);return I},e.parse=function(u,m){return new this(m,u).parse()},e.parseExpressionAt=function(u,m,I){var N=new this(I,u,m);return N.nextToken(),N.parseExpression()},e.tokenizer=function(u,m){return new this(m,u)},Object.defineProperties(e.prototype,t);var n=e.prototype,r=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;n.strictDirective=function(i){if(this.options.ecmaVersion<5)return!1;for(;;){tt.lastIndex=i,i+=tt.exec(this.input)[0].length;var u=r.exec(this.input.slice(i));if(!u)return!1;if((u[1]||u[2])==="use strict"){tt.lastIndex=i+u[0].length;var m=tt.exec(this.input),I=m.index+m[0].length,N=this.input.charAt(I);return N===";"||N==="}"||ie.test(m[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(N)||N==="!"&&this.input.charAt(I+1)==="=")}i+=u[0].length,tt.lastIndex=i,i+=tt.exec(this.input)[0].length,this.input[i]===";"&&i++}},n.eat=function(i){return this.type===i?(this.next(),!0):!1},n.isContextual=function(i){return this.type===P.name&&this.value===i&&!this.containsEsc},n.eatContextual=function(i){return this.isContextual(i)?(this.next(),!0):!1},n.expectContextual=function(i){this.eatContextual(i)||this.unexpected()},n.canInsertSemicolon=function(){return this.type===P.eof||this.type===P.braceR||ie.test(this.input.slice(this.lastTokEnd,this.start))},n.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},n.semicolon=function(){!this.eat(P.semi)&&!this.insertSemicolon()&&this.unexpected()},n.afterTrailingComma=function(i,u){if(this.type===i)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),u||this.next(),!0},n.expect=function(i){this.eat(i)||this.unexpected()},n.unexpected=function(i){this.raise(i??this.start,"Unexpected token")};var s=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};n.checkPatternErrors=function(i,u){if(i){i.trailingComma>-1&&this.raiseRecoverable(i.trailingComma,"Comma is not permitted after the rest element");var m=u?i.parenthesizedAssign:i.parenthesizedBind;m>-1&&this.raiseRecoverable(m,u?"Assigning to rvalue":"Parenthesized pattern")}},n.checkExpressionErrors=function(i,u){if(!i)return!1;var m=i.shorthandAssign,I=i.doubleProto;if(!u)return m>=0||I>=0;m>=0&&this.raise(m,"Shorthand property assignments are valid only in destructuring patterns"),I>=0&&this.raiseRecoverable(I,"Redefinition of __proto__ property")},n.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},n.isSimpleAssignTarget=function(i){return i.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(i.expression):i.type==="Identifier"||i.type==="MemberExpression"};var a=e.prototype;a.parseTopLevel=function(i){var u=Object.create(null);for(i.body||(i.body=[]);this.type!==P.eof;){var m=this.parseStatement(null,!0,u);i.body.push(m)}if(this.inModule)for(var I=0,N=Object.keys(this.undefinedExports);I<N.length;I+=1){var H=N[I];this.raiseRecoverable(this.undefinedExports[H].start,"Export '"+H+"' is not defined")}return this.adaptDirectivePrologue(i.body),this.next(),i.sourceType=this.options.sourceType,this.finishNode(i,"Program")};var h={kind:"loop"},o={kind:"switch"};a.isLet=function(i){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;tt.lastIndex=this.pos;var u=tt.exec(this.input),m=this.pos+u[0].length,I=this.input.charCodeAt(m);if(I===91||I===92)return!0;if(i)return!1;if(I===123||I>55295&&I<56320)return!0;if(fe(I,!0)){for(var N=m+1;$(I=this.input.charCodeAt(N),!0);)++N;if(I===92||I>55295&&I<56320)return!0;var H=this.input.slice(m,N);if(!at.test(H))return!0}return!1},a.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;tt.lastIndex=this.pos;var i=tt.exec(this.input),u=this.pos+i[0].length,m;return!ie.test(this.input.slice(this.pos,u))&&this.input.slice(u,u+8)==="function"&&(u+8===this.input.length||!($(m=this.input.charCodeAt(u+8))||m>55295&&m<56320))},a.parseStatement=function(i,u,m){var I=this.type,N=this.startNode(),H;switch(this.isLet(i)&&(I=P._var,H="let"),I){case P._break:case P._continue:return this.parseBreakContinueStatement(N,I.keyword);case P._debugger:return this.parseDebuggerStatement(N);case P._do:return this.parseDoStatement(N);case P._for:return this.parseForStatement(N);case P._function:return i&&(this.strict||i!=="if"&&i!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(N,!1,!i);case P._class:return i&&this.unexpected(),this.parseClass(N,!0);case P._if:return this.parseIfStatement(N);case P._return:return this.parseReturnStatement(N);case P._switch:return this.parseSwitchStatement(N);case P._throw:return this.parseThrowStatement(N);case P._try:return this.parseTryStatement(N);case P._const:case P._var:return H=H||this.value,i&&H!=="var"&&this.unexpected(),this.parseVarStatement(N,H);case P._while:return this.parseWhileStatement(N);case P._with:return this.parseWithStatement(N);case P.braceL:return this.parseBlock(!0,N);case P.semi:return this.parseEmptyStatement(N);case P._export:case P._import:if(this.options.ecmaVersion>10&&I===P._import){tt.lastIndex=this.pos;var G=tt.exec(this.input),te=this.pos+G[0].length,he=this.input.charCodeAt(te);if(he===40||he===46)return this.parseExpressionStatement(N,this.parseExpression())}return this.options.allowImportExportEverywhere||(u||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),I===P._import?this.parseImport(N):this.parseExport(N,m);default:if(this.isAsyncFunction())return i&&this.unexpected(),this.next(),this.parseFunctionStatement(N,!0,!i);var Ie=this.value,Ne=this.parseExpression();return I===P.name&&Ne.type==="Identifier"&&this.eat(P.colon)?this.parseLabeledStatement(N,Ie,Ne,i):this.parseExpressionStatement(N,Ne)}},a.parseBreakContinueStatement=function(i,u){var m=u==="break";this.next(),this.eat(P.semi)||this.insertSemicolon()?i.label=null:this.type!==P.name?this.unexpected():(i.label=this.parseIdent(),this.semicolon());for(var I=0;I<this.labels.length;++I){var N=this.labels[I];if((i.label==null||N.name===i.label.name)&&(N.kind!=null&&(m||N.kind==="loop")||i.label&&m))break}return I===this.labels.length&&this.raise(i.start,"Unsyntactic "+u),this.finishNode(i,m?"BreakStatement":"ContinueStatement")},a.parseDebuggerStatement=function(i){return this.next(),this.semicolon(),this.finishNode(i,"DebuggerStatement")},a.parseDoStatement=function(i){return this.next(),this.labels.push(h),i.body=this.parseStatement("do"),this.labels.pop(),this.expect(P._while),i.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(P.semi):this.semicolon(),this.finishNode(i,"DoWhileStatement")},a.parseForStatement=function(i){this.next();var u=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(h),this.enterScope(0),this.expect(P.parenL),this.type===P.semi)return u>-1&&this.unexpected(u),this.parseFor(i,null);var m=this.isLet();if(this.type===P._var||this.type===P._const||m){var I=this.startNode(),N=m?"let":this.value;return this.next(),this.parseVar(I,!0,N),this.finishNode(I,"VariableDeclaration"),(this.type===P._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&I.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===P._in?u>-1&&this.unexpected(u):i.await=u>-1),this.parseForIn(i,I)):(u>-1&&this.unexpected(u),this.parseFor(i,I))}var H=this.isContextual("let"),G=!1,te=new s,he=this.parseExpression(u>-1?"await":!0,te);return this.type===P._in||(G=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===P._in?u>-1&&this.unexpected(u):i.await=u>-1),H&&G&&this.raise(he.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(he,!1,te),this.checkLValPattern(he),this.parseForIn(i,he)):(this.checkExpressionErrors(te,!0),u>-1&&this.unexpected(u),this.parseFor(i,he))},a.parseFunctionStatement=function(i,u,m){return this.next(),this.parseFunction(i,f|(m?0:g),!1,u)},a.parseIfStatement=function(i){return this.next(),i.test=this.parseParenExpression(),i.consequent=this.parseStatement("if"),i.alternate=this.eat(P._else)?this.parseStatement("if"):null,this.finishNode(i,"IfStatement")},a.parseReturnStatement=function(i){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(P.semi)||this.insertSemicolon()?i.argument=null:(i.argument=this.parseExpression(),this.semicolon()),this.finishNode(i,"ReturnStatement")},a.parseSwitchStatement=function(i){this.next(),i.discriminant=this.parseParenExpression(),i.cases=[],this.expect(P.braceL),this.labels.push(o),this.enterScope(0);for(var u,m=!1;this.type!==P.braceR;)if(this.type===P._case||this.type===P._default){var I=this.type===P._case;u&&this.finishNode(u,"SwitchCase"),i.cases.push(u=this.startNode()),u.consequent=[],this.next(),I?u.test=this.parseExpression():(m&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),m=!0,u.test=null),this.expect(P.colon)}else u||this.unexpected(),u.consequent.push(this.parseStatement(null));return this.exitScope(),u&&this.finishNode(u,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(i,"SwitchStatement")},a.parseThrowStatement=function(i){return this.next(),ie.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),i.argument=this.parseExpression(),this.semicolon(),this.finishNode(i,"ThrowStatement")};var l=[];a.parseCatchClauseParam=function(){var i=this.parseBindingAtom(),u=i.type==="Identifier";return this.enterScope(u?Ei:0),this.checkLValPattern(i,u?vi:wt),this.expect(P.parenR),i},a.parseTryStatement=function(i){if(this.next(),i.block=this.parseBlock(),i.handler=null,this.type===P._catch){var u=this.startNode();this.next(),this.eat(P.parenL)?u.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),u.param=null,this.enterScope(0)),u.body=this.parseBlock(!1),this.exitScope(),i.handler=this.finishNode(u,"CatchClause")}return i.finalizer=this.eat(P._finally)?this.parseBlock():null,!i.handler&&!i.finalizer&&this.raise(i.start,"Missing catch or finally clause"),this.finishNode(i,"TryStatement")},a.parseVarStatement=function(i,u,m){return this.next(),this.parseVar(i,!1,u,m),this.semicolon(),this.finishNode(i,"VariableDeclaration")},a.parseWhileStatement=function(i){return this.next(),i.test=this.parseParenExpression(),this.labels.push(h),i.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(i,"WhileStatement")},a.parseWithStatement=function(i){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),i.object=this.parseParenExpression(),i.body=this.parseStatement("with"),this.finishNode(i,"WithStatement")},a.parseEmptyStatement=function(i){return this.next(),this.finishNode(i,"EmptyStatement")},a.parseLabeledStatement=function(i,u,m,I){for(var N=0,H=this.labels;N<H.length;N+=1){var G=H[N];G.name===u&&this.raise(m.start,"Label '"+u+"' is already declared")}for(var te=this.type.isLoop?"loop":this.type===P._switch?"switch":null,he=this.labels.length-1;he>=0;he--){var Ie=this.labels[he];if(Ie.statementStart===i.start)Ie.statementStart=this.start,Ie.kind=te;else break}return this.labels.push({name:u,kind:te,statementStart:this.start}),i.body=this.parseStatement(I?I.indexOf("label")===-1?I+"label":I:"label"),this.labels.pop(),i.label=m,this.finishNode(i,"LabeledStatement")},a.parseExpressionStatement=function(i,u){return i.expression=u,this.semicolon(),this.finishNode(i,"ExpressionStatement")},a.parseBlock=function(i,u,m){for(i===void 0&&(i=!0),u===void 0&&(u=this.startNode()),u.body=[],this.expect(P.braceL),i&&this.enterScope(0);this.type!==P.braceR;){var I=this.parseStatement(null);u.body.push(I)}return m&&(this.strict=!1),this.next(),i&&this.exitScope(),this.finishNode(u,"BlockStatement")},a.parseFor=function(i,u){return i.init=u,this.expect(P.semi),i.test=this.type===P.semi?null:this.parseExpression(),this.expect(P.semi),i.update=this.type===P.parenR?null:this.parseExpression(),this.expect(P.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,"ForStatement")},a.parseForIn=function(i,u){var m=this.type===P._in;return this.next(),u.type==="VariableDeclaration"&&u.declarations[0].init!=null&&(!m||this.options.ecmaVersion<8||this.strict||u.kind!=="var"||u.declarations[0].id.type!=="Identifier")&&this.raise(u.start,(m?"for-in":"for-of")+" loop variable declaration may not have an initializer"),i.left=u,i.right=m?this.parseExpression():this.parseMaybeAssign(),this.expect(P.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,m?"ForInStatement":"ForOfStatement")},a.parseVar=function(i,u,m,I){for(i.declarations=[],i.kind=m;;){var N=this.startNode();if(this.parseVarId(N,m),this.eat(P.eq)?N.init=this.parseMaybeAssign(u):!I&&m==="const"&&!(this.type===P._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!I&&N.id.type!=="Identifier"&&!(u&&(this.type===P._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):N.init=null,i.declarations.push(this.finishNode(N,"VariableDeclarator")),!this.eat(P.comma))break}return i},a.parseVarId=function(i,u){i.id=this.parseBindingAtom(),this.checkLValPattern(i.id,u==="var"?Ye:wt,!1)};var f=1,g=2,v=4;a.parseFunction=function(i,u,m,I,N){this.initFunction(i),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!I)&&(this.type===P.star&&u&g&&this.unexpected(),i.generator=this.eat(P.star)),this.options.ecmaVersion>=8&&(i.async=!!I),u&f&&(i.id=u&v&&this.type!==P.name?null:this.parseIdent(),i.id&&!(u&g)&&this.checkLValSimple(i.id,this.strict||i.generator||i.async?this.treatFunctionsAsVar?Ye:wt:Ke));var H=this.yieldPos,G=this.awaitPos,te=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(_i(i.async,i.generator)),u&f||(i.id=this.type===P.name?this.parseIdent():null),this.parseFunctionParams(i),this.parseFunctionBody(i,m,!1,N),this.yieldPos=H,this.awaitPos=G,this.awaitIdentPos=te,this.finishNode(i,u&f?"FunctionDeclaration":"FunctionExpression")},a.parseFunctionParams=function(i){this.expect(P.parenL),i.params=this.parseBindingList(P.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},a.parseClass=function(i,u){this.next();var m=this.strict;this.strict=!0,this.parseClassId(i,u),this.parseClassSuper(i);var I=this.enterClassBody(),N=this.startNode(),H=!1;for(N.body=[],this.expect(P.braceL);this.type!==P.braceR;){var G=this.parseClassElement(i.superClass!==null);G&&(N.body.push(G),G.type==="MethodDefinition"&&G.kind==="constructor"?(H&&this.raiseRecoverable(G.start,"Duplicate constructor in the same class"),H=!0):G.key&&G.key.type==="PrivateIdentifier"&&p(I,G)&&this.raiseRecoverable(G.key.start,"Identifier '#"+G.key.name+"' has already been declared"))}return this.strict=m,this.next(),i.body=this.finishNode(N,"ClassBody"),this.exitClassBody(),this.finishNode(i,u?"ClassDeclaration":"ClassExpression")},a.parseClassElement=function(i){if(this.eat(P.semi))return null;var u=this.options.ecmaVersion,m=this.startNode(),I="",N=!1,H=!1,G="method",te=!1;if(this.eatContextual("static")){if(u>=13&&this.eat(P.braceL))return this.parseClassStaticBlock(m),m;this.isClassElementNameStart()||this.type===P.star?te=!0:I="static"}if(m.static=te,!I&&u>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===P.star)&&!this.canInsertSemicolon()?H=!0:I="async"),!I&&(u>=9||!H)&&this.eat(P.star)&&(N=!0),!I&&!H&&!N){var he=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?G=he:I=he)}if(I?(m.computed=!1,m.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),m.key.name=I,this.finishNode(m.key,"Identifier")):this.parseClassElementName(m),u<13||this.type===P.parenL||G!=="method"||N||H){var Ie=!m.static&&d(m,"constructor"),Ne=Ie&&i;Ie&&G!=="method"&&this.raise(m.key.start,"Constructor can't have get/set modifier"),m.kind=Ie?"constructor":G,this.parseClassMethod(m,N,H,Ne)}else this.parseClassField(m);return m},a.isClassElementNameStart=function(){return this.type===P.name||this.type===P.privateId||this.type===P.num||this.type===P.string||this.type===P.bracketL||this.type.keyword},a.parseClassElementName=function(i){this.type===P.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),i.computed=!1,i.key=this.parsePrivateIdent()):this.parsePropertyName(i)},a.parseClassMethod=function(i,u,m,I){var N=i.key;i.kind==="constructor"?(u&&this.raise(N.start,"Constructor can't be a generator"),m&&this.raise(N.start,"Constructor can't be an async method")):i.static&&d(i,"prototype")&&this.raise(N.start,"Classes may not have a static property named prototype");var H=i.value=this.parseMethod(u,m,I);return i.kind==="get"&&H.params.length!==0&&this.raiseRecoverable(H.start,"getter should have no params"),i.kind==="set"&&H.params.length!==1&&this.raiseRecoverable(H.start,"setter should have exactly one param"),i.kind==="set"&&H.params[0].type==="RestElement"&&this.raiseRecoverable(H.params[0].start,"Setter cannot use rest params"),this.finishNode(i,"MethodDefinition")},a.parseClassField=function(i){if(d(i,"constructor")?this.raise(i.key.start,"Classes can't have a field named 'constructor'"):i.static&&d(i,"prototype")&&this.raise(i.key.start,"Classes can't have a static field named 'prototype'"),this.eat(P.eq)){var u=this.currentThisScope(),m=u.inClassFieldInit;u.inClassFieldInit=!0,i.value=this.parseMaybeAssign(),u.inClassFieldInit=m}else i.value=null;return this.semicolon(),this.finishNode(i,"PropertyDefinition")},a.parseClassStaticBlock=function(i){i.body=[];var u=this.labels;for(this.labels=[],this.enterScope(Zt|ri);this.type!==P.braceR;){var m=this.parseStatement(null);i.body.push(m)}return this.next(),this.exitScope(),this.labels=u,this.finishNode(i,"StaticBlock")},a.parseClassId=function(i,u){this.type===P.name?(i.id=this.parseIdent(),u&&this.checkLValSimple(i.id,wt,!1)):(u===!0&&this.unexpected(),i.id=null)},a.parseClassSuper=function(i){i.superClass=this.eat(P._extends)?this.parseExprSubscripts(null,!1):null},a.enterClassBody=function(){var i={declared:Object.create(null),used:[]};return this.privateNameStack.push(i),i.declared},a.exitClassBody=function(){var i=this.privateNameStack.pop(),u=i.declared,m=i.used;if(this.options.checkPrivateFields)for(var I=this.privateNameStack.length,N=I===0?null:this.privateNameStack[I-1],H=0;H<m.length;++H){var G=m[H];re(u,G.name)||(N?N.used.push(G):this.raiseRecoverable(G.start,"Private field '#"+G.name+"' must be declared in an enclosing class"))}};function p(i,u){var m=u.key.name,I=i[m],N="true";return u.type==="MethodDefinition"&&(u.kind==="get"||u.kind==="set")&&(N=(u.static?"s":"i")+u.kind),I==="iget"&&N==="iset"||I==="iset"&&N==="iget"||I==="sget"&&N==="sset"||I==="sset"&&N==="sget"?(i[m]="true",!1):I?!0:(i[m]=N,!1)}function d(i,u){var m=i.computed,I=i.key;return!m&&(I.type==="Identifier"&&I.name===u||I.type==="Literal"&&I.value===u)}a.parseExportAllDeclaration=function(i,u){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(i.exported=this.parseModuleExportName(),this.checkExport(u,i.exported,this.lastTokStart)):i.exported=null),this.expectContextual("from"),this.type!==P.string&&this.unexpected(),i.source=this.parseExprAtom(),this.semicolon(),this.finishNode(i,"ExportAllDeclaration")},a.parseExport=function(i,u){if(this.next(),this.eat(P.star))return this.parseExportAllDeclaration(i,u);if(this.eat(P._default))return this.checkExport(u,"default",this.lastTokStart),i.declaration=this.parseExportDefaultDeclaration(),this.finishNode(i,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())i.declaration=this.parseExportDeclaration(i),i.declaration.type==="VariableDeclaration"?this.checkVariableExport(u,i.declaration.declarations):this.checkExport(u,i.declaration.id,i.declaration.id.start),i.specifiers=[],i.source=null;else{if(i.declaration=null,i.specifiers=this.parseExportSpecifiers(u),this.eatContextual("from"))this.type!==P.string&&this.unexpected(),i.source=this.parseExprAtom();else{for(var m=0,I=i.specifiers;m<I.length;m+=1){var N=I[m];this.checkUnreserved(N.local),this.checkLocalExport(N.local),N.local.type==="Literal"&&this.raise(N.local.start,"A string literal cannot be used as an exported binding without `from`.")}i.source=null}this.semicolon()}return this.finishNode(i,"ExportNamedDeclaration")},a.parseExportDeclaration=function(i){return this.parseStatement(null)},a.parseExportDefaultDeclaration=function(){var i;if(this.type===P._function||(i=this.isAsyncFunction())){var u=this.startNode();return this.next(),i&&this.next(),this.parseFunction(u,f|v,!1,i)}else if(this.type===P._class){var m=this.startNode();return this.parseClass(m,"nullableID")}else{var I=this.parseMaybeAssign();return this.semicolon(),I}},a.checkExport=function(i,u,m){i&&(typeof u!="string"&&(u=u.type==="Identifier"?u.name:u.value),re(i,u)&&this.raiseRecoverable(m,"Duplicate export '"+u+"'"),i[u]=!0)},a.checkPatternExport=function(i,u){var m=u.type;if(m==="Identifier")this.checkExport(i,u,u.start);else if(m==="ObjectPattern")for(var I=0,N=u.properties;I<N.length;I+=1){var H=N[I];this.checkPatternExport(i,H)}else if(m==="ArrayPattern")for(var G=0,te=u.elements;G<te.length;G+=1){var he=te[G];he&&this.checkPatternExport(i,he)}else m==="Property"?this.checkPatternExport(i,u.value):m==="AssignmentPattern"?this.checkPatternExport(i,u.left):m==="RestElement"&&this.checkPatternExport(i,u.argument)},a.checkVariableExport=function(i,u){if(i)for(var m=0,I=u;m<I.length;m+=1){var N=I[m];this.checkPatternExport(i,N.id)}},a.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},a.parseExportSpecifier=function(i){var u=this.startNode();return u.local=this.parseModuleExportName(),u.exported=this.eatContextual("as")?this.parseModuleExportName():u.local,this.checkExport(i,u.exported,u.exported.start),this.finishNode(u,"ExportSpecifier")},a.parseExportSpecifiers=function(i){var u=[],m=!0;for(this.expect(P.braceL);!this.eat(P.braceR);){if(m)m=!1;else if(this.expect(P.comma),this.afterTrailingComma(P.braceR))break;u.push(this.parseExportSpecifier(i))}return u},a.parseImport=function(i){return this.next(),this.type===P.string?(i.specifiers=l,i.source=this.parseExprAtom()):(i.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),i.source=this.type===P.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(i,"ImportDeclaration")},a.parseImportSpecifier=function(){var i=this.startNode();return i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,wt),this.finishNode(i,"ImportSpecifier")},a.parseImportDefaultSpecifier=function(){var i=this.startNode();return i.local=this.parseIdent(),this.checkLValSimple(i.local,wt),this.finishNode(i,"ImportDefaultSpecifier")},a.parseImportNamespaceSpecifier=function(){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,wt),this.finishNode(i,"ImportNamespaceSpecifier")},a.parseImportSpecifiers=function(){var i=[],u=!0;if(this.type===P.name&&(i.push(this.parseImportDefaultSpecifier()),!this.eat(P.comma)))return i;if(this.type===P.star)return i.push(this.parseImportNamespaceSpecifier()),i;for(this.expect(P.braceL);!this.eat(P.braceR);){if(u)u=!1;else if(this.expect(P.comma),this.afterTrailingComma(P.braceR))break;i.push(this.parseImportSpecifier())}return i},a.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===P.string){var i=this.parseLiteral(this.value);return Pi.test(i.value)&&this.raise(i.start,"An export name cannot include a lone surrogate."),i}return this.parseIdent(!0)},a.adaptDirectivePrologue=function(i){for(var u=0;u<i.length&&this.isDirectiveCandidate(i[u]);++u)i[u].directive=i[u].expression.raw.slice(1,-1)},a.isDirectiveCandidate=function(i){return this.options.ecmaVersion>=5&&i.type==="ExpressionStatement"&&i.expression.type==="Literal"&&typeof i.expression.value=="string"&&(this.input[i.start]==='"'||this.input[i.start]==="'")};var C=e.prototype;C.toAssignable=function(i,u,m){if(this.options.ecmaVersion>=6&&i)switch(i.type){case"Identifier":this.inAsync&&i.name==="await"&&this.raise(i.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":i.type="ObjectPattern",m&&this.checkPatternErrors(m,!0);for(var I=0,N=i.properties;I<N.length;I+=1){var H=N[I];this.toAssignable(H,u),H.type==="RestElement"&&(H.argument.type==="ArrayPattern"||H.argument.type==="ObjectPattern")&&this.raise(H.argument.start,"Unexpected token")}break;case"Property":i.kind!=="init"&&this.raise(i.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(i.value,u);break;case"ArrayExpression":i.type="ArrayPattern",m&&this.checkPatternErrors(m,!0),this.toAssignableList(i.elements,u);break;case"SpreadElement":i.type="RestElement",this.toAssignable(i.argument,u),i.argument.type==="AssignmentPattern"&&this.raise(i.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":i.operator!=="="&&this.raise(i.left.end,"Only '=' operator can be used for specifying default value."),i.type="AssignmentPattern",delete i.operator,this.toAssignable(i.left,u);break;case"ParenthesizedExpression":this.toAssignable(i.expression,u,m);break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!u)break;default:this.raise(i.start,"Assigning to rvalue")}else m&&this.checkPatternErrors(m,!0);return i},C.toAssignableList=function(i,u){for(var m=i.length,I=0;I<m;I++){var N=i[I];N&&this.toAssignable(N,u)}if(m){var H=i[m-1];this.options.ecmaVersion===6&&u&&H&&H.type==="RestElement"&&H.argument.type!=="Identifier"&&this.unexpected(H.argument.start)}return i},C.parseSpread=function(i){var u=this.startNode();return this.next(),u.argument=this.parseMaybeAssign(!1,i),this.finishNode(u,"SpreadElement")},C.parseRestBinding=function(){var i=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==P.name&&this.unexpected(),i.argument=this.parseBindingAtom(),this.finishNode(i,"RestElement")},C.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case P.bracketL:var i=this.startNode();return this.next(),i.elements=this.parseBindingList(P.bracketR,!0,!0),this.finishNode(i,"ArrayPattern");case P.braceL:return this.parseObj(!0)}return this.parseIdent()},C.parseBindingList=function(i,u,m,I){for(var N=[],H=!0;!this.eat(i);)if(H?H=!1:this.expect(P.comma),u&&this.type===P.comma)N.push(null);else{if(m&&this.afterTrailingComma(i))break;if(this.type===P.ellipsis){var G=this.parseRestBinding();this.parseBindingListItem(G),N.push(G),this.type===P.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(i);break}else N.push(this.parseAssignableListItem(I))}return N},C.parseAssignableListItem=function(i){var u=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(u),u},C.parseBindingListItem=function(i){return i},C.parseMaybeDefault=function(i,u,m){if(m=m||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(P.eq))return m;var I=this.startNodeAt(i,u);return I.left=m,I.right=this.parseMaybeAssign(),this.finishNode(I,"AssignmentPattern")},C.checkLValSimple=function(i,u,m){u===void 0&&(u=Kt);var I=u!==Kt;switch(i.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(i.name)&&this.raiseRecoverable(i.start,(I?"Binding ":"Assigning to ")+i.name+" in strict mode"),I&&(u===wt&&i.name==="let"&&this.raiseRecoverable(i.start,"let is disallowed as a lexically bound name"),m&&(re(m,i.name)&&this.raiseRecoverable(i.start,"Argument name clash"),m[i.name]=!0),u!==Pe&&this.declareName(i.name,u,i.start));break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":I&&this.raiseRecoverable(i.start,"Binding member expression");break;case"ParenthesizedExpression":return I&&this.raiseRecoverable(i.start,"Binding parenthesized expression"),this.checkLValSimple(i.expression,u,m);default:this.raise(i.start,(I?"Binding":"Assigning to")+" rvalue")}},C.checkLValPattern=function(i,u,m){switch(u===void 0&&(u=Kt),i.type){case"ObjectPattern":for(var I=0,N=i.properties;I<N.length;I+=1){var H=N[I];this.checkLValInnerPattern(H,u,m)}break;case"ArrayPattern":for(var G=0,te=i.elements;G<te.length;G+=1){var he=te[G];he&&this.checkLValInnerPattern(he,u,m)}break;default:this.checkLValSimple(i,u,m)}},C.checkLValInnerPattern=function(i,u,m){switch(u===void 0&&(u=Kt),i.type){case"Property":this.checkLValInnerPattern(i.value,u,m);break;case"AssignmentPattern":this.checkLValPattern(i.left,u,m);break;case"RestElement":this.checkLValPattern(i.argument,u,m);break;default:this.checkLValPattern(i,u,m)}};var b=function(u,m,I,N,H){this.token=u,this.isExpr=!!m,this.preserveSpace=!!I,this.override=N,this.generator=!!H},w={b_stat:new b("{",!1),b_expr:new b("{",!0),b_tmpl:new b("${",!1),p_stat:new b("(",!1),p_expr:new b("(",!0),q_tmpl:new b("`",!0,!0,function(i){return i.tryReadTemplateToken()}),f_stat:new b("function",!1),f_expr:new b("function",!0),f_expr_gen:new b("function",!0,!1,null,!0),f_gen:new b("function",!1,!1,null,!0)},_=e.prototype;_.initialContext=function(){return[w.b_stat]},_.curContext=function(){return this.context[this.context.length-1]},_.braceIsBlock=function(i){var u=this.curContext();return u===w.f_expr||u===w.f_stat?!0:i===P.colon&&(u===w.b_stat||u===w.b_expr)?!u.isExpr:i===P._return||i===P.name&&this.exprAllowed?ie.test(this.input.slice(this.lastTokEnd,this.start)):i===P._else||i===P.semi||i===P.eof||i===P.parenR||i===P.arrow?!0:i===P.braceL?u===w.b_stat:i===P._var||i===P._const||i===P.name?!1:!this.exprAllowed},_.inGeneratorContext=function(){for(var i=this.context.length-1;i>=1;i--){var u=this.context[i];if(u.token==="function")return u.generator}return!1},_.updateContext=function(i){var u,m=this.type;m.keyword&&i===P.dot?this.exprAllowed=!1:(u=m.updateContext)?u.call(this,i):this.exprAllowed=m.beforeExpr},_.overrideContext=function(i){this.curContext()!==i&&(this.context[this.context.length-1]=i)},P.parenR.updateContext=P.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var i=this.context.pop();i===w.b_stat&&this.curContext().token==="function"&&(i=this.context.pop()),this.exprAllowed=!i.isExpr},P.braceL.updateContext=function(i){this.context.push(this.braceIsBlock(i)?w.b_stat:w.b_expr),this.exprAllowed=!0},P.dollarBraceL.updateContext=function(){this.context.push(w.b_tmpl),this.exprAllowed=!0},P.parenL.updateContext=function(i){var u=i===P._if||i===P._for||i===P._with||i===P._while;this.context.push(u?w.p_stat:w.p_expr),this.exprAllowed=!0},P.incDec.updateContext=function(){},P._function.updateContext=P._class.updateContext=function(i){i.beforeExpr&&i!==P._else&&!(i===P.semi&&this.curContext()!==w.p_stat)&&!(i===P._return&&ie.test(this.input.slice(this.lastTokEnd,this.start)))&&!((i===P.colon||i===P.braceL)&&this.curContext()===w.b_stat)?this.context.push(w.f_expr):this.context.push(w.f_stat),this.exprAllowed=!1},P.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},P.backQuote.updateContext=function(){this.curContext()===w.q_tmpl?this.context.pop():this.context.push(w.q_tmpl),this.exprAllowed=!1},P.star.updateContext=function(i){if(i===P._function){var u=this.context.length-1;this.context[u]===w.f_expr?this.context[u]=w.f_expr_gen:this.context[u]=w.f_gen}this.exprAllowed=!0},P.name.updateContext=function(i){var u=!1;this.options.ecmaVersion>=6&&i!==P.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(u=!0),this.exprAllowed=u};var x=e.prototype;x.checkPropClash=function(i,u,m){if(!(this.options.ecmaVersion>=9&&i.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(i.computed||i.method||i.shorthand))){var I=i.key,N;switch(I.type){case"Identifier":N=I.name;break;case"Literal":N=String(I.value);break;default:return}var H=i.kind;if(this.options.ecmaVersion>=6){N==="__proto__"&&H==="init"&&(u.proto&&(m?m.doubleProto<0&&(m.doubleProto=I.start):this.raiseRecoverable(I.start,"Redefinition of __proto__ property")),u.proto=!0);return}N="$"+N;var G=u[N];if(G){var te;H==="init"?te=this.strict&&G.init||G.get||G.set:te=G.init||G[H],te&&this.raiseRecoverable(I.start,"Redefinition of property")}else G=u[N]={init:!1,get:!1,set:!1};G[H]=!0}},x.parseExpression=function(i,u){var m=this.start,I=this.startLoc,N=this.parseMaybeAssign(i,u);if(this.type===P.comma){var H=this.startNodeAt(m,I);for(H.expressions=[N];this.eat(P.comma);)H.expressions.push(this.parseMaybeAssign(i,u));return this.finishNode(H,"SequenceExpression")}return N},x.parseMaybeAssign=function(i,u,m){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(i);this.exprAllowed=!1}var I=!1,N=-1,H=-1,G=-1;u?(N=u.parenthesizedAssign,H=u.trailingComma,G=u.doubleProto,u.parenthesizedAssign=u.trailingComma=-1):(u=new s,I=!0);var te=this.start,he=this.startLoc;(this.type===P.parenL||this.type===P.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=i==="await");var Ie=this.parseMaybeConditional(i,u);if(m&&(Ie=m.call(this,Ie,te,he)),this.type.isAssign){var Ne=this.startNodeAt(te,he);return Ne.operator=this.value,this.type===P.eq&&(Ie=this.toAssignable(Ie,!1,u)),I||(u.parenthesizedAssign=u.trailingComma=u.doubleProto=-1),u.shorthandAssign>=Ie.start&&(u.shorthandAssign=-1),this.type===P.eq?this.checkLValPattern(Ie):this.checkLValSimple(Ie),Ne.left=Ie,this.next(),Ne.right=this.parseMaybeAssign(i),G>-1&&(u.doubleProto=G),this.finishNode(Ne,"AssignmentExpression")}else I&&this.checkExpressionErrors(u,!0);return N>-1&&(u.parenthesizedAssign=N),H>-1&&(u.trailingComma=H),Ie},x.parseMaybeConditional=function(i,u){var m=this.start,I=this.startLoc,N=this.parseExprOps(i,u);if(this.checkExpressionErrors(u))return N;if(this.eat(P.question)){var H=this.startNodeAt(m,I);return H.test=N,H.consequent=this.parseMaybeAssign(),this.expect(P.colon),H.alternate=this.parseMaybeAssign(i),this.finishNode(H,"ConditionalExpression")}return N},x.parseExprOps=function(i,u){var m=this.start,I=this.startLoc,N=this.parseMaybeUnary(u,!1,!1,i);return this.checkExpressionErrors(u)||N.start===m&&N.type==="ArrowFunctionExpression"?N:this.parseExprOp(N,m,I,-1,i)},x.parseExprOp=function(i,u,m,I,N){var H=this.type.binop;if(H!=null&&(!N||this.type!==P._in)&&H>I){var G=this.type===P.logicalOR||this.type===P.logicalAND,te=this.type===P.coalesce;te&&(H=P.logicalAND.binop);var he=this.value;this.next();var Ie=this.start,Ne=this.startLoc,et=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,N),Ie,Ne,H,N),Rt=this.buildBinary(u,m,i,et,he,G||te);return(G&&this.type===P.coalesce||te&&(this.type===P.logicalOR||this.type===P.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Rt,u,m,I,N)}return i},x.buildBinary=function(i,u,m,I,N,H){I.type==="PrivateIdentifier"&&this.raise(I.start,"Private identifier can only be left side of binary expression");var G=this.startNodeAt(i,u);return G.left=m,G.operator=N,G.right=I,this.finishNode(G,H?"LogicalExpression":"BinaryExpression")},x.parseMaybeUnary=function(i,u,m,I){var N=this.start,H=this.startLoc,G;if(this.isContextual("await")&&this.canAwait)G=this.parseAwait(I),u=!0;else if(this.type.prefix){var te=this.startNode(),he=this.type===P.incDec;te.operator=this.value,te.prefix=!0,this.next(),te.argument=this.parseMaybeUnary(null,!0,he,I),this.checkExpressionErrors(i,!0),he?this.checkLValSimple(te.argument):this.strict&&te.operator==="delete"&&te.argument.type==="Identifier"?this.raiseRecoverable(te.start,"Deleting local variable in strict mode"):te.operator==="delete"&&c(te.argument)?this.raiseRecoverable(te.start,"Private fields can not be deleted"):u=!0,G=this.finishNode(te,he?"UpdateExpression":"UnaryExpression")}else if(!u&&this.type===P.privateId)(I||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),G=this.parsePrivateIdent(),this.type!==P._in&&this.unexpected();else{if(G=this.parseExprSubscripts(i,I),this.checkExpressionErrors(i))return G;for(;this.type.postfix&&!this.canInsertSemicolon();){var Ie=this.startNodeAt(N,H);Ie.operator=this.value,Ie.prefix=!1,Ie.argument=G,this.checkLValSimple(G),this.next(),G=this.finishNode(Ie,"UpdateExpression")}}if(!m&&this.eat(P.starstar))if(u)this.unexpected(this.lastTokStart);else return this.buildBinary(N,H,G,this.parseMaybeUnary(null,!1,!1,I),"**",!1);else return G};function c(i){return i.type==="MemberExpression"&&i.property.type==="PrivateIdentifier"||i.type==="ChainExpression"&&c(i.expression)}x.parseExprSubscripts=function(i,u){var m=this.start,I=this.startLoc,N=this.parseExprAtom(i,u);if(N.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return N;var H=this.parseSubscripts(N,m,I,!1,u);return i&&H.type==="MemberExpression"&&(i.parenthesizedAssign>=H.start&&(i.parenthesizedAssign=-1),i.parenthesizedBind>=H.start&&(i.parenthesizedBind=-1),i.trailingComma>=H.start&&(i.trailingComma=-1)),H},x.parseSubscripts=function(i,u,m,I,N){for(var H=this.options.ecmaVersion>=8&&i.type==="Identifier"&&i.name==="async"&&this.lastTokEnd===i.end&&!this.canInsertSemicolon()&&i.end-i.start===5&&this.potentialArrowAt===i.start,G=!1;;){var te=this.parseSubscript(i,u,m,I,H,G,N);if(te.optional&&(G=!0),te===i||te.type==="ArrowFunctionExpression"){if(G){var he=this.startNodeAt(u,m);he.expression=te,te=this.finishNode(he,"ChainExpression")}return te}i=te}},x.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(P.arrow)},x.parseSubscriptAsyncArrow=function(i,u,m,I){return this.parseArrowExpression(this.startNodeAt(i,u),m,!0,I)},x.parseSubscript=function(i,u,m,I,N,H,G){var te=this.options.ecmaVersion>=11,he=te&&this.eat(P.questionDot);I&&he&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Ie=this.eat(P.bracketL);if(Ie||he&&this.type!==P.parenL&&this.type!==P.backQuote||this.eat(P.dot)){var Ne=this.startNodeAt(u,m);Ne.object=i,Ie?(Ne.property=this.parseExpression(),this.expect(P.bracketR)):this.type===P.privateId&&i.type!=="Super"?Ne.property=this.parsePrivateIdent():Ne.property=this.parseIdent(this.options.allowReserved!=="never"),Ne.computed=!!Ie,te&&(Ne.optional=he),i=this.finishNode(Ne,"MemberExpression")}else if(!I&&this.eat(P.parenL)){var et=new s,Rt=this.yieldPos,$t=this.awaitPos,Ft=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var ai=this.parseExprList(P.parenR,this.options.ecmaVersion>=8,!1,et);if(N&&!he&&this.shouldParseAsyncArrow())return this.checkPatternErrors(et,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Rt,this.awaitPos=$t,this.awaitIdentPos=Ft,this.parseSubscriptAsyncArrow(u,m,ai,G);this.checkExpressionErrors(et,!0),this.yieldPos=Rt||this.yieldPos,this.awaitPos=$t||this.awaitPos,this.awaitIdentPos=Ft||this.awaitIdentPos;var Dt=this.startNodeAt(u,m);Dt.callee=i,Dt.arguments=ai,te&&(Dt.optional=he),i=this.finishNode(Dt,"CallExpression")}else if(this.type===P.backQuote){(he||H)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var qt=this.startNodeAt(u,m);qt.tag=i,qt.quasi=this.parseTemplate({isTagged:!0}),i=this.finishNode(qt,"TaggedTemplateExpression")}return i},x.parseExprAtom=function(i,u,m){this.type===P.slash&&this.readRegexp();var I,N=this.potentialArrowAt===this.start;switch(this.type){case P._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),I=this.startNode(),this.next(),this.type===P.parenL&&!this.allowDirectSuper&&this.raise(I.start,"super() call outside constructor of a subclass"),this.type!==P.dot&&this.type!==P.bracketL&&this.type!==P.parenL&&this.unexpected(),this.finishNode(I,"Super");case P._this:return I=this.startNode(),this.next(),this.finishNode(I,"ThisExpression");case P.name:var H=this.start,G=this.startLoc,te=this.containsEsc,he=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!te&&he.name==="async"&&!this.canInsertSemicolon()&&this.eat(P._function))return this.overrideContext(w.f_expr),this.parseFunction(this.startNodeAt(H,G),0,!1,!0,u);if(N&&!this.canInsertSemicolon()){if(this.eat(P.arrow))return this.parseArrowExpression(this.startNodeAt(H,G),[he],!1,u);if(this.options.ecmaVersion>=8&&he.name==="async"&&this.type===P.name&&!te&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return he=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(P.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(H,G),[he],!0,u)}return he;case P.regexp:var Ie=this.value;return I=this.parseLiteral(Ie.value),I.regex={pattern:Ie.pattern,flags:Ie.flags},I;case P.num:case P.string:return this.parseLiteral(this.value);case P._null:case P._true:case P._false:return I=this.startNode(),I.value=this.type===P._null?null:this.type===P._true,I.raw=this.type.keyword,this.next(),this.finishNode(I,"Literal");case P.parenL:var Ne=this.start,et=this.parseParenAndDistinguishExpression(N,u);return i&&(i.parenthesizedAssign<0&&!this.isSimpleAssignTarget(et)&&(i.parenthesizedAssign=Ne),i.parenthesizedBind<0&&(i.parenthesizedBind=Ne)),et;case P.bracketL:return I=this.startNode(),this.next(),I.elements=this.parseExprList(P.bracketR,!0,!0,i),this.finishNode(I,"ArrayExpression");case P.braceL:return this.overrideContext(w.b_expr),this.parseObj(!1,i);case P._function:return I=this.startNode(),this.next(),this.parseFunction(I,0);case P._class:return this.parseClass(this.startNode(),!1);case P._new:return this.parseNew();case P.backQuote:return this.parseTemplate();case P._import:return this.options.ecmaVersion>=11?this.parseExprImport(m):this.unexpected();default:return this.parseExprAtomDefault()}},x.parseExprAtomDefault=function(){this.unexpected()},x.parseExprImport=function(i){var u=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===P.parenL&&!i)return this.parseDynamicImport(u);if(this.type===P.dot){var m=this.startNodeAt(u.start,u.loc&&u.loc.start);return m.name="import",u.meta=this.finishNode(m,"Identifier"),this.parseImportMeta(u)}else this.unexpected()},x.parseDynamicImport=function(i){if(this.next(),i.source=this.parseMaybeAssign(),!this.eat(P.parenR)){var u=this.start;this.eat(P.comma)&&this.eat(P.parenR)?this.raiseRecoverable(u,"Trailing comma is not allowed in import()"):this.unexpected(u)}return this.finishNode(i,"ImportExpression")},x.parseImportMeta=function(i){this.next();var u=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="meta"&&this.raiseRecoverable(i.property.start,"The only valid meta property for import is 'import.meta'"),u&&this.raiseRecoverable(i.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(i.start,"Cannot use 'import.meta' outside a module"),this.finishNode(i,"MetaProperty")},x.parseLiteral=function(i){var u=this.startNode();return u.value=i,u.raw=this.input.slice(this.start,this.end),u.raw.charCodeAt(u.raw.length-1)===110&&(u.bigint=u.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(u,"Literal")},x.parseParenExpression=function(){this.expect(P.parenL);var i=this.parseExpression();return this.expect(P.parenR),i},x.shouldParseArrow=function(i){return!this.canInsertSemicolon()},x.parseParenAndDistinguishExpression=function(i,u){var m=this.start,I=this.startLoc,N,H=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var G=this.start,te=this.startLoc,he=[],Ie=!0,Ne=!1,et=new s,Rt=this.yieldPos,$t=this.awaitPos,Ft;for(this.yieldPos=0,this.awaitPos=0;this.type!==P.parenR;)if(Ie?Ie=!1:this.expect(P.comma),H&&this.afterTrailingComma(P.parenR,!0)){Ne=!0;break}else if(this.type===P.ellipsis){Ft=this.start,he.push(this.parseParenItem(this.parseRestBinding())),this.type===P.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else he.push(this.parseMaybeAssign(!1,et,this.parseParenItem));var ai=this.lastTokEnd,Dt=this.lastTokEndLoc;if(this.expect(P.parenR),i&&this.shouldParseArrow(he)&&this.eat(P.arrow))return this.checkPatternErrors(et,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Rt,this.awaitPos=$t,this.parseParenArrowList(m,I,he,u);(!he.length||Ne)&&this.unexpected(this.lastTokStart),Ft&&this.unexpected(Ft),this.checkExpressionErrors(et,!0),this.yieldPos=Rt||this.yieldPos,this.awaitPos=$t||this.awaitPos,he.length>1?(N=this.startNodeAt(G,te),N.expressions=he,this.finishNodeAt(N,"SequenceExpression",ai,Dt)):N=he[0]}else N=this.parseParenExpression();if(this.options.preserveParens){var qt=this.startNodeAt(m,I);return qt.expression=N,this.finishNode(qt,"ParenthesizedExpression")}else return N},x.parseParenItem=function(i){return i},x.parseParenArrowList=function(i,u,m,I){return this.parseArrowExpression(this.startNodeAt(i,u),m,!1,I)};var y=[];x.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var i=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===P.dot){var u=this.startNodeAt(i.start,i.loc&&i.loc.start);u.name="new",i.meta=this.finishNode(u,"Identifier"),this.next();var m=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="target"&&this.raiseRecoverable(i.property.start,"The only valid meta property for new is 'new.target'"),m&&this.raiseRecoverable(i.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(i.start,"'new.target' can only be used in functions and class static block"),this.finishNode(i,"MetaProperty")}var I=this.start,N=this.startLoc;return i.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),I,N,!0,!1),this.eat(P.parenL)?i.arguments=this.parseExprList(P.parenR,this.options.ecmaVersion>=8,!1):i.arguments=y,this.finishNode(i,"NewExpression")},x.parseTemplateElement=function(i){var u=i.isTagged,m=this.startNode();return this.type===P.invalidTemplate?(u||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),m.value={raw:this.value,cooked:null}):m.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),m.tail=this.type===P.backQuote,this.finishNode(m,"TemplateElement")},x.parseTemplate=function(i){i===void 0&&(i={});var u=i.isTagged;u===void 0&&(u=!1);var m=this.startNode();this.next(),m.expressions=[];var I=this.parseTemplateElement({isTagged:u});for(m.quasis=[I];!I.tail;)this.type===P.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(P.dollarBraceL),m.expressions.push(this.parseExpression()),this.expect(P.braceR),m.quasis.push(I=this.parseTemplateElement({isTagged:u}));return this.next(),this.finishNode(m,"TemplateLiteral")},x.isAsyncProp=function(i){return!i.computed&&i.key.type==="Identifier"&&i.key.name==="async"&&(this.type===P.name||this.type===P.num||this.type===P.string||this.type===P.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===P.star)&&!ie.test(this.input.slice(this.lastTokEnd,this.start))},x.parseObj=function(i,u){var m=this.startNode(),I=!0,N={};for(m.properties=[],this.next();!this.eat(P.braceR);){if(I)I=!1;else if(this.expect(P.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(P.braceR))break;var H=this.parseProperty(i,u);i||this.checkPropClash(H,N,u),m.properties.push(H)}return this.finishNode(m,i?"ObjectPattern":"ObjectExpression")},x.parseProperty=function(i,u){var m=this.startNode(),I,N,H,G;if(this.options.ecmaVersion>=9&&this.eat(P.ellipsis))return i?(m.argument=this.parseIdent(!1),this.type===P.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(m,"RestElement")):(m.argument=this.parseMaybeAssign(!1,u),this.type===P.comma&&u&&u.trailingComma<0&&(u.trailingComma=this.start),this.finishNode(m,"SpreadElement"));this.options.ecmaVersion>=6&&(m.method=!1,m.shorthand=!1,(i||u)&&(H=this.start,G=this.startLoc),i||(I=this.eat(P.star)));var te=this.containsEsc;return this.parsePropertyName(m),!i&&!te&&this.options.ecmaVersion>=8&&!I&&this.isAsyncProp(m)?(N=!0,I=this.options.ecmaVersion>=9&&this.eat(P.star),this.parsePropertyName(m)):N=!1,this.parsePropertyValue(m,i,I,N,H,G,u,te),this.finishNode(m,"Property")},x.parseGetterSetter=function(i){i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);var u=i.kind==="get"?0:1;if(i.value.params.length!==u){var m=i.value.start;i.kind==="get"?this.raiseRecoverable(m,"getter should have no params"):this.raiseRecoverable(m,"setter should have exactly one param")}else i.kind==="set"&&i.value.params[0].type==="RestElement"&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")},x.parsePropertyValue=function(i,u,m,I,N,H,G,te){(m||I)&&this.type===P.colon&&this.unexpected(),this.eat(P.colon)?(i.value=u?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,G),i.kind="init"):this.options.ecmaVersion>=6&&this.type===P.parenL?(u&&this.unexpected(),i.kind="init",i.method=!0,i.value=this.parseMethod(m,I)):!u&&!te&&this.options.ecmaVersion>=5&&!i.computed&&i.key.type==="Identifier"&&(i.key.name==="get"||i.key.name==="set")&&this.type!==P.comma&&this.type!==P.braceR&&this.type!==P.eq?((m||I)&&this.unexpected(),this.parseGetterSetter(i)):this.options.ecmaVersion>=6&&!i.computed&&i.key.type==="Identifier"?((m||I)&&this.unexpected(),this.checkUnreserved(i.key),i.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=N),i.kind="init",u?i.value=this.parseMaybeDefault(N,H,this.copyNode(i.key)):this.type===P.eq&&G?(G.shorthandAssign<0&&(G.shorthandAssign=this.start),i.value=this.parseMaybeDefault(N,H,this.copyNode(i.key))):i.value=this.copyNode(i.key),i.shorthand=!0):this.unexpected()},x.parsePropertyName=function(i){if(this.options.ecmaVersion>=6){if(this.eat(P.bracketL))return i.computed=!0,i.key=this.parseMaybeAssign(),this.expect(P.bracketR),i.key;i.computed=!1}return i.key=this.type===P.num||this.type===P.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},x.initFunction=function(i){i.id=null,this.options.ecmaVersion>=6&&(i.generator=i.expression=!1),this.options.ecmaVersion>=8&&(i.async=!1)},x.parseMethod=function(i,u,m){var I=this.startNode(),N=this.yieldPos,H=this.awaitPos,G=this.awaitIdentPos;return this.initFunction(I),this.options.ecmaVersion>=6&&(I.generator=i),this.options.ecmaVersion>=8&&(I.async=!!u),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(_i(u,I.generator)|ri|(m?Ti:0)),this.expect(P.parenL),I.params=this.parseBindingList(P.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(I,!1,!0,!1),this.yieldPos=N,this.awaitPos=H,this.awaitIdentPos=G,this.finishNode(I,"FunctionExpression")},x.parseArrowExpression=function(i,u,m,I){var N=this.yieldPos,H=this.awaitPos,G=this.awaitIdentPos;return this.enterScope(_i(m,!1)|jt),this.initFunction(i),this.options.ecmaVersion>=8&&(i.async=!!m),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,i.params=this.toAssignableList(u,!0),this.parseFunctionBody(i,!0,!1,I),this.yieldPos=N,this.awaitPos=H,this.awaitIdentPos=G,this.finishNode(i,"ArrowFunctionExpression")},x.parseFunctionBody=function(i,u,m,I){var N=u&&this.type!==P.braceL,H=this.strict,G=!1;if(N)i.body=this.parseMaybeAssign(I),i.expression=!0,this.checkParams(i,!1);else{var te=this.options.ecmaVersion>=7&&!this.isSimpleParamList(i.params);(!H||te)&&(G=this.strictDirective(this.end),G&&te&&this.raiseRecoverable(i.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var he=this.labels;this.labels=[],G&&(this.strict=!0),this.checkParams(i,!H&&!G&&!u&&!m&&this.isSimpleParamList(i.params)),this.strict&&i.id&&this.checkLValSimple(i.id,Pe),i.body=this.parseBlock(!1,void 0,G&&!H),i.expression=!1,this.adaptDirectivePrologue(i.body.body),this.labels=he}this.exitScope()},x.isSimpleParamList=function(i){for(var u=0,m=i;u<m.length;u+=1){var I=m[u];if(I.type!=="Identifier")return!1}return!0},x.checkParams=function(i,u){for(var m=Object.create(null),I=0,N=i.params;I<N.length;I+=1){var H=N[I];this.checkLValInnerPattern(H,Ye,u?null:m)}},x.parseExprList=function(i,u,m,I){for(var N=[],H=!0;!this.eat(i);){if(H)H=!1;else if(this.expect(P.comma),u&&this.afterTrailingComma(i))break;var G=void 0;m&&this.type===P.comma?G=null:this.type===P.ellipsis?(G=this.parseSpread(I),I&&this.type===P.comma&&I.trailingComma<0&&(I.trailingComma=this.start)):G=this.parseMaybeAssign(!1,I),N.push(G)}return N},x.checkUnreserved=function(i){var u=i.start,m=i.end,I=i.name;if(this.inGenerator&&I==="yield"&&this.raiseRecoverable(u,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&I==="await"&&this.raiseRecoverable(u,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&I==="arguments"&&this.raiseRecoverable(u,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(I==="arguments"||I==="await")&&this.raise(u,"Cannot use "+I+" in class static initialization block"),this.keywords.test(I)&&this.raise(u,"Unexpected keyword '"+I+"'"),!(this.options.ecmaVersion<6&&this.input.slice(u,m).indexOf("\\")!==-1)){var N=this.strict?this.reservedWordsStrict:this.reservedWords;N.test(I)&&(!this.inAsync&&I==="await"&&this.raiseRecoverable(u,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(u,"The keyword '"+I+"' is reserved"))}},x.parseIdent=function(i){var u=this.parseIdentNode();return this.next(!!i),this.finishNode(u,"Identifier"),i||(this.checkUnreserved(u),u.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=u.start)),u},x.parseIdentNode=function(){var i=this.startNode();return this.type===P.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,(i.name==="class"||i.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=P.name):this.unexpected(),i},x.parsePrivateIdent=function(){var i=this.startNode();return this.type===P.privateId?i.name=this.value:this.unexpected(),this.next(),this.finishNode(i,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(i.start,"Private field '#"+i.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(i)),i},x.parseYield=function(i){this.yieldPos||(this.yieldPos=this.start);var u=this.startNode();return this.next(),this.type===P.semi||this.canInsertSemicolon()||this.type!==P.star&&!this.type.startsExpr?(u.delegate=!1,u.argument=null):(u.delegate=this.eat(P.star),u.argument=this.parseMaybeAssign(i)),this.finishNode(u,"YieldExpression")},x.parseAwait=function(i){this.awaitPos||(this.awaitPos=this.start);var u=this.startNode();return this.next(),u.argument=this.parseMaybeUnary(null,!0,!1,i),this.finishNode(u,"AwaitExpression")};var k=e.prototype;k.raise=function(i,u){var m=ci(this.input,i);u+=" ("+m.line+":"+m.column+")";var I=new SyntaxError(u);throw I.pos=i,I.loc=m,I.raisedAt=this.pos,I},k.raiseRecoverable=k.raise,k.curPosition=function(){if(this.options.locations)return new Bt(this.curLine,this.pos-this.lineStart)};var A=e.prototype,S=function(u){this.flags=u,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};A.enterScope=function(i){this.scopeStack.push(new S(i))},A.exitScope=function(){this.scopeStack.pop()},A.treatFunctionsAsVarInScope=function(i){return i.flags&We||!this.inModule&&i.flags&He},A.declareName=function(i,u,m){var I=!1;if(u===wt){var N=this.currentScope();I=N.lexical.indexOf(i)>-1||N.functions.indexOf(i)>-1||N.var.indexOf(i)>-1,N.lexical.push(i),this.inModule&&N.flags&He&&delete this.undefinedExports[i]}else if(u===vi){var H=this.currentScope();H.lexical.push(i)}else if(u===Ke){var G=this.currentScope();this.treatFunctionsAsVar?I=G.lexical.indexOf(i)>-1:I=G.lexical.indexOf(i)>-1||G.var.indexOf(i)>-1,G.functions.push(i)}else for(var te=this.scopeStack.length-1;te>=0;--te){var he=this.scopeStack[te];if(he.lexical.indexOf(i)>-1&&!(he.flags&Ei&&he.lexical[0]===i)||!this.treatFunctionsAsVarInScope(he)&&he.functions.indexOf(i)>-1){I=!0;break}if(he.var.push(i),this.inModule&&he.flags&He&&delete this.undefinedExports[i],he.flags&gi)break}I&&this.raiseRecoverable(m,"Identifier '"+i+"' has already been declared")},A.checkLocalExport=function(i){this.scopeStack[0].lexical.indexOf(i.name)===-1&&this.scopeStack[0].var.indexOf(i.name)===-1&&(this.undefinedExports[i.name]=i)},A.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},A.currentVarScope=function(){for(var i=this.scopeStack.length-1;;i--){var u=this.scopeStack[i];if(u.flags&gi)return u}},A.currentThisScope=function(){for(var i=this.scopeStack.length-1;;i--){var u=this.scopeStack[i];if(u.flags&gi&&!(u.flags&jt))return u}};var E=function(u,m,I){this.type="",this.start=m,this.end=0,u.options.locations&&(this.loc=new Tt(u,I)),u.options.directSourceFile&&(this.sourceFile=u.options.directSourceFile),u.options.ranges&&(this.range=[m,0])},T=e.prototype;T.startNode=function(){return new E(this,this.start,this.startLoc)},T.startNodeAt=function(i,u){return new E(this,i,u)};function O(i,u,m,I){return i.type=u,i.end=m,this.options.locations&&(i.loc.end=I),this.options.ranges&&(i.range[1]=m),i}T.finishNode=function(i,u){return O.call(this,i,u,this.lastTokEnd,this.lastTokEndLoc)},T.finishNodeAt=function(i,u,m,I){return O.call(this,i,u,m,I)},T.copyNode=function(i){var u=new E(this,i.start,this.startLoc);for(var m in i)u[m]=i[m];return u};var V="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",L=V+" Extended_Pictographic",z=L,B=z+" EBase EComp EMod EPres ExtPict",q=B,U=q,W={9:V,10:L,11:z,12:B,13:q,14:U},J="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",ee={9:"",10:"",11:"",12:"",13:"",14:J},ne="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",le="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",K=le+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Q=K+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",se=Q+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ce=se+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",de=ce+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",me={9:le,10:K,11:Q,12:se,13:ce,14:de},_e={};function we(i){var u=_e[i]={binary:Ee(W[i]+" "+ne),binaryOfStrings:Ee(ee[i]),nonBinary:{General_Category:Ee(ne),Script:Ee(me[i])}};u.nonBinary.Script_Extensions=u.nonBinary.Script,u.nonBinary.gc=u.nonBinary.General_Category,u.nonBinary.sc=u.nonBinary.Script,u.nonBinary.scx=u.nonBinary.Script_Extensions}for(var Se=0,be=[9,10,11,12,13,14];Se<be.length;Se+=1){var it=be[Se];we(it)}var ae=e.prototype,De=function(u){this.parser=u,this.validFlags="gim"+(u.options.ecmaVersion>=6?"uy":"")+(u.options.ecmaVersion>=9?"s":"")+(u.options.ecmaVersion>=13?"d":"")+(u.options.ecmaVersion>=15?"v":""),this.unicodeProperties=_e[u.options.ecmaVersion>=14?14:u.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};De.prototype.reset=function(u,m,I){var N=I.indexOf("v")!==-1,H=I.indexOf("u")!==-1;this.start=u|0,this.source=m+"",this.flags=I,N&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=H&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=H&&this.parser.options.ecmaVersion>=9)},De.prototype.raise=function(u){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+u)},De.prototype.at=function(u,m){m===void 0&&(m=!1);var I=this.source,N=I.length;if(u>=N)return-1;var H=I.charCodeAt(u);if(!(m||this.switchU)||H<=55295||H>=57344||u+1>=N)return H;var G=I.charCodeAt(u+1);return G>=56320&&G<=57343?(H<<10)+G-56613888:H},De.prototype.nextIndex=function(u,m){m===void 0&&(m=!1);var I=this.source,N=I.length;if(u>=N)return N;var H=I.charCodeAt(u),G;return!(m||this.switchU)||H<=55295||H>=57344||u+1>=N||(G=I.charCodeAt(u+1))<56320||G>57343?u+1:u+2},De.prototype.current=function(u){return u===void 0&&(u=!1),this.at(this.pos,u)},De.prototype.lookahead=function(u){return u===void 0&&(u=!1),this.at(this.nextIndex(this.pos,u),u)},De.prototype.advance=function(u){u===void 0&&(u=!1),this.pos=this.nextIndex(this.pos,u)},De.prototype.eat=function(u,m){return m===void 0&&(m=!1),this.current(m)===u?(this.advance(m),!0):!1},De.prototype.eatChars=function(u,m){m===void 0&&(m=!1);for(var I=this.pos,N=0,H=u;N<H.length;N+=1){var G=H[N],te=this.at(I,m);if(te===-1||te!==G)return!1;I=this.nextIndex(I,m)}return this.pos=I,!0},ae.validateRegExpFlags=function(i){for(var u=i.validFlags,m=i.flags,I=!1,N=!1,H=0;H<m.length;H++){var G=m.charAt(H);u.indexOf(G)===-1&&this.raise(i.start,"Invalid regular expression flag"),m.indexOf(G,H+1)>-1&&this.raise(i.start,"Duplicate regular expression flag"),G==="u"&&(I=!0),G==="v"&&(N=!0)}this.options.ecmaVersion>=15&&I&&N&&this.raise(i.start,"Invalid regular expression flag")},ae.validateRegExpPattern=function(i){this.regexp_pattern(i),!i.switchN&&this.options.ecmaVersion>=9&&i.groupNames.length>0&&(i.switchN=!0,this.regexp_pattern(i))},ae.regexp_pattern=function(i){i.pos=0,i.lastIntValue=0,i.lastStringValue="",i.lastAssertionIsQuantifiable=!1,i.numCapturingParens=0,i.maxBackReference=0,i.groupNames.length=0,i.backReferenceNames.length=0,this.regexp_disjunction(i),i.pos!==i.source.length&&(i.eat(41)&&i.raise("Unmatched ')'"),(i.eat(93)||i.eat(125))&&i.raise("Lone quantifier brackets")),i.maxBackReference>i.numCapturingParens&&i.raise("Invalid escape");for(var u=0,m=i.backReferenceNames;u<m.length;u+=1){var I=m[u];i.groupNames.indexOf(I)===-1&&i.raise("Invalid named capture referenced")}},ae.regexp_disjunction=function(i){for(this.regexp_alternative(i);i.eat(124);)this.regexp_alternative(i);this.regexp_eatQuantifier(i,!0)&&i.raise("Nothing to repeat"),i.eat(123)&&i.raise("Lone quantifier brackets")},ae.regexp_alternative=function(i){for(;i.pos<i.source.length&&this.regexp_eatTerm(i););},ae.regexp_eatTerm=function(i){return this.regexp_eatAssertion(i)?(i.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(i)&&i.switchU&&i.raise("Invalid quantifier"),!0):(i.switchU?this.regexp_eatAtom(i):this.regexp_eatExtendedAtom(i))?(this.regexp_eatQuantifier(i),!0):!1},ae.regexp_eatAssertion=function(i){var u=i.pos;if(i.lastAssertionIsQuantifiable=!1,i.eat(94)||i.eat(36))return!0;if(i.eat(92)){if(i.eat(66)||i.eat(98))return!0;i.pos=u}if(i.eat(40)&&i.eat(63)){var m=!1;if(this.options.ecmaVersion>=9&&(m=i.eat(60)),i.eat(61)||i.eat(33))return this.regexp_disjunction(i),i.eat(41)||i.raise("Unterminated group"),i.lastAssertionIsQuantifiable=!m,!0}return i.pos=u,!1},ae.regexp_eatQuantifier=function(i,u){return u===void 0&&(u=!1),this.regexp_eatQuantifierPrefix(i,u)?(i.eat(63),!0):!1},ae.regexp_eatQuantifierPrefix=function(i,u){return i.eat(42)||i.eat(43)||i.eat(63)||this.regexp_eatBracedQuantifier(i,u)},ae.regexp_eatBracedQuantifier=function(i,u){var m=i.pos;if(i.eat(123)){var I=0,N=-1;if(this.regexp_eatDecimalDigits(i)&&(I=i.lastIntValue,i.eat(44)&&this.regexp_eatDecimalDigits(i)&&(N=i.lastIntValue),i.eat(125)))return N!==-1&&N<I&&!u&&i.raise("numbers out of order in {} quantifier"),!0;i.switchU&&!u&&i.raise("Incomplete quantifier"),i.pos=m}return!1},ae.regexp_eatAtom=function(i){return this.regexp_eatPatternCharacters(i)||i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)},ae.regexp_eatReverseSolidusAtomEscape=function(i){var u=i.pos;if(i.eat(92)){if(this.regexp_eatAtomEscape(i))return!0;i.pos=u}return!1},ae.regexp_eatUncapturingGroup=function(i){var u=i.pos;if(i.eat(40)){if(i.eat(63)&&i.eat(58)){if(this.regexp_disjunction(i),i.eat(41))return!0;i.raise("Unterminated group")}i.pos=u}return!1},ae.regexp_eatCapturingGroup=function(i){if(i.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(i):i.current()===63&&i.raise("Invalid group"),this.regexp_disjunction(i),i.eat(41))return i.numCapturingParens+=1,!0;i.raise("Unterminated group")}return!1},ae.regexp_eatExtendedAtom=function(i){return i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)||this.regexp_eatInvalidBracedQuantifier(i)||this.regexp_eatExtendedPatternCharacter(i)},ae.regexp_eatInvalidBracedQuantifier=function(i){return this.regexp_eatBracedQuantifier(i,!0)&&i.raise("Nothing to repeat"),!1},ae.regexp_eatSyntaxCharacter=function(i){var u=i.current();return Xe(u)?(i.lastIntValue=u,i.advance(),!0):!1};function Xe(i){return i===36||i>=40&&i<=43||i===46||i===63||i>=91&&i<=94||i>=123&&i<=125}ae.regexp_eatPatternCharacters=function(i){for(var u=i.pos,m=0;(m=i.current())!==-1&&!Xe(m);)i.advance();return i.pos!==u},ae.regexp_eatExtendedPatternCharacter=function(i){var u=i.current();return u!==-1&&u!==36&&!(u>=40&&u<=43)&&u!==46&&u!==63&&u!==91&&u!==94&&u!==124?(i.advance(),!0):!1},ae.regexp_groupSpecifier=function(i){if(i.eat(63)){if(this.regexp_eatGroupName(i)){i.groupNames.indexOf(i.lastStringValue)!==-1&&i.raise("Duplicate capture group name"),i.groupNames.push(i.lastStringValue);return}i.raise("Invalid group")}},ae.regexp_eatGroupName=function(i){if(i.lastStringValue="",i.eat(60)){if(this.regexp_eatRegExpIdentifierName(i)&&i.eat(62))return!0;i.raise("Invalid capture group name")}return!1},ae.regexp_eatRegExpIdentifierName=function(i){if(i.lastStringValue="",this.regexp_eatRegExpIdentifierStart(i)){for(i.lastStringValue+=ut(i.lastIntValue);this.regexp_eatRegExpIdentifierPart(i);)i.lastStringValue+=ut(i.lastIntValue);return!0}return!1},ae.regexp_eatRegExpIdentifierStart=function(i){var u=i.pos,m=this.options.ecmaVersion>=11,I=i.current(m);return i.advance(m),I===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,m)&&(I=i.lastIntValue),Ve(I)?(i.lastIntValue=I,!0):(i.pos=u,!1)};function Ve(i){return fe(i,!0)||i===36||i===95}ae.regexp_eatRegExpIdentifierPart=function(i){var u=i.pos,m=this.options.ecmaVersion>=11,I=i.current(m);return i.advance(m),I===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,m)&&(I=i.lastIntValue),Je(I)?(i.lastIntValue=I,!0):(i.pos=u,!1)};function Je(i){return $(i,!0)||i===36||i===95||i===8204||i===8205}ae.regexp_eatAtomEscape=function(i){return this.regexp_eatBackReference(i)||this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)||i.switchN&&this.regexp_eatKGroupName(i)?!0:(i.switchU&&(i.current()===99&&i.raise("Invalid unicode escape"),i.raise("Invalid escape")),!1)},ae.regexp_eatBackReference=function(i){var u=i.pos;if(this.regexp_eatDecimalEscape(i)){var m=i.lastIntValue;if(i.switchU)return m>i.maxBackReference&&(i.maxBackReference=m),!0;if(m<=i.numCapturingParens)return!0;i.pos=u}return!1},ae.regexp_eatKGroupName=function(i){if(i.eat(107)){if(this.regexp_eatGroupName(i))return i.backReferenceNames.push(i.lastStringValue),!0;i.raise("Invalid named reference")}return!1},ae.regexp_eatCharacterEscape=function(i){return this.regexp_eatControlEscape(i)||this.regexp_eatCControlLetter(i)||this.regexp_eatZero(i)||this.regexp_eatHexEscapeSequence(i)||this.regexp_eatRegExpUnicodeEscapeSequence(i,!1)||!i.switchU&&this.regexp_eatLegacyOctalEscapeSequence(i)||this.regexp_eatIdentityEscape(i)},ae.regexp_eatCControlLetter=function(i){var u=i.pos;if(i.eat(99)){if(this.regexp_eatControlLetter(i))return!0;i.pos=u}return!1},ae.regexp_eatZero=function(i){return i.current()===48&&!Xt(i.lookahead())?(i.lastIntValue=0,i.advance(),!0):!1},ae.regexp_eatControlEscape=function(i){var u=i.current();return u===116?(i.lastIntValue=9,i.advance(),!0):u===110?(i.lastIntValue=10,i.advance(),!0):u===118?(i.lastIntValue=11,i.advance(),!0):u===102?(i.lastIntValue=12,i.advance(),!0):u===114?(i.lastIntValue=13,i.advance(),!0):!1},ae.regexp_eatControlLetter=function(i){var u=i.current();return ct(u)?(i.lastIntValue=u%32,i.advance(),!0):!1};function ct(i){return i>=65&&i<=90||i>=97&&i<=122}ae.regexp_eatRegExpUnicodeEscapeSequence=function(i,u){u===void 0&&(u=!1);var m=i.pos,I=u||i.switchU;if(i.eat(117)){if(this.regexp_eatFixedHexDigits(i,4)){var N=i.lastIntValue;if(I&&N>=55296&&N<=56319){var H=i.pos;if(i.eat(92)&&i.eat(117)&&this.regexp_eatFixedHexDigits(i,4)){var G=i.lastIntValue;if(G>=56320&&G<=57343)return i.lastIntValue=(N-55296)*1024+(G-56320)+65536,!0}i.pos=H,i.lastIntValue=N}return!0}if(I&&i.eat(123)&&this.regexp_eatHexDigits(i)&&i.eat(125)&&nt(i.lastIntValue))return!0;I&&i.raise("Invalid unicode escape"),i.pos=m}return!1};function nt(i){return i>=0&&i<=1114111}ae.regexp_eatIdentityEscape=function(i){if(i.switchU)return this.regexp_eatSyntaxCharacter(i)?!0:i.eat(47)?(i.lastIntValue=47,!0):!1;var u=i.current();return u!==99&&(!i.switchN||u!==107)?(i.lastIntValue=u,i.advance(),!0):!1},ae.regexp_eatDecimalEscape=function(i){i.lastIntValue=0;var u=i.current();if(u>=49&&u<=57){do i.lastIntValue=10*i.lastIntValue+(u-48),i.advance();while((u=i.current())>=48&&u<=57);return!0}return!1};var vt=0,ht=1,Qe=2;ae.regexp_eatCharacterClassEscape=function(i){var u=i.current();if(Ct(u))return i.lastIntValue=-1,i.advance(),ht;var m=!1;if(i.switchU&&this.options.ecmaVersion>=9&&((m=u===80)||u===112)){i.lastIntValue=-1,i.advance();var I;if(i.eat(123)&&(I=this.regexp_eatUnicodePropertyValueExpression(i))&&i.eat(125))return m&&I===Qe&&i.raise("Invalid property name"),I;i.raise("Invalid property name")}return vt};function Ct(i){return i===100||i===68||i===115||i===83||i===119||i===87}ae.regexp_eatUnicodePropertyValueExpression=function(i){var u=i.pos;if(this.regexp_eatUnicodePropertyName(i)&&i.eat(61)){var m=i.lastStringValue;if(this.regexp_eatUnicodePropertyValue(i)){var I=i.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(i,m,I),ht}}if(i.pos=u,this.regexp_eatLoneUnicodePropertyNameOrValue(i)){var N=i.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(i,N)}return vt},ae.regexp_validateUnicodePropertyNameAndValue=function(i,u,m){re(i.unicodeProperties.nonBinary,u)||i.raise("Invalid property name"),i.unicodeProperties.nonBinary[u].test(m)||i.raise("Invalid property value")},ae.regexp_validateUnicodePropertyNameOrValue=function(i,u){if(i.unicodeProperties.binary.test(u))return ht;if(i.switchV&&i.unicodeProperties.binaryOfStrings.test(u))return Qe;i.raise("Invalid property name")},ae.regexp_eatUnicodePropertyName=function(i){var u=0;for(i.lastStringValue="";dt(u=i.current());)i.lastStringValue+=ut(u),i.advance();return i.lastStringValue!==""};function dt(i){return ct(i)||i===95}ae.regexp_eatUnicodePropertyValue=function(i){var u=0;for(i.lastStringValue="";mt(u=i.current());)i.lastStringValue+=ut(u),i.advance();return i.lastStringValue!==""};function mt(i){return dt(i)||Xt(i)}ae.regexp_eatLoneUnicodePropertyNameOrValue=function(i){return this.regexp_eatUnicodePropertyValue(i)},ae.regexp_eatCharacterClass=function(i){if(i.eat(91)){var u=i.eat(94),m=this.regexp_classContents(i);return i.eat(93)||i.raise("Unterminated character class"),u&&m===Qe&&i.raise("Negated character class may contain strings"),!0}return!1},ae.regexp_classContents=function(i){return i.current()===93?ht:i.switchV?this.regexp_classSetExpression(i):(this.regexp_nonEmptyClassRanges(i),ht)},ae.regexp_nonEmptyClassRanges=function(i){for(;this.regexp_eatClassAtom(i);){var u=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassAtom(i)){var m=i.lastIntValue;i.switchU&&(u===-1||m===-1)&&i.raise("Invalid character class"),u!==-1&&m!==-1&&u>m&&i.raise("Range out of order in character class")}}},ae.regexp_eatClassAtom=function(i){var u=i.pos;if(i.eat(92)){if(this.regexp_eatClassEscape(i))return!0;if(i.switchU){var m=i.current();(m===99||bi(m))&&i.raise("Invalid class escape"),i.raise("Invalid escape")}i.pos=u}var I=i.current();return I!==93?(i.lastIntValue=I,i.advance(),!0):!1},ae.regexp_eatClassEscape=function(i){var u=i.pos;if(i.eat(98))return i.lastIntValue=8,!0;if(i.switchU&&i.eat(45))return i.lastIntValue=45,!0;if(!i.switchU&&i.eat(99)){if(this.regexp_eatClassControlLetter(i))return!0;i.pos=u}return this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)},ae.regexp_classSetExpression=function(i){var u=ht,m;if(!this.regexp_eatClassSetRange(i))if(m=this.regexp_eatClassSetOperand(i)){m===Qe&&(u=Qe);for(var I=i.pos;i.eatChars([38,38]);){if(i.current()!==38&&(m=this.regexp_eatClassSetOperand(i))){m!==Qe&&(u=ht);continue}i.raise("Invalid character in character class")}if(I!==i.pos)return u;for(;i.eatChars([45,45]);)this.regexp_eatClassSetOperand(i)||i.raise("Invalid character in character class");if(I!==i.pos)return u}else i.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(i)){if(m=this.regexp_eatClassSetOperand(i),!m)return u;m===Qe&&(u=Qe)}},ae.regexp_eatClassSetRange=function(i){var u=i.pos;if(this.regexp_eatClassSetCharacter(i)){var m=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassSetCharacter(i)){var I=i.lastIntValue;return m!==-1&&I!==-1&&m>I&&i.raise("Range out of order in character class"),!0}i.pos=u}return!1},ae.regexp_eatClassSetOperand=function(i){return this.regexp_eatClassSetCharacter(i)?ht:this.regexp_eatClassStringDisjunction(i)||this.regexp_eatNestedClass(i)},ae.regexp_eatNestedClass=function(i){var u=i.pos;if(i.eat(91)){var m=i.eat(94),I=this.regexp_classContents(i);if(i.eat(93))return m&&I===Qe&&i.raise("Negated character class may contain strings"),I;i.pos=u}if(i.eat(92)){var N=this.regexp_eatCharacterClassEscape(i);if(N)return N;i.pos=u}return null},ae.regexp_eatClassStringDisjunction=function(i){var u=i.pos;if(i.eatChars([92,113])){if(i.eat(123)){var m=this.regexp_classStringDisjunctionContents(i);if(i.eat(125))return m}else i.raise("Invalid escape");i.pos=u}return null},ae.regexp_classStringDisjunctionContents=function(i){for(var u=this.regexp_classString(i);i.eat(124);)this.regexp_classString(i)===Qe&&(u=Qe);return u},ae.regexp_classString=function(i){for(var u=0;this.regexp_eatClassSetCharacter(i);)u++;return u===1?ht:Qe},ae.regexp_eatClassSetCharacter=function(i){var u=i.pos;if(i.eat(92))return this.regexp_eatCharacterEscape(i)||this.regexp_eatClassSetReservedPunctuator(i)?!0:i.eat(98)?(i.lastIntValue=8,!0):(i.pos=u,!1);var m=i.current();return m<0||m===i.lookahead()&&Lt(m)||St(m)?!1:(i.advance(),i.lastIntValue=m,!0)};function Lt(i){return i===33||i>=35&&i<=38||i>=42&&i<=44||i===46||i>=58&&i<=64||i===94||i===96||i===126}function St(i){return i===40||i===41||i===45||i===47||i>=91&&i<=93||i>=123&&i<=125}ae.regexp_eatClassSetReservedPunctuator=function(i){var u=i.current();return si(u)?(i.lastIntValue=u,i.advance(),!0):!1};function si(i){return i===33||i===35||i===37||i===38||i===44||i===45||i>=58&&i<=62||i===64||i===96||i===126}ae.regexp_eatClassControlLetter=function(i){var u=i.current();return Xt(u)||u===95?(i.lastIntValue=u%32,i.advance(),!0):!1},ae.regexp_eatHexEscapeSequence=function(i){var u=i.pos;if(i.eat(120)){if(this.regexp_eatFixedHexDigits(i,2))return!0;i.switchU&&i.raise("Invalid escape"),i.pos=u}return!1},ae.regexp_eatDecimalDigits=function(i){var u=i.pos,m=0;for(i.lastIntValue=0;Xt(m=i.current());)i.lastIntValue=10*i.lastIntValue+(m-48),i.advance();return i.pos!==u};function Xt(i){return i>=48&&i<=57}ae.regexp_eatHexDigits=function(i){var u=i.pos,m=0;for(i.lastIntValue=0;mi(m=i.current());)i.lastIntValue=16*i.lastIntValue+xi(m),i.advance();return i.pos!==u};function mi(i){return i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102}function xi(i){return i>=65&&i<=70?10+(i-65):i>=97&&i<=102?10+(i-97):i-48}ae.regexp_eatLegacyOctalEscapeSequence=function(i){if(this.regexp_eatOctalDigit(i)){var u=i.lastIntValue;if(this.regexp_eatOctalDigit(i)){var m=i.lastIntValue;u<=3&&this.regexp_eatOctalDigit(i)?i.lastIntValue=u*64+m*8+i.lastIntValue:i.lastIntValue=u*8+m}else i.lastIntValue=u;return!0}return!1},ae.regexp_eatOctalDigit=function(i){var u=i.current();return bi(u)?(i.lastIntValue=u-48,i.advance(),!0):(i.lastIntValue=0,!1)};function bi(i){return i>=48&&i<=55}ae.regexp_eatFixedHexDigits=function(i,u){var m=i.pos;i.lastIntValue=0;for(var I=0;I<u;++I){var N=i.current();if(!mi(N))return i.pos=m,!1;i.lastIntValue=16*i.lastIntValue+xi(N),i.advance()}return!0};var Qt=function(u){this.type=u.type,this.value=u.value,this.start=u.start,this.end=u.end,u.options.locations&&(this.loc=new Tt(u,u.startLoc,u.endLoc)),u.options.ranges&&(this.range=[u.start,u.end])},Te=e.prototype;Te.next=function(i){!i&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Qt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Te.getToken=function(){return this.next(),new Qt(this)},typeof Symbol<"u"&&(Te[Symbol.iterator]=function(){var i=this;return{next:function(){var u=i.getToken();return{done:u.type===P.eof,value:u}}}}),Te.nextToken=function(){var i=this.curContext();if((!i||!i.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(P.eof);if(i.override)return i.override(this);this.readToken(this.fullCharCodeAtPos())},Te.readToken=function(i){return fe(i,this.options.ecmaVersion>=6)||i===92?this.readWord():this.getTokenFromCode(i)},Te.fullCharCodeAtPos=function(){var i=this.input.charCodeAt(this.pos);if(i<=55295||i>=56320)return i;var u=this.input.charCodeAt(this.pos+1);return u<=56319||u>=57344?i:(i<<10)+u-56613888},Te.skipBlockComment=function(){var i=this.options.onComment&&this.curPosition(),u=this.pos,m=this.input.indexOf("*/",this.pos+=2);if(m===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=m+2,this.options.locations)for(var I=void 0,N=u;(I=Vt(this.input,N,this.pos))>-1;)++this.curLine,N=this.lineStart=I;this.options.onComment&&this.options.onComment(!0,this.input.slice(u+2,m),u,this.pos,i,this.curPosition())},Te.skipLineComment=function(i){for(var u=this.pos,m=this.options.onComment&&this.curPosition(),I=this.input.charCodeAt(this.pos+=i);this.pos<this.input.length&&!Fe(I);)I=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(u+i,this.pos),u,this.pos,m,this.curPosition())},Te.skipSpace=function(){e:for(;this.pos<this.input.length;){var i=this.input.charCodeAt(this.pos);switch(i){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(i>8&&i<14||i>=5760&&Wt.test(String.fromCharCode(i)))++this.pos;else break e}}},Te.finishToken=function(i,u){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var m=this.type;this.type=i,this.value=u,this.updateContext(m)},Te.readToken_dot=function(){var i=this.input.charCodeAt(this.pos+1);if(i>=48&&i<=57)return this.readNumber(!0);var u=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&i===46&&u===46?(this.pos+=3,this.finishToken(P.ellipsis)):(++this.pos,this.finishToken(P.dot))},Te.readToken_slash=function(){var i=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):i===61?this.finishOp(P.assign,2):this.finishOp(P.slash,1)},Te.readToken_mult_modulo_exp=function(i){var u=this.input.charCodeAt(this.pos+1),m=1,I=i===42?P.star:P.modulo;return this.options.ecmaVersion>=7&&i===42&&u===42&&(++m,I=P.starstar,u=this.input.charCodeAt(this.pos+2)),u===61?this.finishOp(P.assign,m+1):this.finishOp(I,m)},Te.readToken_pipe_amp=function(i){var u=this.input.charCodeAt(this.pos+1);if(u===i){if(this.options.ecmaVersion>=12){var m=this.input.charCodeAt(this.pos+2);if(m===61)return this.finishOp(P.assign,3)}return this.finishOp(i===124?P.logicalOR:P.logicalAND,2)}return u===61?this.finishOp(P.assign,2):this.finishOp(i===124?P.bitwiseOR:P.bitwiseAND,1)},Te.readToken_caret=function(){var i=this.input.charCodeAt(this.pos+1);return i===61?this.finishOp(P.assign,2):this.finishOp(P.bitwiseXOR,1)},Te.readToken_plus_min=function(i){var u=this.input.charCodeAt(this.pos+1);return u===i?u===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||ie.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(P.incDec,2):u===61?this.finishOp(P.assign,2):this.finishOp(P.plusMin,1)},Te.readToken_lt_gt=function(i){var u=this.input.charCodeAt(this.pos+1),m=1;return u===i?(m=i===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+m)===61?this.finishOp(P.assign,m+1):this.finishOp(P.bitShift,m)):u===33&&i===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(u===61&&(m=2),this.finishOp(P.relational,m))},Te.readToken_eq_excl=function(i){var u=this.input.charCodeAt(this.pos+1);return u===61?this.finishOp(P.equality,this.input.charCodeAt(this.pos+2)===61?3:2):i===61&&u===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(P.arrow)):this.finishOp(i===61?P.eq:P.prefix,1)},Te.readToken_question=function(){var i=this.options.ecmaVersion;if(i>=11){var u=this.input.charCodeAt(this.pos+1);if(u===46){var m=this.input.charCodeAt(this.pos+2);if(m<48||m>57)return this.finishOp(P.questionDot,2)}if(u===63){if(i>=12){var I=this.input.charCodeAt(this.pos+2);if(I===61)return this.finishOp(P.assign,3)}return this.finishOp(P.coalesce,2)}}return this.finishOp(P.question,1)},Te.readToken_numberSign=function(){var i=this.options.ecmaVersion,u=35;if(i>=13&&(++this.pos,u=this.fullCharCodeAtPos(),fe(u,!0)||u===92))return this.finishToken(P.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ut(u)+"'")},Te.getTokenFromCode=function(i){switch(i){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(P.parenL);case 41:return++this.pos,this.finishToken(P.parenR);case 59:return++this.pos,this.finishToken(P.semi);case 44:return++this.pos,this.finishToken(P.comma);case 91:return++this.pos,this.finishToken(P.bracketL);case 93:return++this.pos,this.finishToken(P.bracketR);case 123:return++this.pos,this.finishToken(P.braceL);case 125:return++this.pos,this.finishToken(P.braceR);case 58:return++this.pos,this.finishToken(P.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(P.backQuote);case 48:var u=this.input.charCodeAt(this.pos+1);if(u===120||u===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(u===111||u===79)return this.readRadixNumber(8);if(u===98||u===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(i);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(i);case 124:case 38:return this.readToken_pipe_amp(i);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(i);case 60:case 62:return this.readToken_lt_gt(i);case 61:case 33:return this.readToken_eq_excl(i);case 63:return this.readToken_question();case 126:return this.finishOp(P.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ut(i)+"'")},Te.finishOp=function(i,u){var m=this.input.slice(this.pos,this.pos+u);return this.pos+=u,this.finishToken(i,m)},Te.readRegexp=function(){for(var i,u,m=this.pos;;){this.pos>=this.input.length&&this.raise(m,"Unterminated regular expression");var I=this.input.charAt(this.pos);if(ie.test(I)&&this.raise(m,"Unterminated regular expression"),i)i=!1;else{if(I==="[")u=!0;else if(I==="]"&&u)u=!1;else if(I==="/"&&!u)break;i=I==="\\"}++this.pos}var N=this.input.slice(m,this.pos);++this.pos;var H=this.pos,G=this.readWord1();this.containsEsc&&this.unexpected(H);var te=this.regexpState||(this.regexpState=new De(this));te.reset(m,N,G),this.validateRegExpFlags(te),this.validateRegExpPattern(te);var he=null;try{he=new RegExp(N,G)}catch{}return this.finishToken(P.regexp,{pattern:N,flags:G,value:he})},Te.readInt=function(i,u,m){for(var I=this.options.ecmaVersion>=12&&u===void 0,N=m&&this.input.charCodeAt(this.pos)===48,H=this.pos,G=0,te=0,he=0,Ie=u??1/0;he<Ie;++he,++this.pos){var Ne=this.input.charCodeAt(this.pos),et=void 0;if(I&&Ne===95){N&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),te===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),he===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),te=Ne;continue}if(Ne>=97?et=Ne-97+10:Ne>=65?et=Ne-65+10:Ne>=48&&Ne<=57?et=Ne-48:et=1/0,et>=i)break;te=Ne,G=G*i+et}return I&&te===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===H||u!=null&&this.pos-H!==u?null:G};function yi(i,u){return u?parseInt(i,8):parseFloat(i.replace(/_/g,""))}function Yt(i){return typeof BigInt!="function"?null:BigInt(i.replace(/_/g,""))}Te.readRadixNumber=function(i){var u=this.pos;this.pos+=2;var m=this.readInt(i);return m==null&&this.raise(this.start+2,"Expected number in radix "+i),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(m=Yt(this.input.slice(u,this.pos)),++this.pos):fe(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(P.num,m)},Te.readNumber=function(i){var u=this.pos;!i&&this.readInt(10,void 0,!0)===null&&this.raise(u,"Invalid number");var m=this.pos-u>=2&&this.input.charCodeAt(u)===48;m&&this.strict&&this.raise(u,"Invalid number");var I=this.input.charCodeAt(this.pos);if(!m&&!i&&this.options.ecmaVersion>=11&&I===110){var N=Yt(this.input.slice(u,this.pos));return++this.pos,fe(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(P.num,N)}m&&/[89]/.test(this.input.slice(u,this.pos))&&(m=!1),I===46&&!m&&(++this.pos,this.readInt(10),I=this.input.charCodeAt(this.pos)),(I===69||I===101)&&!m&&(I=this.input.charCodeAt(++this.pos),(I===43||I===45)&&++this.pos,this.readInt(10)===null&&this.raise(u,"Invalid number")),fe(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var H=yi(this.input.slice(u,this.pos),m);return this.finishToken(P.num,H)},Te.readCodePoint=function(){var i=this.input.charCodeAt(this.pos),u;if(i===123){this.options.ecmaVersion<6&&this.unexpected();var m=++this.pos;u=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,u>1114111&&this.invalidStringToken(m,"Code point out of bounds")}else u=this.readHexChar(4);return u},Te.readString=function(i){for(var u="",m=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var I=this.input.charCodeAt(this.pos);if(I===i)break;I===92?(u+=this.input.slice(m,this.pos),u+=this.readEscapedChar(!1),m=this.pos):I===8232||I===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Fe(I)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return u+=this.input.slice(m,this.pos++),this.finishToken(P.string,u)};var Jt={};Te.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(i){if(i===Jt)this.readInvalidTemplateToken();else throw i}this.inTemplateElement=!1},Te.invalidStringToken=function(i,u){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Jt;this.raise(i,u)},Te.readTmplToken=function(){for(var i="",u=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var m=this.input.charCodeAt(this.pos);if(m===96||m===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===P.template||this.type===P.invalidTemplate)?m===36?(this.pos+=2,this.finishToken(P.dollarBraceL)):(++this.pos,this.finishToken(P.backQuote)):(i+=this.input.slice(u,this.pos),this.finishToken(P.template,i));if(m===92)i+=this.input.slice(u,this.pos),i+=this.readEscapedChar(!0),u=this.pos;else if(Fe(m)){switch(i+=this.input.slice(u,this.pos),++this.pos,m){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:i+=`
`;break;default:i+=String.fromCharCode(m);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),u=this.pos}else++this.pos}},Te.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(P.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Te.readEscapedChar=function(i){var u=this.input.charCodeAt(++this.pos);switch(++this.pos,u){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ut(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),i){var m=this.pos-1;this.invalidStringToken(m,"Invalid escape sequence in template string")}default:if(u>=48&&u<=55){var I=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],N=parseInt(I,8);return N>255&&(I=I.slice(0,-1),N=parseInt(I,8)),this.pos+=I.length-1,u=this.input.charCodeAt(this.pos),(I!=="0"||u===56||u===57)&&(this.strict||i)&&this.invalidStringToken(this.pos-1-I.length,i?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(N)}return Fe(u)?"":String.fromCharCode(u)}},Te.readHexChar=function(i){var u=this.pos,m=this.readInt(16,i);return m===null&&this.invalidStringToken(u,"Bad character escape sequence"),m},Te.readWord1=function(){this.containsEsc=!1;for(var i="",u=!0,m=this.pos,I=this.options.ecmaVersion>=6;this.pos<this.input.length;){var N=this.fullCharCodeAtPos();if($(N,I))this.pos+=N<=65535?1:2;else if(N===92){this.containsEsc=!0,i+=this.input.slice(m,this.pos);var H=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var G=this.readCodePoint();(u?fe:$)(G,I)||this.invalidStringToken(H,"Invalid Unicode escape"),i+=ut(G),m=this.pos}else break;u=!1}return i+this.input.slice(m,this.pos)},Te.readWord=function(){var i=this.readWord1(),u=P.name;return this.keywords.test(i)&&(u=Ae[i]),this.finishToken(u,i)};var Ot="8.11.3";e.acorn={Parser:e,version:Ot,defaultOptions:Ze,Position:Bt,SourceLocation:Tt,getLineInfo:ci,Node:E,TokenType:ue,tokTypes:P,keywordTypes:Ae,TokContext:b,tokContexts:w,isIdentifierChar:$,isIdentifierStart:fe,Token:Qt,isNewLine:Fe,lineBreak:ie,lineBreakG:_t,nonASCIIwhitespace:Wt};function Mt(i,u){return e.parse(i,u)}function Pt(i,u,m){return e.parseExpressionAt(i,u,m)}function kt(i,u){return e.tokenizer(i,u)}X.Node=E,X.Parser=e,X.Position=Bt,X.SourceLocation=Tt,X.TokContext=b,X.Token=Qt,X.TokenType=ue,X.defaultOptions=Ze,X.getLineInfo=ci,X.isIdentifierChar=$,X.isIdentifierStart=fe,X.isNewLine=Fe,X.keywordTypes=Ae,X.lineBreak=ie,X.lineBreakG=_t,X.nonASCIIwhitespace=Wt,X.parse=Mt,X.parseExpressionAt=Pt,X.tokContexts=w,X.tokTypes=P,X.tokenizer=kt,X.version=Ot})}(Bi,Bi.exports)),Bi.exports}/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(qe){(function(ot,X){ot=ot||dn;var Re=ot.window,Le=ot.document,R=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],n=t.slice,r=Object.create,s=Object.getOwnPropertyDescriptor,a=Object.defineProperty,h=t.forEach||function(p,d){for(var C=0,b=this.length;C<b;C++)p.call(d,this[C],C,this)},o=function(p,d){for(var C in this)this.hasOwnProperty(C)&&p.call(d,this[C],C,this)},l=Object.assign||function(p){for(var d=1,C=arguments.length;d<C;d++){var b=arguments[d];for(var w in b)b.hasOwnProperty(w)&&(p[w]=b[w])}return p},f=function(p,d,C){if(p){var b=s(p,"length");(b&&typeof b.value=="number"?h:o).call(p,d,C=C||p)}return C};function g(p,d,C,b,w){var _={};function x(S,E){E=E||(E=s(d,S))&&(E.get?E:E.value),typeof E=="string"&&E[0]==="#"&&(E=p[E.substring(1)]||E);var T=typeof E=="function",O=E,V=w||T&&!E.base?E&&E.get?S in p:p[S]:null,L;(!w||!V)&&(T&&V&&(E.base=V),T&&b!==!1&&(L=S.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(_[L[3].toLowerCase()+L[4]]=L[2]),(!O||T||!O.get||typeof O.get!="function"||!v.isPlainObject(O))&&(O={value:O,writable:!0}),(s(p,S)||{configurable:!0}).configurable&&(O.configurable=!0,O.enumerable=C??!L),a(p,S,O))}if(d){for(var c in d)d.hasOwnProperty(c)&&!e.test(c)&&x(c);for(var c in _){var y=_[c],k=p["set"+y],A=p["get"+y]||k&&p["is"+y];A&&(b===!0||A.length===0)&&x(c,{get:A,set:k})}}return p}function v(){for(var p=0,d=arguments.length;p<d;p++){var C=arguments[p];C&&l(this,C)}return this}return g(v,{inject:function(p){if(p){var d=p.statics===!0?p:p.statics,C=p.beans,b=p.preserve;d!==p&&g(this.prototype,p,p.enumerable,C,b),g(this,d,null,C,b)}for(var w=1,_=arguments.length;w<_;w++)this.inject(arguments[w]);return this},extend:function(){for(var p=this,d,C,b=0,w,_=arguments.length;b<_&&!(d&&C);b++)w=arguments[b],d=d||w.initialize,C=C||w.prototype;return d=d||function(){p.apply(this,arguments)},C=d.prototype=C||r(this.prototype),a(C,"constructor",{value:d,writable:!0,configurable:!0}),g(d,this),arguments.length&&this.inject.apply(d,arguments),d.base=p,d}}).inject({enumerable:!1,initialize:v,set:v,inject:function(){for(var p=0,d=arguments.length;p<d;p++){var C=arguments[p];C&&g(this,C,C.enumerable,C.beans,C.preserve)}return this},extend:function(){var p=r(this);return p.inject.apply(p,arguments)},each:function(p,d){return f(this,p,d)},clone:function(){return new this.constructor(this)},statics:{set:l,each:f,create:r,define:a,describe:s,clone:function(p){return l(new p.constructor,p)},isPlainObject:function(p){var d=p!=null&&p.constructor;return d&&(d===Object||d===v||d.name==="Object")},pick:function(p,d){return p!==X?p:d},slice:function(p,d,C){return n.call(p,d,C)}}})};qe.exports=R,R.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+R.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+(n==="number"?at.instance.number(e):n==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return R.importJSON(e,this)},exportJSON:function(e){return R.exportJSON(this,e)},toJSON:function(){return R.serialize(this)},set:function(e,t){return e&&R.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!R.exports[n]&&(R.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&typeof e=="object"&&typeof t=="object"){if(Array.isArray(e)&&Array.isArray(t)){var n=e.length;if(n!==t.length)return!1;for(;n--;)if(!R.equals(e[n],t[n]))return!1}else{var r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(;n--;){var s=r[n];if(!(t.hasOwnProperty(s)&&R.equals(e[s],t[s])))return!1}}return!0}return!1},read:function(e,t,n,r){if(this===R){var s=this.peek(e,t);return e.__index++,s}var a=this.prototype,h=a._readIndex,o=t||h&&e.__index||0,l=e.length,f=e[o];if(r=r||l-o,f instanceof this||n&&n.readNull&&f==null&&r<=1)return h&&(e.__index=o+1),f&&n&&n.clone?f.clone():f;if(f=R.create(a),h&&(f.__read=!0),f=f.initialize.apply(f,o>0||o+r<l?R.slice(e,o,o+r):e)||f,h){e.__index=o+f.__read;var g=f.__filtered;g&&(e.__filtered=g,f.__filtered=X),f.__read=X}return f},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,r){for(var s=[],a,h=t||0,o=r?h+r:e.length,l=h;l<o;l++)s.push(Array.isArray(a=e[l])?this.read(a,0,n):this.read(e,l,n,1));return s},readNamed:function(e,t,n,r,s){var a=this.getNamed(e,t),h=a!==X;if(h){var o=e.__filtered;if(!o){var l=this.getSource(e);o=e.__filtered=R.create(l),o.__unfiltered=l}o[t]=X}return this.read(h?[a]:e,n,r,s)},readSupported:function(e,t){var n=this.getSource(e),r=this,s=!1;return n&&Object.keys(n).forEach(function(a){if(a in t){var h=r.readNamed(e,a);h!==X&&(t[a]=h),s=!0}}),s},getSource:function(e){var t=e.__source;if(t===X){var n=e.length===1&&e[0];t=e.__source=n&&R.isPlainObject(n)?n:null}return t},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n,r){var s;function a(g){if(!(n&&g in n)&&!(s&&g in s)){var v=t[g];v!==X&&(e[g]=v)}}if(r){for(var h={},o=0,l,f=r.length;o<f;o++)(l=r[o])in t&&(a(l),h[l]=!0);s=h}return Object.keys(t.__unfiltered||t).forEach(a),e},isPlainValue:function(e,t){return R.isPlainObject(e)||Array.isArray(e)||t&&typeof e=="string"},serialize:function(e,t,n,r){t=t||{};var s=!r,a;if(s&&(t.formatter=new at(t.precision),r={length:0,definitions:{},references:{},add:function(v,p){var d="#"+v._id,C=this.references[d];if(!C){this.length++;var b=p.call(v),w=v._class;w&&b[0]!==w&&b.unshift(w),this.definitions[d]=b,C=this.references[d]=[d]}return C}}),e&&e._serialize){a=e._serialize(t,r);var h=e._class;h&&!e._compactSerialize&&(s||!n)&&a[0]!==h&&a.unshift(h)}else if(Array.isArray(e)){a=[];for(var o=0,l=e.length;o<l;o++)a[o]=R.serialize(e[o],t,n,r)}else if(R.isPlainObject(e)){a={};for(var f=Object.keys(e),o=0,l=f.length;o<l;o++){var g=f[o];a[g]=R.serialize(e[g],t,n,r)}}else typeof e=="number"?a=t.formatter.number(e,t.precision):a=e;return s&&r.length>0?[["dictionary",r.definitions],a]:a},deserialize:function(e,t,n,r,s){var a=e,h=!n,o=h&&e&&e.length&&e[0][0]==="dictionary";if(n=n||{},Array.isArray(e)){var l=e[0],f=l==="dictionary";if(e.length==1&&/^#/.test(l))return n.dictionary[l];l=R.exports[l],a=[];for(var g=l?1:0,v=e.length;g<v;g++)a.push(R.deserialize(e[g],t,n,f,o));if(l){var p=a;t?a=t(l,p,h||s):a=new l(p)}}else if(R.isPlainObject(e)){a={},r&&(n.dictionary=a);for(var d in e)a[d]=R.deserialize(e[d],t,n)}return o?a[1]:a},exportJSON:function(e,t){var n=R.serialize(e,t);return t&&t.asString==!1?n:JSON.stringify(n)},importJSON:function(e,t){return R.deserialize(typeof e=="string"?JSON.parse(e):e,function(n,r,s){var a=s&&t&&t.constructor===n,h=a?t:R.create(n.prototype);if(r.length===1&&h instanceof P&&(a||!(h instanceof _t))){var o=r[0];R.isPlainObject(o)&&(o.insert=!1,a&&(r=r.concat([P.INSERT])))}return(a?h.set:n).apply(h,r),a&&(t=null),h})},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var r=e.length;e.length+=n;for(var s=0;s<n;s++)e[r+s]=t[s]}return e},splice:function(e,t,n,r){var s=t&&t.length,a=n===X;n=a?e.length:n,n>e.length&&(n=e.length);for(var h=0;h<s;h++)t[h]._index=n+h;if(a)return R.push(e,t),[];var o=[n,r];t&&R.push(o,t);for(var l=e.splice.apply(e,o),h=0,f=l.length;h<f;h++)l[h]._index=X;for(var h=n+s,f=e.length;h<f;h++)e[h]._index=h;return l},capitalize:function(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(t,n){return n.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var je={on:function(e,t){if(typeof e!="string")R.each(e,function(a,h){this.on(h,a)},this);else{var n=this._eventTypes,r=n&&n[e],s=this._callbacks=this._callbacks||{};s=s[e]=s[e]||[],s.indexOf(t)===-1&&(s.push(t),r&&r.install&&s.length===1&&r.install.call(this,e))}return this},off:function(e,t){if(typeof e!="string"){R.each(e,function(h,o){this.off(o,h)},this);return}var n=this._eventTypes,r=n&&n[e],s=this._callbacks&&this._callbacks[e],a;return s&&(!t||(a=s.indexOf(t))!==-1&&s.length===1?(r&&r.uninstall&&r.uninstall.call(this,e),delete this._callbacks[e]):a!==-1&&s.splice(a,1)),this},once:function(e,t){return this.on(e,function n(){t.apply(this,arguments),this.off(e,n)})},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var r=R.slice(arguments,1),s=t&&t.target&&!t.currentTarget;n=n.slice(),s&&(t.currentTarget=this);for(var a=0,h=n.length;a<h;a++)if(n[a].apply(this,r)==!1){t&&t.stop&&t.stop();break}return s&&delete t.currentTarget,!0},responds:function(e){return!!(this._callbacks&&this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,r=e?"install":"uninstall";if(t){for(var s in n)if(n[s].length>0){var a=t[s],h=a&&a[r];h&&h.call(this,s)}}},statics:{inject:function e(t){var n=t._events;if(n){var r={};R.each(n,function(s,a){var h=typeof s=="string",o=h?s:a,l=R.capitalize(o),f=o.substring(2).toLowerCase();r[f]=h?{}:s,o="_"+o,t["get"+l]=function(){return this[o]},t["set"+l]=function(g){var v=this[o];v&&this.off(f,v),g&&this.on(f,g),this[o]=g}}),t._eventTypes=r}return e.base.apply(this,arguments)}}},Ue=R.extend({_class:"PaperScope",initialize:function e(){Pe=this,this.settings=new R({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var n=Ye.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:wt.nativeModes},Ye.release(n)}if(!this.agent){var r=ot.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],a=s==="darwin"?"mac":s,h=t.agent=t.browser={platform:a};a&&(h[a]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(o,l,f,g,v){if(!h.chrome){var p=l==="opera"?g:/^(node|trident)$/.test(l)?v:f;h.version=p,h.versionNumber=parseFloat(p),l={trident:"msie",jsdom:"node"}[l]||l,h.name=l,h[l]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=Pe.PaperScript.execute(e,this,t);return Ge.updateFocus(),n},install:function(e){var t=this;R.each(["project","view","tool"],function(r){R.define(e,r,{configurable:!0,get:function(){return t[r]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return Pe=this,this.project=new ge(e),this},createCanvas:function(e,t){return Ye.getCanvas(e,t)},activate:function(){Pe=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(var n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete Ue._scopes[this._id]},statics:new function(){function e(t){return t+="Attribute",function(n,r){return n[t](r)||n[t]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),st=R.extend(je,{initialize:function(e){this._scope=Pe,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(R.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),bt={findItemBoundsCollisions:function(e,t,n){function r(h){for(var o=new Array(h.length),l=0;l<h.length;l++){var f=h[l].getBounds();o[l]=[f.left,f.top,f.right,f.bottom]}return o}var s=r(e),a=!t||t===e?s:r(t);return this.findBoundsCollisions(s,a,n||0)},findCurveBoundsCollisions:function(e,t,n,r){function s(p){for(var d=Math.min,C=Math.max,b=new Array(p.length),w=0;w<p.length;w++){var _=p[w];b[w]=[d(_[0],_[2],_[4],_[6]),d(_[1],_[3],_[5],_[7]),C(_[0],_[2],_[4],_[6]),C(_[1],_[3],_[5],_[7])]}return b}var a=s(e),h=!t||t===e?a:s(t);if(r){for(var o=this.findBoundsCollisions(a,h,n||0,!1,!0),l=this.findBoundsCollisions(a,h,n||0,!0,!0),f=[],g=0,v=o.length;g<v;g++)f[g]={hor:o[g],ver:l[g]};return f}return this.findBoundsCollisions(a,h,n||0)},findBoundsCollisions:function(e,t,n,r,s){var a=!t||e===t,h=a?e:e.concat(t),o=e.length,l=h.length;function f(ee,ne,le){for(var K=0,Q=ee.length;K<Q;){var se=Q+K>>>1;h[ee[se]][ne]<le?K=se+1:Q=se}return K-1}for(var g=r?1:0,v=g+2,p=r?0:1,d=p+2,C=new Array(l),b=0;b<l;b++)C[b]=b;C.sort(function(ee,ne){return h[ee][g]-h[ne][g]});for(var w=[],_=new Array(o),b=0;b<l;b++){var x=C[b],c=h[x],y=a?x:x-o,k=x<o,A=a||!k,S=k?[]:null;if(w.length){var E=f(w,v,c[g]-n)+1;if(w.splice(0,E),a&&s){S=S.concat(w);for(var T=0;T<w.length;T++){var O=w[T];_[O].push(y)}}else for(var V=c[d],L=c[p],T=0;T<w.length;T++){var O=w[T],z=h[O],B=O<o,q=a||O>=o;(s||(k&&q||A&&B)&&V>=z[p]-n&&L<=z[d]+n)&&(k&&q&&S.push(a?O:O-o),A&&B&&_[O].push(y))}}if(k&&(e===t&&S.push(x),_[x]=S),w.length){var U=c[v],W=f(w,v,U);w.splice(W+1,0,x)}else w.push(x)}for(var b=0;b<_.length;b++){var J=_[b];J&&J.sort(function(ne,le){return ne-le})}return _}},at=R.extend({initialize:function(e){this.precision=R.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});at.instance=new at;var Me=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,s=Math.pow,a=Math.log2||function(v){return Math.log(v)*Math.LOG2E},h=1e-12,o=112e-18;function l(v,p,d){return v<p?p:v>d?d:v}function f(v,p,d){function C(E){var T=E*134217729,O=E-T,V=O+T,L=E-V;return[V,L]}var b=p*p-v*d,w=p*p+v*d;if(n(b)*3<w){var _=C(v),x=C(p),c=C(d),y=p*p,k=x[0]*x[0]-y+2*x[0]*x[1]+x[1]*x[1],A=v*d,S=_[0]*c[0]-A+_[0]*c[1]+_[1]*c[0]+_[1]*c[1];b=y-A+(k-S)}return b}function g(){var v=Math.max.apply(Math,arguments);return v&&(v<1e-8||v>1e8)?s(2,-Math.round(a(v))):0}return{EPSILON:h,MACHINE_EPSILON:o,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(v){return v>=-h&&v<=h},isMachineZero:function(v){return v>=-o&&v<=o},clamp:l,integrate:function(v,p,d,C){for(var b=e[C-2],w=t[C-2],_=(d-p)*.5,x=_+p,c=0,y=C+1>>1,k=C&1?w[c++]*v(x):0;c<y;){var A=_*b[c];k+=w[c++]*(v(x+A)+v(x-A))}return _*k},findRoot:function(v,p,d,C,b,w,_){for(var x=0;x<w;x++){var c=v(d),y=c/p(d),k=d-y;if(n(y)<_){d=k;break}c>0?(b=d,d=k<=C?(C+b)*.5:k):(C=d,d=k>=b?(C+b)*.5:k)}return l(d,C,b)},solveQuadratic:function(v,p,d,C,b,w){var _,x=1/0;if(n(v)<h){if(n(p)<h)return n(d)<h?-1:0;_=-d/p}else{p*=-.5;var c=f(v,p,d);if(c&&n(c)<o){var y=g(n(v),n(p),n(d));y&&(v*=y,p*=y,d*=y,c=f(v,p,d))}if(c>=-o){var k=c<0?0:r(c),A=p+(p<0?-k:k);A===0?(_=d/v,x=-_):(_=A/v,x=d/A)}}var S=0,E=b==null,T=b-h,O=w+h;return isFinite(_)&&(E||_>T&&_<O)&&(C[S++]=E?_:l(_,b,w)),x!==_&&isFinite(x)&&(E||x>T&&x<O)&&(C[S++]=E?x:l(x,b,w)),S},solveCubic:function(v,p,d,C,b,w,_){var x=g(n(v),n(p),n(d),n(C)),c,y,k,A,S;x&&(v*=x,p*=x,d*=x,C*=x);function E(W){c=W;var J=v*c;y=J+p,k=y*c+d,A=(J+y)*c+k,S=k*c+C}if(n(v)<h)v=p,y=d,k=C,c=1/0;else if(n(C)<h)y=p,k=d,c=0;else{E(-(p/v)/3);var T=S/v,O=s(n(T),1/3),V=T<0?-1:1,L=-A/v,z=L>0?1.324717957244746*Math.max(O,r(L)):O,B=c-V*z;if(B!==c){do E(B),B=A===0?c:c-S/A/(1+o);while(V*B>V*c);n(v)*c*c>n(C/c)&&(k=-C/c,y=(k-d)/c)}}var q=Me.solveQuadratic(v,y,k,b,w,_),U=w==null;return isFinite(c)&&(q===0||q>0&&c!==b[0]&&c!==b[1])&&(U||c>w-h&&c<_+h)&&(b[q++]=U?c:l(c,w,_)),q}}},xt={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}else return this._id++}},D=R.extend({_class:"Point",_readIndex:!0,initialize:function(t,n){var r=typeof t,s=this.__read,a=0;if(r==="number"){var h=typeof n=="number";this._set(t,h?n:t),s&&(a=h?2:1)}else if(r==="undefined"||t===null)this._set(0,0),s&&(a=t===null?1:0);else{var o=r==="string"?t.split(/[\s,]+/)||[]:t;a=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),a=0)}return s&&(this.__read=a),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new D(this.x,this.y)},toString:function(){var e=at.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();Me.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=D.read(arguments),t=this.getLength()*e.getLength();if(Me.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=D.read(arguments);return Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},getDistance:function(){var e=arguments,t=D.read(e),n=t.x-this.x,r=t.y-this.y,s=n*n+r*r,a=R.read(e);return a?s:Math.sqrt(s)},normalize:function(e){e===X&&(e=1);var t=this.getLength(),n=t!==0?e/t:0,r=new D(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(e,t){if(e===0)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),s=Math.cos(e);return n=new D(n.x*s-n.y*r,n.x*r+n.y*s),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=D.read(arguments);return new D(this.x+e.x,this.y+e.y)},subtract:function(){var e=D.read(arguments);return new D(this.x-e.x,this.y-e.y)},multiply:function(){var e=D.read(arguments);return new D(this.x*e.x,this.y*e.y)},divide:function(){var e=D.read(arguments);return new D(this.x/e.x,this.y/e.y)},modulo:function(){var e=D.read(arguments);return new D(this.x%e.x,this.y%e.y)},negate:function(){return new D(-this.x,-this.y)},isInside:function(){return Z.read(arguments).contains(this)},isClose:function(){var e=arguments,t=D.read(e),n=R.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=D.read(arguments);return D.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=D.read(arguments);return D.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=Me.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=D.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=D.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=D.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new D(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=D.read(e),n=D.read(e);return new D(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=D.read(e),n=D.read(e);return new D(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new D(Math.random(),Math.random())},isCollinear:function(e,t,n,r){return Math.abs(e*r-t*n)<=Math.sqrt((e*e+t*t)*(n*n+r*r))*1e-8},isOrthogonal:function(e,t,n,r){return Math.abs(e*n+t*r)<=Math.sqrt((e*e+t*t)*(n*n+r*r))*1e-8}}},R.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new D(t(this.x),t(this.y))}},{})),fe=D.extend({initialize:function(t,n,r,s){this._x=t,this._y=n,this._owner=r,this._setter=s},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),$=R.extend({_class:"Size",_readIndex:!0,initialize:function(t,n){var r=typeof t,s=this.__read,a=0;if(r==="number"){var h=typeof n=="number";this._set(t,h?n:t),s&&(a=h?2:1)}else if(r==="undefined"||t===null)this._set(0,0),s&&(a=t===null?1:0);else{var o=r==="string"?t.split(/[\s,]+/)||[]:t;a=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),a=0)}return s&&(this.__read=a),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new $(this.width,this.height)},toString:function(){var e=at.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=$.read(arguments);return new $(this.width+e.width,this.height+e.height)},subtract:function(){var e=$.read(arguments);return new $(this.width-e.width,this.height-e.height)},multiply:function(){var e=$.read(arguments);return new $(this.width*e.width,this.height*e.height)},divide:function(){var e=$.read(arguments);return new $(this.width/e.width,this.height/e.height)},modulo:function(){var e=$.read(arguments);return new $(this.width%e.width,this.height%e.height)},negate:function(){return new $(-this.width,-this.height)},isZero:function(){var e=Me.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new $(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new $(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new $(Math.random(),Math.random())}}},R.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new $(t(this.width),t(this.height))}},{})),ue=$.extend({initialize:function(t,n,r,s){this._width=t,this._height=n,this._owner=r,this._setter=s},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),Z=R.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,n,r,s){var a=arguments,h=typeof t,o;if(h==="number"?(this._set(t,n,r,s),o=4):h==="undefined"||t===null?(this._set(0,0,0,0),o=t===null?1:0):a.length===1&&(Array.isArray(t)?(this._set.apply(this,t),o=1):t.x!==X||t.width!==X?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),o=1):t.from===X&&t.to===X&&(this._set(0,0,0,0),R.readSupported(a,this)&&(o=1))),o===X){var l=D.readNamed(a,"from"),f=R.peek(a),g=l.x,v=l.y,p,d;if(f&&f.x!==X||R.hasNamed(a,"to")){var C=D.readNamed(a,"to");p=C.x-g,d=C.y-v,p<0&&(g=C.x,p=-p),d<0&&(v=C.y,d=-d)}else{var b=$.read(a);p=b.width,d=b.height}this._set(g,v,p,d),o=a.__index}var w=a.__filtered;return w&&(this.__filtered=w),this.__read&&(this.__read=o),this},set:"#initialize",_set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},clone:function(){return new Z(this.x,this.y,this.width,this.height)},equals:function(e){var t=R.isPlainValue(e)?Z.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=at.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?D:fe;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=D.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?$:ue;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=$.read(arguments),t=this._sx,n=this._sy,r=e.width,s=e.height;t&&(this.x+=(this.width-r)*t),n&&(this.y+=(this.height-s)*n),this.width=r,this.height=s,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=this._sx===.5?t*2:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=this._sy===.5?t*2:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=this._sx===.5?t*2:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=this._sy===.5?t*2:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||this._sx===.5?this.x=e-this.width/2:(this._sx&&(this.x+=(e-this.x)*2*this._sx),this.width=(e-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||this._sy===.5?this.y=e-this.height/2:(this._sy&&(this.y+=(e-this.y)*2*this._sy),this.height=(e-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(e){var t=e?D:fe;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=D.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(e){return e&&e.width!==X||(Array.isArray(e)?e:arguments).length===4?this._containsRectangle(Z.read(arguments)):this._containsPoint(D.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=Z.read(arguments),t=R.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=Z.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),s=Math.min(this.y+this.height,e.y+e.height);return new Z(t,n,r-t,s-n)},unite:function(){var e=Z.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),s=Math.max(this.y+this.height,e.y+e.height);return new Z(t,n,r-t,s-n)},include:function(){var e=D.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),s=Math.max(this.y+this.height,e.y);return new Z(t,n,r-t,s-n)},expand:function(){var e=$.read(arguments),t=e.width,n=e.height;return new Z(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===X?e:t)-this.height)}},R.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var s=e[r?0:1],a=e[r?1:0],h="get"+s,o="get"+a,l="set"+s,f="set"+a,g="get"+n,v="set"+n;this[g]=function(p){var d=p?D:fe;return new d(this[h](),this[o](),this,v)},this[v]=function(){var p=D.read(arguments);this[l](p.x),this[f](p.y)}},{beans:!0})),xe=Z.extend({initialize:function(t,n,r,s,a,h){this._set(t,n,r,s,!0),this._owner=a,this._setter=h},_set:function(e,t,n,r,s){return this._x=e,this._y=t,this._width=n,this._height=r,s||this._owner[this._setter](this),this}},new function(){var e=Z.prototype;return R.each(["x","y","width","height"],function(t){var n=R.capitalize(t),r="_"+t;this["get"+n]=function(){return this[r]},this["set"+n]=function(s){this[r]=s,this._dontNotify||this._owner[this._setter](this)}},R.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(t){var n=this._owner;n._changeSelection&&n._changeSelection(2,t)}}))}),oe=R.extend({_class:"Matrix",initialize:function e(t,n){var r=arguments,s=r.length,a=!0;if(s>=6?this._set.apply(this,r):s===1||s===2?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):a=!1:s?a=!1:this.reset(),!a)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,r,s,a,h){return this._a=e,this._b=t,this._c=n,this._d=r,this._tx=s,this._ty=a,h||this._changed(),this},_serialize:function(e,t){return R.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new oe(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=at.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return n?(n.transform(null,R.pick(e,!0),t),this.isIdentity()):!1},translate:function(){var e=D.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=D.read(e),n=D.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=D.read(arguments,1),n=t.x,r=t.y,s=Math.cos(e),a=Math.sin(e),h=n-n*s+r*a,o=r-n*a-r*s,l=this._a,f=this._b,g=this._c,v=this._d;return this._a=s*l+a*g,this._b=s*f+a*v,this._c=-a*l+s*g,this._d=-a*f+s*v,this._tx+=h*l+o*g,this._ty+=h*f+o*v,this._changed(),this},shear:function(){var e=arguments,t=D.read(e),n=D.read(e,0,{readNull:!0});n&&this.translate(n);var r=this._a,s=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*s,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=D.read(e),n=D.read(e,0,{readNull:!0}),r=Math.PI/180,s=new D(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(s,n)},append:function(e,t){if(e){var n=this._a,r=this._b,s=this._c,a=this._d,h=e._a,o=e._c,l=e._b,f=e._d,g=e._tx,v=e._ty;this._a=h*n+l*s,this._c=o*n+f*s,this._b=h*r+l*a,this._d=o*r+f*a,this._tx+=g*n+v*s,this._ty+=g*r+v*a,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,r=this._b,s=this._c,a=this._d,h=this._tx,o=this._ty,l=e._a,f=e._c,g=e._b,v=e._d,p=e._tx,d=e._ty;this._a=l*n+f*r,this._c=l*s+f*a,this._b=g*n+v*r,this._d=g*s+v*a,this._tx=l*h+f*o+p,this._ty=g*h+v*o+d,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,r=this._d,s=this._tx,a=this._ty,h=e*r-t*n,o=null;return h&&!isNaN(h)&&isFinite(s)&&isFinite(a)&&(this._a=r/h,this._b=-t/h,this._c=-n/h,this._d=e/h,this._tx=(n*a-r*s)/h,this._ty=(t*s-e*a)/h,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new oe(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(D.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var r=e.x,s=e.y;return t||(t=new D),t._set(r*this._a+s*this._c+this._tx,r*this._b+s*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var r=0,s=2*n;r<s;r+=2){var a=e[r],h=e[r+1];t[r]=a*this._a+h*this._c+this._tx,t[r+1]=a*this._b+h*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,s=n+e.height,a=[t,n,r,n,r,s,t,s];return this._transformCoordinates(a,a,4)},_transformBounds:function(e,t,n){for(var r=this._transformCorners(e),s=r.slice(0,2),a=s.slice(),h=2;h<8;h++){var o=r[h],l=h&1;o<s[l]?s[l]=o:o>a[l]&&(a[l]=o)}return t||(t=new Z),t._set(s[0],s[1],a[0]-s[0],a[1]-s[1],n)},inverseTransform:function(){return this._inverseTransform(D.read(arguments))},_inverseTransform:function(e,t,n){var r=this._a,s=this._b,a=this._c,h=this._d,o=this._tx,l=this._ty,f=r*h-s*a,g=null;if(f&&!isNaN(f)&&isFinite(o)&&isFinite(l)){var v=e.x-this._tx,p=e.y-this._ty;t||(t=new D),g=t._set((v*h-p*a)/f,(p*r-v*s)/f,n)}return g},decompose:function(){var e=this._a,t=this._b,n=this._c,r=this._d,s=e*r-t*n,a=Math.sqrt,h=Math.atan2,o=180/Math.PI,l,f,g;if(e!==0||t!==0){var v=a(e*e+t*t);l=Math.acos(e/v)*(t>0?1:-1),f=[v,s/v],g=[h(e*n+t*r,v*v),0]}else if(n!==0||r!==0){var p=a(n*n+r*r);l=Math.asin(n/p)*(r>0?1:-1),f=[s/p,p],g=[0,h(e*n+t*r,p*p)]}else l=0,g=f=[0,0];return{translation:this.getTranslation(),rotation:l*o,scaling:new D(f),skewing:new D(g[0]*o,g[1]*o)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new D(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},R.each(["a","b","c","d","tx","ty"],function(e){var t=R.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(r){this[n]=r,this._changed()}},{})),Ae=R.extend({_class:"Line",initialize:function(t,n,r,s,a){var h=!1;arguments.length>=4?(this._px=t,this._py=n,this._vx=r,this._vy=s,h=a):(this._px=t.x,this._py=t.y,this._vx=n.x,this._vy=n.y,h=r),h||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new D(this._px,this._py)},getVector:function(){return new D(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return Ae.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return Ae.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return Ae.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return D.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return D.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,r,s,a,h,o,l,f){l||(n-=e,r-=t,h-=s,o-=a);var g=n*o-r*h;if(!Me.isMachineZero(g)){var v=e-s,p=t-a,d=(h*p-o*v)/g,C=(n*p-r*v)/g,b=1e-12,w=-b,_=1+b;if(f||w<d&&d<_&&w<C&&C<_)return f||(d=d<=0?0:d>=1?1:d),new D(e+d*n,t+d*r)}},getSide:function(e,t,n,r,s,a,h,o){h||(n-=e,r-=t);var l=s-e,f=a-t,g=l*r-f*n;return!o&&Me.isMachineZero(g)&&(g=(l*n+l*n)/(n*n+r*r),g>=0&&g<=1&&(g=0)),g<0?-1:g>0?1:0},getSignedDistance:function(e,t,n,r,s,a,h){return h||(n-=e,r-=t),n===0?r>0?s-e:e-s:r===0?n<0?a-t:t-a:((s-e)*r-(a-t)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(e,t,n,r,s,a,h){return Math.abs(Ae.getSignedDistance(e,t,n,r,s,a,h))}}}),ge=st.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){st.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new pi(null,null,this),this._view=Ge.create(this,t||Ye.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return R.serialize(this._children,e,!0,t)},_changed:function(e,t){if(e&1){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&t){var s=this._changesById,a=t._id,h=s[a];h?h.flags|=e:r.push(s[a]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return e.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new _t({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:Wt,match:function(n){var r=n._definition,s=r._id;return t[s]||(t[s]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var r=e[n],s=r._selection;s&1&&r.isInserted()?t.push(r):s||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(X,e)},insertLayer:function(e,t){if(t instanceof _t){t._remove(!1,!0),R.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(X,new _t(P.NO_INSERT),!0)).insertChild(e,t),n&&t.activate&&t.activate(),t},getItems:function(e){return P._getItems(this,e)},getItem:function(e){return P._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return R.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){e==="mouseup"&&(t.mousedrag=null);var n=t[e];if(n){for(var r in n){var s=n[r];for(var a in t){var h=t[a];h&&h!=n&&delete h[s._id]}s.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,s=new R({offset:new D(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new oe],updateMatrix:!0}),a=0,h=r.length;a<h;a++)r[a].draw(e,s);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var o=this._selectionItems,l=this._scope.settings.handleSize,f=this._updateVersion;for(var g in o)o[g]._drawSelection(e,t,l,o,f);e.restore()}}}),P=R.extend(je,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=R.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new oe,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return R.each(e,function(t){this._events[t]={install:function(n){this.getView()._countItemEvent(n,1)},uninstall:function(n){this.getView()._countItemEvent(n,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var n=e&&R.isPlainObject(e),r=n&&e.internal===!0,s=this._matrix=new oe,a=n&&e.project||Pe.project,h=Pe.settings;return this._id=r?null:xt.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,t&&s.translate(t),s._owner=this,this._style=new pi(a._currentStyle,this,a),r||n&&e.insert==!1||!h.insertItems&&!(n&&e.insert==!0)?this._setProject(a):(n&&e.parent||a)._insertItem(X,this,!0),n&&e!==P.NO_INSERT&&e!==P.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){var n={},r=this;function s(a){for(var h in a){var o=r[h];R.equals(o,h==="leading"?a.fontSize*1.2:a[h])||(n[h]=R.serialize(o,e,h!=="data",t))}}return s(this._serializeFields),this instanceof ie||s(this._style._defaults),[this._class,n]},_changed:function(e){var t=this._symbol,n=this._parent||t,r=this._project;e&8&&(this._bounds=this._position=this._decomposed=X),e&16&&(this._globalMatrix=X),n&&e&72&&P._clearBoundsCache(n),e&2&&P._clearBoundsCache(this),r&&r._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var n=t._children,r=t._namedChildren;(r[e]=r[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||X,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},R.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=R.capitalize(e),n="_"+e,r={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(s){s!=this[n]&&(this[n]=s,this._changed(r[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren){for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0}return!!(this._selection&1)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(this._selection&1);if(e&&t){for(var n=0,r=e.length;n<r;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,r=t.length;n<r;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?D:fe,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(D.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new fe(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=D.read(arguments,0,{clone:!0,readNull:!0}),this._position=X}},R.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(n){return this.getBounds(n,e)}},{beans:!0,getBounds:function(e,t){var n=t||e instanceof oe,r=R.set({},n?t:e,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var s=this._getCachedBounds(n&&e,r).rect;return arguments.length?s:new xe(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var e=Z.read(arguments),t=this.getBounds(),n=this._matrix,r=new oe,s=e.getCenter();r.translate(s),(e.width!=t.width||e.height!=t.height)&&(n.isInvertible()||(n.set(n._backup||new oe().translate(n.getTranslation())),t=this.getBounds()),r.scale(t.width!==0?e.width/t.width:0,t.height!==0?e.height/t.height:0)),s=t.getCenter(),r.translate(-s.x,-s.y),this.transform(r)},_getBounds:function(e,t){var n=this._children;return!n||!n.length?new Z:(P._updateBoundsCache(this,t.cacheItem),P._getBounds(n,e,t))},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var r=t.internal&&!n,s=t.cacheItem,a=r?null:this._matrix._orNullIfIdentity(),h=s&&(!e||e.equals(a))&&this._getBoundsCacheKey(t,r),o=this._bounds;if(P._updateBoundsCache(this._parent||this._symbol,s),h&&o&&h in o){var l=o[h];return{rect:l.rect.clone(),nonscaling:l.nonscaling}}var f=this._getBounds(e||a,t),g=f.rect||f,v=this._style,p=f.nonscaling||v.hasStroke()&&!v.getStrokeScaling();if(h){o||(this._bounds=o={});var l=o[h]={rect:g.clone(),nonscaling:p,internal:r}}return{rect:g,nonscaling:p}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(t),r.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=X;for(var n=0,r=t.list,s=r.length;n<s;n++){var a=r[n];a!==e&&(a._bounds=a._position=X,a._boundsCache&&P._clearBoundsCache(a))}}},_getBounds:function(e,t,n){var r=1/0,s=-r,a=r,h=s,o=!1;n=n||{};for(var l=0,f=e.length;l<f;l++){var g=e[l];if(g._visible&&!g.isEmpty(!0)){var v=g._getCachedBounds(t&&t.appended(g._matrix),n,!0),p=v.rect;r=Math.min(p.x,r),a=Math.min(p.y,a),s=Math.max(p.x+p.width,s),h=Math.max(p.y+p.height,h),v.nonscaling&&(o=!0)}}return{rect:isFinite(r)?new Z(r,a,s-r,h-a):new Z,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(t!=null&&e!=null){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new fe(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=D.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),r=this._decomposed,s=new oe,a=Me.isZero;if(a(e.x)||a(e.y))s.translate(r.translation),n&&s.rotate(n),s.scale(t.x,t.y),this._matrix.set(s);else{var h=this.getPosition(!0);s.translate(h),n&&s.rotate(n),s.scale(t.x/e.x,t.y/e.y),n&&s.rotate(-n),s.translate(h.negate()),this.transform(s)}r&&(r.scaling=t,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){t=null;for(var s=0,a=r.length;s<a;s++)r[s]._globalMatrix=null;break}r.push(n),n=n._parent}if(!t){t=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&t.prepend(n.getGlobalMatrix(!0))}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,r=0,s=n&&n.length;r<s;r++)n[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,r=0,s=n&&n.length;r<s;r++)n[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof _t)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return R.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(P.NO_INSERT),n=this._children,r=R.pick(e?e.insert:X,e===X||e===!0),s=R.pick(e?e.deep:X,!0);n&&t.copyAttributes(this),(!n||s)&&t.copyContent(this),n||t.copyAttributes(this),r&&t.insertAbove(this);var a=this._name,h=this._parent;if(a&&h){for(var n=h._children,o=a,l=1;n[a];)a=o+" "+l++;a!==o&&t.setName(a)}return t},copyContent:function(e){for(var t=e._children,n=0,r=t&&t.length;n<r;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,s=n.length;r<s;r++){var a=n[r];e.hasOwnProperty(a)&&(this[a]=e[a])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var h=e._data,o=e._name;this._data=h?R.clone(h):null,o&&this.setName(o)},rasterize:function(e,t){var n,r,s;R.isPlainObject(e)?(n=e.resolution,r=e.insert,s=e.raster):(n=e,r=t),s||(s=new Vt(P.NO_INSERT));var a=this.getStrokeBounds(),h=(n||this.getView().getResolution())/72,o=a.getTopLeft().floor(),l=a.getBottomRight().ceil(),f=new $(l.subtract(o)),g=f.multiply(h);if(s.setSize(g,!0),!g.isZero()){var v=s.getContext(!0),p=new oe().scale(h).translate(o.negate());v.save(),p.applyToContext(v),this.draw(v,new R({matrices:[p]})),v.restore()}return s._matrix.set(new oe().translate(o.add(f.divide(2))).scale(1/h)),(r===X||r)&&s.insertAbove(this),s},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(D.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return Z.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Ee.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof P?this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0:!1}},new function(){function e(){var r=arguments;return this._hitTest(D.read(r),It.getOptions(r))}function t(){var r=arguments,s=D.read(r),a=It.getOptions(r),h=[];return this._hitTest(s,new R({all:h},a)),h}function n(r,s,a,h){var o=this._children;if(o)for(var l=o.length-1;l>=0;l--){var f=o[l],g=f!==h&&f._hitTest(r,s,a);if(g&&!s.all)return g}return null}return ge.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,s=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(t.tolerance,1e-12),h=t._tolerancePadding=new $(Ee._getStrokePadding(a,r._shiftless().invert()));if(e=r._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(e))return null;var o=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==R.hyphenate(this._class)||t.class&&!(this instanceof t.class)),l=t.match,f=this,g,v;function p(c){return c&&l&&!l(c)&&(c=null),c&&t.all&&t.all.push(c),c}function d(c,y){var k=y?g["get"+y]():f.getPosition();if(e.subtract(k).divide(h).length<=1)return new It(c,f,{name:y?R.hyphenate(y):c,point:k})}var C=t.position,b=t.center,w=t.bounds;if(o&&this._parent&&(C||b||w)){if((b||w)&&(g=this.getInternalBounds()),v=C&&d("position")||b&&d("center","Center"),!v&&w)for(var _=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],x=0;x<8&&!v;x++)v=d("bounds",_[x]);v=p(v)}return v||(v=this._hitTestChildren(e,t,s)||o&&p(this._hitTestSelf(e,t,s,this.getStrokeScaling()?null:s._shiftless().invert()))||null),v&&v.point&&(v.point=r.transform(v.point)),v},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new It("fill",this)},matches:function(e,t){function n(h,o){for(var l in h)if(h.hasOwnProperty(l)){var f=h[l],g=o[l];if(R.isPlainObject(f)&&R.isPlainObject(g)){if(!n(f,g))return!1}else if(!R.equals(f,g))return!1}return!0}var r=typeof e;if(r==="object"){for(var s in e)if(e.hasOwnProperty(s)&&!this.matches(s,e[s]))return!1;return!0}else{if(r==="function")return e(this);if(e==="match")return t(this);var a=/^(empty|editable)$/.test(e)?this["is"+R.capitalize(e)]():e==="type"?R.hyphenate(this._class):this[e];if(e==="class"){if(typeof t=="function")return this instanceof t;a=this._class}if(typeof t=="function")return!!t(a);if(t){if(t.test)return t.test(a);if(R.isPlainObject(t))return n(t,a)}return R.equals(a,t)}},getItems:function(e){return P._getItems(this,e,this._matrix)},getItem:function(e){return P._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,r,s,a){if(!s){var h=typeof n=="object"&&n,o=h&&h.overlapping,l=h&&h.inside,f=o||l,p=f&&Z.read([f]);s={items:[],recursive:h&&h.recursive!==!1,inside:!!l,overlapping:!!o,rect:p,path:o&&new Ee.Rectangle({rectangle:p,insert:!1})},h&&(n=R.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var g=t._children,v=s.items,p=s.rect;r=p&&(r||new oe);for(var d=0,C=g&&g.length;d<C;d++){var b=g[d],w=r&&r.appended(b._matrix),_=!0;if(p){var f=b.getBounds(w);if(!p.intersects(f))continue;p.contains(f)||s.overlapping&&(f.contains(p)||s.path.intersects(b,w))||(_=!1)}if(_&&b.matches(n)&&(v.push(b),a)||(s.recursive!==!1&&e(b,n,w,s,a),a&&v.length>0))break}return v}}},{importJSON:function(e){var t=R.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(X,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){t=R.slice(t);for(var r={},s=t.length-1;s>=0;s--){var a=t[s],h=a&&a._id;!a||r[h]?t.splice(s,1):(a._remove(!1,!0),r[h]=!0)}R.splice(n,t,e,0);for(var o=this._project,l=o._changes,s=0,f=t.length;s<f;s++){var a=t[s],g=a._name;a._parent=this,a._setProject(o,!0),g&&a.setName(g),l&&a._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),r=e!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(e._index+t,r)),r},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(X,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(X,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&t.length===1){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,r=this._name,s=n[r],a=s?s.indexOf(this):-1;a!==-1&&(t[r]==this&&delete t[r],s.splice(a,1),s.length?t[r]=s[0]:delete n[r])}},_remove:function(e,t){var n=this._getOwner(),r=this._project,s=this._index;return this._style&&this._style._dispose(),n?(this._name&&this._removeNamed(),s!=null&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),R.splice(n._children,null,s,1)),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=R.pick(t,this._children.length);for(var n=R.splice(this._children,null,e,t-e),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var r=0;r<n;r++)if(!t[r].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(h){var o=[];do o.unshift(h);while(h=h._parent);return o}for(var n=t(this),r=t(e),s=0,a=Math.min(n.length,r.length);s<a;s++)if(n[s]!=r[s])return n[s]._index<r[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return this._getOrder(e)===1},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},R.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var n=arguments,r=(t?R:D).read(n),s=D.read(n,0,{readNull:!0});return this.transform(new oe()[e](r,s||this.getPosition(!0)))}},{translate:function(){var e=new oe;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var r=this._matrix,s=e&&!e.isIdentity(),a=n&&this._canApplyMatrix||this._applyMatrix&&(s||!r.isIdentity()||t&&this._children);if(!s&&!a)return this;if(s){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var h=this._style,o=h.getFillColor(!0),l=h.getStrokeColor(!0);o&&o.transform(e),l&&l.transform(e)}if(a&&(a=this._transformContent(r,t,n))){var f=this._pivot;f&&r._transformPoint(f,f,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var g=this._bounds,v=this._position;(s||a)&&this._changed(25);var p=s&&g&&e.decompose();if(p&&p.skewing.isZero()&&p.rotation%90===0){for(var d in g){var C=g[d];if(C.nonscaling)delete g[d];else if(a||!C.internal){var b=C.rect;e._transformBounds(b,b)}}this._bounds=g;var w=g[this._getBoundsCacheKey(this._boundsOptions||{})];w&&(this._position=this._getPositionFromBounds(w.rect))}else s&&v&&this._pivot&&(this._position=e._transformPoint(v,v));return this},_transformContent:function(e,t,n){var r=this._children;if(r){for(var s=0,a=r.length;s<a;s++)r[s].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(D.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(D.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(D.read(arguments))},localToParent:function(){return this._matrix._transformPoint(D.read(arguments))},fitBounds:function(e,t){e=Z.read(arguments);var n=this.getBounds(),r=n.height/n.width,s=e.height/e.width,a=(t?r>s:r<s)?e.width/n.width:e.height/n.height,h=new Z(new D,new $(n.width*a,n.height*a));h.setCenter(e.getCenter()),this.setBounds(h)}}),{_setStyles:function(e,t,n){var r=this._style,s=this._matrix;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e,s)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e,s),e.lineWidth=r.getStrokeWidth();var a=r.getStrokeJoin(),h=r.getStrokeCap(),o=r.getMiterLimit();if(a&&(e.lineJoin=a),h&&(e.lineCap=h),o&&(e.miterLimit=o),Pe.support.nativeDash){var l=r.getDashArray(),f=r.getDashOffset();l&&l.length&&("setLineDash"in e?(e.setLineDash(l),e.lineDashOffset=f):(e.mozDash=l,e.mozDashOffset=f))}}if(r.hasShadow()){var g=t.pixelRatio||1,v=n._shiftless().prepend(new oe().scale(g,g)),p=v.transform(new D(r.getShadowBlur(),0)),d=v.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=p.getLength(),e.shadowOffsetX=d.x,e.shadowOffsetY=d.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var r=t.matrices,s=t.viewMatrix,a=this._matrix,h=r[r.length-1].appended(a);if(h.isInvertible()){s=s?s.appended(h):h,r.push(h),t.updateMatrix&&(this._globalMatrix=h);var o=this._blendMode,l=Me.clamp(this._opacity,0,1),f=o==="normal",g=wt.nativeModes[o],v=f&&l===1||t.dontStart||t.clip||(g||f&&l<1)&&this._canComposite(),p=t.pixelRatio||1,d,C,b;if(!v){var w=this.getStrokeBounds(s);if(!w.width||!w.height){r.pop();return}b=t.offset,C=t.offset=w.getTopLeft().floor(),d=e,e=Ye.getContext(w.getSize().ceil().add(1).multiply(p)),p!==1&&e.scale(p,p)}e.save();var _=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,x=!v&&t.clipItem,c=!_||x;if(v?(e.globalAlpha=l,g&&(e.globalCompositeOperation=o)):c&&e.translate(-C.x,-C.y),c&&(v?a:s).applyToContext(e),x&&t.clipItem.draw(e,t.extend({clip:!0})),_){e.setTransform(p,0,0,p,0,0);var y=t.offset;y&&e.translate(-y.x,-y.y)}this._draw(e,t,s,_),e.restore(),r.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),v||(wt.process(o,e,d,l,C.subtract(b).multiply(p)),Ye.release(e),t.offset=b)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof ut)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,r,s){var a=this._selection,h=a&1,o=a&2||h&&this._selectBounds,l=a&4;if(this._drawSelected||(h=!1),(h||o||l)&&this._isUpdated(s)){var f,g=this.getSelectedColor(!0)||(f=this.getLayer())&&f.getSelectedColor(!0),v=t.appended(this.getGlobalMatrix(!0)),p=n/2;if(e.strokeStyle=e.fillStyle=g?g.toCanvasStyle(e):"#009dec",h&&this._drawSelected(e,v,r),l){var d=this.getPosition(!0),C=this._parent,b=C?C.localToGlobal(d):d,w=b.x,_=b.y;e.beginPath(),e.arc(w,_,p,0,Math.PI*2,!0),e.stroke();for(var x=[[0,-1],[1,0],[0,1],[-1,0]],c=p,y=n+1,k=0;k<4;k++){var A=x[k],S=A[0],E=A[1];e.moveTo(w+S*c,_+E*c),e.lineTo(w+S*y,_+E*y),e.stroke()}}if(o){var T=v._transformCorners(this.getInternalBounds());e.beginPath();for(var k=0;k<8;k++)e[k?"lineTo":"moveTo"](T[k],T[++k]);e.closePath(),e.stroke();for(var k=0;k<8;k++)e.fillRect(T[k]-p,T[++k]-p,n,n)}}},_canComposite:function(){return!1}},R.each(["down","drag","up","move"],function(e){this["removeOn"+R.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,r=this._project,s=r._removeSets=r._removeSets||{};s[n]=s[n]||{},s[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var r=n&&n.easing,s=n&&n.start,a=n!=null&&(typeof n=="number"?n:n.duration),h=new _i(this,e,t,a,r,s);function o(l){h._handleFrame(l.time*1e3),h.running||this.off("frame",o)}return a&&this.on("frame",o),h},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),ie=P.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function e(t){e.base.call(this,t),t&2050&&(this._clipItem=X)},_getClipItem:function(){var e=this._clipItem;if(e===X){e=null;for(var t=this._children,n=0,r=t.length;n<r;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(t),R.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,r){var s=this._getClipItem();return(!s||s.contains(t))&&e.base.call(this,t,n,r,s)},_draw:function(e,t){var n=t.clip,r=!n&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var s=this._children,a=0,h=s.length;a<h;a++){var o=s[a];o!==r&&o.draw(e,t)}}}),_t=ie.extend({_class:"Layer",initialize:function(){ie.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function e(){return this._parent?e.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Fe=P.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,n){this._initialize(t,n)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&R.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new ue(e.width,e.height,this,"setSize")},setSize:function(){var e=$.read(arguments);if(!this._size)this._size=e.clone();else if(!this._size.equals(e)){var t=this._type,n=e.width,r=e.height;t==="rectangle"?this._radius.set($.min(this._radius,e.divide(2).abs())):t==="circle"?(n=r=(n+r)/2,this._radius=n/2):t==="ellipse"&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}},getRadius:function(){var e=this._radius;return this._type==="circle"?e:new ue(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if(t==="circle"){if(e===this._radius)return;var n=e*2;this._radius=e,this._size._set(n,n)}else if(e=$.read(arguments),!this._radius)this._radius=e.clone();else{if(this._radius.equals(e))return;if(this._radius.set(e),t==="rectangle"){var n=$.max(this._size,e.multiply(2));this._size.set(n)}else t==="ellipse"&&this._size._set(e.width*2,e.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new Ee[R.capitalize(this._type)]({center:new D,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),Pe.settings.applyMatrix&&t.setApplyMatrix(!0),(e===X||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,r){var s=this._style,a=s.hasFill(),h=s.hasStroke(),o=t.dontFinish||t.clip,l=!r;if(a||h||o){var f=this._type,g=this._radius,v=f==="circle";if(t.dontStart||e.beginPath(),l&&v)e.arc(0,0,g,0,Math.PI*2,!0);else{var p=v?g:g.width,d=v?g:g.height,C=this._size,b=C.width,w=C.height;if(l&&f==="rectangle"&&p===0&&d===0)e.rect(-b/2,-w/2,b,w);else{var _=b/2,x=w/2,c=1-.5522847498307936,y=p*c,k=d*c,A=[-_,-x+d,-_,-x+k,-_+y,-x,-_+p,-x,_-p,-x,_-y,-x,_,-x+k,_,-x+d,_,x-d,_,x-k,_-y,x,_-p,x,-_+p,x,-_+y,x,-_,x-k,-_,x-d];r&&r.transform(A,A,32),e.moveTo(A[0],A[1]),e.bezierCurveTo(A[2],A[3],A[4],A[5],A[6],A[7]),_!==p&&e.lineTo(A[8],A[9]),e.bezierCurveTo(A[10],A[11],A[12],A[13],A[14],A[15]),x!==d&&e.lineTo(A[16],A[17]),e.bezierCurveTo(A[18],A[19],A[20],A[21],A[22],A[23]),_!==p&&e.lineTo(A[24],A[25]),e.bezierCurveTo(A[26],A[27],A[28],A[29],A[30],A[31])}}e.closePath()}!o&&(a||h)&&(this._setStyles(e,t,n),a&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),h&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new Z(this._size).setCenter(0,0),r=this._style,s=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(n=e._transformBounds(n)),s?n.expand(Ee._getStrokePadding(s,this._getStrokeMatrix(e,t))):n}},new function(){function e(n,r,s){var a=n._radius;if(!a.isZero())for(var h=n._size.divide(2),o=1;o<=4;o++){var l=new D(o>1&&o<4?-1:1,o>2?-1:1),f=l.multiply(h),g=f.subtract(l.multiply(a)),v=new Z(s?f.add(l.multiply(s)):f,g);if(v.contains(r))return{point:g,quadrant:o}}}function t(n,r,s,a){var h=n.divide(r);return(!a||h.isInQuadrant(a))&&h.subtract(h.normalize()).multiply(r).divide(s).length<=1}return{_contains:function n(r){if(this._type==="rectangle"){var s=e(this,r);return s?r.subtract(s.point).divide(this._radius).getLength()<=1:n.base.call(this,r)}else return r.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,s,a,h){var o=!1,l=this._style,f=s.stroke&&l.hasStroke(),g=s.fill&&l.hasFill();if(f||g){var v=this._type,p=this._radius,d=f?l.getStrokeWidth()/2:0,C=s._tolerancePadding.add(Ee._getStrokePadding(d,!l.getStrokeScaling()&&h));if(v==="rectangle"){var b=C.multiply(2),w=e(this,r,b);if(w)o=t(r.subtract(w.point),p,C,w.quadrant);else{var _=new Z(this._size).setCenter(0,0),x=_.expand(b),c=_.expand(b.negate());o=x._containsPoint(r)&&!c._containsPoint(r)}}else o=t(r,p,C)}return o?new It(f?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(t,n,r,s,a){var h=R.create(Fe.prototype);return h._type=t,h._size=r,h._radius=s,h._initialize(R.getNamed(a),n),h}return{Circle:function(){var t=arguments,n=D.readNamed(t,"center"),r=R.readNamed(t,"radius");return e("circle",n,new $(r*2),r,t)},Rectangle:function(){var t=arguments,n=Z.readNamed(t,"rectangle"),r=$.min($.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),r,t)},Ellipse:function(){var t=arguments,n=Fe._readEllipse(t),r=n.radius;return e("ellipse",n.center,r.multiply(2),r,t)},_readEllipse:function(t){var n,r;if(R.hasNamed(t,"radius"))n=D.readNamed(t,"center"),r=$.readNamed(t,"radius");else{var s=Z.readNamed(t,"rectangle");n=s.getCenter(!0),r=s.getSize(!0).divide(2)}return{center:n,radius:r}}}}}),Vt=P.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,n){if(!this._initialize(t,n!==X&&D.read(arguments))){var r,s=typeof t,a=s==="string"?Le.getElementById(t):s==="object"?t:null;if(a&&a!==P.NO_INSERT){if(a.getContext||a.naturalHeight!=null)r=a;else if(a){var h=$.read(arguments);h.isZero()||(r=Ye.getCanvas(h))}}r?this.setImage(r):this.setSource(t)}this._size||(this._size=new $,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var r=Ye.getCanvas(e._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new ue(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var n=$.read(arguments);if(n.equals(this._size))t&&this.clear();else if(n.width>0&&n.height>0){var r=!t&&this.getElement();this._setImage(Ye.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&Ye.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||e.width===0&&e.height===0},getResolution:function(){var e=this._matrix,t=new D(0,0).transform(e),n=new D(1,0).transform(e).subtract(t),r=new D(0,1).transform(e).subtract(t);return new $(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(r){var s=t.getView(),a=r&&r.type||"load";s&&t.responds(a)&&(Pe=s._scope,t.emit(a,new jt(r)))}this._setImage(e),this._loaded?setTimeout(n,0):e&&We.add(e,{load:function(r){t._setImage(e),n(r)},error:n})},_setImage:function(e){this._canvas&&Ye.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new $(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=Ye.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch{Ye.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new ot.Image,n=this._crossOrigin;n&&(t.crossOrigin=n),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=typeof e=="string"?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=Z.read(arguments),t=Ye.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=Z.read(arguments),t=new Vt(P.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=D.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof Nt?(n=e,t=e.getBounds()):typeof e=="object"&&("width"in e?t=new Z(e):"x"in e&&(t=new Z(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var r=32,s=Math.min(t.width,r),a=Math.min(t.height,r),h=Vt._sampleContext;h?h.clearRect(0,0,r+1,r+1):h=Vt._sampleContext=Ye.getContext(new $(r)),h.save();var o=new oe().scale(s/t.width,a/t.height).translate(-t.x,-t.y);o.applyToContext(h),n&&n.draw(h,new R({clip:!0,matrices:[o]})),this._matrix.applyToContext(h);var l=this.getElement(),f=this._size;l&&h.drawImage(l,-f.width/2,-f.height/2),h.restore();for(var g=h.getImageData(.5,.5,Math.ceil(s),Math.ceil(a)).data,v=[0,0,0],p=0,d=0,C=g.length;d<C;d+=4){var b=g[d+3];p+=b,b/=255,v[0]+=g[d]*b,v[1]+=g[d+1]*b,v[2]+=g[d+2]*b}for(var d=0;d<3;d++)v[d]/=p;return p?Ze.read(v):null},getPixel:function(){var e=D.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new Ze("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=D.read(e),n=Ze.read(e),r=n._convert("rgb"),s=n._alpha,a=this.getContext(!0),h=a.createImageData(1,1),o=h.data;o[0]=r[0]*255,o[1]=r[1]*255,o[2]=r[2]*255,o[3]=s!=null?s*255:255,a.putImageData(h,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=$.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=Z.read(arguments);return e.isEmpty()&&(e=new Z(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=D.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var n=new Z(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new It("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){e.globalAlpha=Me.clamp(this._opacity,0,1),this._setStyles(e,t,n);var s=this._smoothing,a=s==="off";He.setPrefixed(e,a?"imageSmoothingEnabled":"imageSmoothingQuality",a?!1:s),e.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Wt=P.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,n){this._initialize(t,n!==X&&D.read(arguments,1))||this.setDefinition(t instanceof tt?t:new tt(t))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var r=t.extend({all:!1}),s=this._definition._item._hitTest(e,r,n);return s&&(s.item=this),s},_draw:function(e,t){this._definition._item.draw(e,t)}}),tt=R.extend({_class:"SymbolDefinition",initialize:function(t,n){this._id=xt.get(),this.project=Pe.project,t&&this.setItem(t,n)},_serialize:function(e,t){return t.add(this,function(){return R.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){e&8&&P._clearBoundsCache(this),e&1&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new D),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new Wt(this,e)},clone:function(){return new tt(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),It=R.extend({_class:"HitResult",initialize:function(t,n,r){this.type=t,this.item=n,r&&this.inject(r)},statics:{getOptions:function(e){var t=e&&R.read(e);return new R({type:null,tolerance:Pe.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),ve=R.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,n,r,s,a,h){var o=arguments.length,l,f,g,v;o>0&&(t==null||typeof t=="object"?o===1&&t&&"point"in t?(l=t.point,f=t.handleIn,g=t.handleOut,v=t.selection):(l=t,f=n,g=r,v=s):(l=[t,n],f=r!==X?[r,s]:null,g=a!==X?[a,h]:null)),new fi(l,this,"_point"),new fi(f,this,"_handleIn"),new fi(g,this,"_handleOut"),v&&this.setSelection(v)},_serialize:function(e,t){var n=this._point,r=this._selection,s=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&s.push(r),R.serialize(s,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n=t._curves,r=this._index,s;n&&((!e||e===this._point||e===this._handleIn)&&(s=r>0?n[r-1]:t._closed?n[n.length-1]:null)&&s._changed(),(!e||e===this._point||e===this._handleOut)&&(s=n[r])&&s._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(D.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(D.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(D.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(this._selection&7)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==X?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new yt(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,n){var r=e||{},s=r.type,a=r.factor,h=this.getPrevious(),o=this.getNext(),l=(h||this)._point,f=this._point,g=(o||this)._point,v=l.getDistance(f),p=f.getDistance(g);if(!s||s==="catmull-rom"){var d=a===X?.5:a,C=Math.pow(v,d),b=C*C,w=Math.pow(p,d),_=w*w;if(!t&&h){var x=2*_+3*w*C+b,c=3*w*(w+C);this.setHandleIn(c!==0?new D((_*l._x+x*f._x-b*g._x)/c-f._x,(_*l._y+x*f._y-b*g._y)/c-f._y):new D)}if(!n&&o){var x=2*b+3*C*w+_,c=3*C*(C+w);this.setHandleOut(c!==0?new D((b*g._x+x*f._x-_*l._x)/c-f._x,(b*g._y+x*f._y-_*l._y)/c-f._y):new D)}}else if(s==="geometric"){if(h&&o){var y=l.subtract(g),k=a===X?.4:a,A=k*v/(v+p);t||this.setHandleIn(y.multiply(A)),n||this.setHandleOut(y.multiply(A-k))}}else throw new Error("Smoothing method '"+s+"' not supported.")},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new ve(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new ve(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var r=1-n,s=n,a=e._point,h=t._point,o=e._handleIn,l=t._handleIn,f=t._handleOut,g=e._handleOut;this._point._set(r*a._x+s*h._x,r*a._y+s*h._y,!0),this._handleIn._set(r*o._x+s*l._x,r*o._y+s*l._y,!0),this._handleOut._set(r*g._x+s*f._x,r*g._y+s*f._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var r=this._point,s=!n||!this._handleIn.isZero()?this._handleIn:null,a=!n||!this._handleOut.isZero()?this._handleOut:null,h=r._x,o=r._y,l=2;return t[0]=h,t[1]=o,s&&(t[l++]=s._x+h,t[l++]=s._y+o),a&&(t[l++]=a._x+h,t[l++]=a._y+o),e&&(e._transformCoordinates(t,t,l/2),h=t[0],o=t[1],n?(r._x=h,r._y=o,l=2,s&&(s._x=t[l++]-h,s._y=t[l++]-o),a&&(a._x=t[l++]-h,a._y=t[l++]-o)):(s||(t[l++]=h,t[l++]=o),a||(t[l++]=h,t[l++]=o))),t}}),fi=D.extend({initialize:function(t,n,r){var s,a,h;if(!t)s=a=0;else if((s=t[0])!==X)a=t[1];else{var o=t;(s=o.x)===X&&(o=D.read(arguments),s=o.x),a=o.y,h=o.selected}this._x=s,this._y=a,this._owner=n,n[r]=this,h&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=Me.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),re=R.extend({_class:"Curve",beans:!0,initialize:function(t,n,r,s,a,h,o,l){var f=arguments.length,g,v,p,d,C,b;f===3?(this._path=t,g=n,v=r):f?f===1?"segment1"in t?(g=new ve(t.segment1),v=new ve(t.segment2)):"point1"in t?(p=t.point1,C=t.handle1,b=t.handle2,d=t.point2):Array.isArray(t)&&(p=[t[0],t[1]],d=[t[6],t[7]],C=[t[2]-t[0],t[3]-t[1]],b=[t[4]-t[6],t[5]-t[7]]):f===2?(g=new ve(t),v=new ve(n)):f===4?(p=t,C=n,b=r,d=s):f===8&&(p=[t,n],d=[o,l],C=[r-t,s-n],b=[a-o,h-l]):(g=new ve,v=new ve),this._segment1=g||new ve(p,null,C),this._segment2=v||new ve(d,b,null)},_serialize:function(e,t){return R.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=X},clone:function(){return new re(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return re.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(D.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(D.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(D.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(D.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return re.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new D(e[n],e[n+1]));return t}},{getLength:function(){return this._length==null&&(this._length=re.getLength(this.getValues(),0,1)),this._length},getArea:function(){return re.getArea(this.getValues())},getLine:function(){return new Ae(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new re(re.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return re.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=1e-8,r=1-n,s=null;if(e>=n&&e<=r){var a=re.subdivide(this.getValues(),e),h=a[0],o=a[1],l=t||this.hasHandles(),f=this._segment1,g=this._segment2,v=this._path;l&&(f._handleOut._set(h[2]-h[0],h[3]-h[1]),g._handleIn._set(o[4]-o[6],o[5]-o[7]));var p=h[6],d=h[7],C=new ve(new D(p,d),l&&new D(h[4]-p,h[5]-d),l&&new D(o[2]-p,o[3]-d));v?(v.insert(f._index+1,C),s=this.getNext()):(this._segment2=C,this._changed(),s=new re(C,g))}return s},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===X?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===X?.5:t?e:this.getTimeAt(e))},reversed:function(){return new re(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,r){var s=e._point,a=e._handleOut,h=t._handleIn,o=t._point,l=s.x,f=s.y,g=o.x,v=o.y,p=r?[l,f,l,f,g,v,g,v]:[l,f,l+a._x,f+a._y,g+h._x,v+h._y,g,v];return n&&n._transformCoordinates(p,p,4),p},subdivide:function(e,t){var n=e[0],r=e[1],s=e[2],a=e[3],h=e[4],o=e[5],l=e[6],f=e[7];t===X&&(t=.5);var g=1-t,v=g*n+t*s,p=g*r+t*a,d=g*s+t*h,C=g*a+t*o,b=g*h+t*l,w=g*o+t*f,_=g*v+t*d,x=g*p+t*C,c=g*d+t*b,y=g*C+t*w,k=g*_+t*c,A=g*x+t*y;return[[n,r,v,p,_,x,k,A],[k,A,c,y,b,w,l,f]]},getMonoCurves:function(e,t){var n=[],r=t?0:1,s=e[r+0],a=e[r+2],h=e[r+4],o=e[r+6];if(s>=a==a>=h&&a>=h==h>=o||re.isStraight(e))n.push(e);else{var l=3*(a-h)-s+o,f=2*(s+h)-4*a,g=a-s,v=1e-8,p=1-v,d=[],C=Me.solveQuadratic(l,f,g,d,v,p);if(!C)n.push(e);else{d.sort();var b=d[0],w=re.subdivide(e,b);n.push(w[0]),C>1&&(b=(d[1]-b)/(1-b),w=re.subdivide(w[1],b),n.push(w[0])),n.push(w[1])}}return n},solveCubic:function(e,t,n,r,s,a){var h=e[t],o=e[t+2],l=e[t+4],f=e[t+6],g=0;if(!(h<n&&f<n&&o<n&&l<n||h>n&&f>n&&o>n&&l>n)){var v=3*(o-h),p=3*(l-o)-v,d=f-h-v-p;g=Me.solveCubic(d,p,v,h-n,r,s,a)}return g},getTimeOf:function(e,t){var n=new D(e[0],e[1]),r=new D(e[6],e[7]),s=1e-12,a=1e-7,h=t.isClose(n,s)?0:t.isClose(r,s)?1:null;if(h===null)for(var o=[t.x,t.y],l=[],f=0;f<2;f++)for(var g=re.solveCubic(e,f,o[f],l,0,1),v=0;v<g;v++){var p=l[v];if(t.isClose(re.getPoint(e,p),a))return p}return t.isClose(n,a)?0:t.isClose(r,a)?1:null},getNearestTime:function(e,t){if(re.isStraight(e)){var n=e[0],r=e[1],s=e[6],a=e[7],h=s-n,o=a-r,l=h*h+o*o;if(l===0)return 0;var f=((t.x-n)*h+(t.y-r)*o)/l;return f<1e-12?0:f>.999999999999?1:re.getTimeOf(e,new D(n+f*h,r+f*o))}var g=100,v=1/0,p=0;function d(w){if(w>=0&&w<=1){var _=t.getDistance(re.getPoint(e,w),!0);if(_<v)return v=_,p=w,!0}}for(var C=0;C<=g;C++)d(C/g);for(var b=1/(g*2);b>1e-8;)!d(p-b)&&!d(p+b)&&(b/=2);return p},getPart:function(e,t,n){var r=t>n;if(r){var s=t;t=n,n=s}return t>0&&(e=re.subdivide(e,t)[1]),n<1&&(e=re.subdivide(e,(n-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],r=e[1],s=e[2],a=e[3],h=e[4],o=e[5],l=e[6],f=e[7],g=3*s-2*n-l,v=3*a-2*r-f,p=3*h-2*l-n,d=3*o-2*f-r;return Math.max(g*g,p*p)+Math.max(v*v,d*d)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],h=e[5],o=e[6],l=e[7];return 3*((l-n)*(r+a)-(o-t)*(s+h)+s*(t-a)-r*(n-h)+l*(a+t/3)-o*(h+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),r=[0,0],s=0;s<2;s++)re._addBounds(e[s],e[s+2],e[s+4],e[s+6],s,0,t,n,r);return new Z(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,r,s,a,h,o,l){function f(k,A){var S=k-A,E=k+A;S<h[s]&&(h[s]=S),E>o[s]&&(o[s]=E)}a/=2;var g=h[s]+a,v=o[s]-a;if(e<g||t<g||n<g||r<g||e>v||t>v||n>v||r>v)if(t<e!=t<r&&n<e!=n<r)f(e,0),f(r,0);else{var p=3*(t-n)-e+r,d=2*(e+n)-4*t,C=t-e,b=Me.solveQuadratic(p,d,C,l),w=1e-8,_=1-w;f(r,0);for(var x=0;x<b;x++){var c=l[x],y=1-c;w<=c&&c<=_&&f(y*y*y*e+3*y*y*c*t+3*y*c*c*n+c*c*c*r,a)}}}}},R.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=Ee[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),R.each({isStraight:function(e,t,n,r){if(t.isZero()&&n.isZero())return!0;var s=r.subtract(e);if(s.isZero())return!1;if(s.isCollinear(t)&&s.isCollinear(n)){var a=new Ae(e,r),h=1e-7;if(a.getDistance(e.add(t))<h&&a.getDistance(r.add(n))<h){var o=s.dot(s),l=s.dot(t)/o,f=s.dot(n)/o;return l>=0&&l<=1&&f<=0&&f>=-1}}return!1},isLinear:function(e,t,n,r){var s=r.subtract(e).divide(3);return t.equals(s)&&n.negate().equals(s)}},function(e,t){this[t]=function(n){var r=this._segment1,s=this._segment2;return e(r._point,r._handleOut,s._handleIn,s._point,n)},this.statics[t]=function(n,r){var s=n[0],a=n[1],h=n[6],o=n[7];return e(new D(s,a),new D(n[2]-s,n[3]-a),new D(n[4]-h,n[5]-o),new D(h,o),r)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return e!=null&&e>=0&&e<=1?new yt(this,e):null},getTimeAt:function(e,t){return re.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=D.read(arguments);return e.isZero()?[]:re.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(D.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return re.getTimeOf(this.getValues(),D.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=D.read(arguments),t=this.getValues(),n=re.getNearestTime(t,e),r=re.getPoint(t,n);return new yt(this,n,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return R.each(e,function(t){this[t+"At"]=function(n,r){var s=this.getValues();return re[t](s,r?n:re.getTimeAt(s,n))},this[t+"AtTime"]=function(n){return re[t](this.getValues(),n)}},{statics:{_evaluateMethods:e}})},new function(){function e(r){var s=r[0],a=r[1],h=r[2],o=r[3],l=r[4],f=r[5],g=r[6],v=r[7],p=9*(h-l)+3*(g-s),d=6*(s+l)-12*h,C=3*(h-s),b=9*(o-f)+3*(v-a),w=6*(a+f)-12*o,_=3*(o-a);return function(x){var c=(p*x+d)*x+C,y=(b*x+w)*x+_;return Math.sqrt(c*c+y*y)}}function t(r,s){return Math.max(2,Math.min(16,Math.ceil(Math.abs(s-r)*32)))}function n(r,s,a,h){if(s==null||s<0||s>1)return null;var o=r[0],l=r[1],f=r[2],g=r[3],v=r[4],p=r[5],d=r[6],C=r[7],b=Me.isZero;b(f-o)&&b(g-l)&&(f=o,g=l),b(v-d)&&b(p-C)&&(v=d,p=C);var w=3*(f-o),_=3*(v-f)-w,x=d-o-w-_,c=3*(g-l),y=3*(p-g)-c,k=C-l-c-y,A,S;if(a===0)A=s===0?o:s===1?d:((x*s+_)*s+w)*s+o,S=s===0?l:s===1?C:((k*s+y)*s+c)*s+l;else{var E=1e-8,T=1-E;if(s<E?(A=w,S=c):s>T?(A=3*(d-v),S=3*(C-p)):(A=(3*x*s+2*_)*s+w,S=(3*k*s+2*y)*s+c),h){A===0&&S===0&&(s<E||s>T)&&(A=v-f,S=p-g);var O=Math.sqrt(A*A+S*S);O&&(A/=O,S/=O)}if(a===3){var v=6*x*s+2*_,p=6*k*s+2*y,V=Math.pow(A*A+S*S,3/2);A=V!==0?(A*p-S*v)/V:0,S=0}}return a===2?new D(S,-A):new D(A,S)}return{statics:{classify:function(r){var s=r[0],a=r[1],h=r[2],o=r[3],l=r[4],f=r[5],g=r[6],v=r[7],p=s*(v-f)+a*(l-g)+g*f-v*l,d=h*(a-v)+o*(g-s)+s*v-a*g,C=l*(o-a)+f*(s-h)+h*a-o*s,b=3*C,w=b-d,_=w-d+p,x=Math.sqrt(_*_+w*w+b*b),c=x!==0?1/x:0,y=Me.isZero,k="serpentine";_*=c,w*=c,b*=c;function A(O,V,L){var z=V!==X,B=z&&V>0&&V<1,q=z&&L>0&&L<1;return z&&(!(B||q)||O==="loop"&&!(B&&q))&&(O="arch",B=q=!1),{type:O,roots:B||q?B&&q?V<L?[V,L]:[L,V]:[B?V:L]:null}}if(y(_))return y(w)?A(y(b)?"line":"quadratic"):A(k,b/(3*w));var S=3*w*w-4*_*b;if(y(S))return A("cusp",w/(2*_));var E=S>0?Math.sqrt(S/3):Math.sqrt(-S),T=2*_;return A(S>0?k:"loop",(w+E)/T,(w-E)/T)},getLength:function(r,s,a,h){if(s===X&&(s=0),a===X&&(a=1),re.isStraight(r)){var o=r;a<1&&(o=re.subdivide(o,a)[0],s/=a),s>0&&(o=re.subdivide(o,s)[1]);var l=o[6]-o[0],f=o[7]-o[1];return Math.sqrt(l*l+f*f)}return Me.integrate(h||e(r),s,a,t(s,a))},getTimeAt:function(r,s,a){if(a===X&&(a=s<0?1:0),s===0)return a;var h=Math.abs,o=1e-12,l=s>0,f=l?a:0,g=l?1:a,v=e(r),p=re.getLength(r,f,g,v),d=h(s)-p;if(h(d)<o)return l?g:f;if(d>o)return null;var C=s/p,b=0;function w(_){return b+=Me.integrate(v,a,_,t(a,_)),a=_,b-s}return Me.findRoot(w,v,a+C,f,g,32,1e-12)},getPoint:function(r,s){return n(r,s,0,!1)},getTangent:function(r,s){return n(r,s,1,!0)},getWeightedTangent:function(r,s){return n(r,s,1,!1)},getNormal:function(r,s){return n(r,s,2,!0)},getWeightedNormal:function(r,s){return n(r,s,2,!1)},getCurvature:function(r,s){return n(r,s,3,!1).x},getPeaks:function(r){var s=r[0],a=r[1],h=r[2],o=r[3],l=r[4],f=r[5],g=r[6],v=r[7],p=-s+3*h-3*l+g,d=3*s-6*h+3*l,C=-3*s+3*h,b=-a+3*o-3*f+v,w=3*a-6*o+3*f,_=-3*a+3*o,x=1e-8,c=1-x,y=[];return Me.solveCubic(9*(p*p+b*b),9*(p*d+w*b),2*(d*d+w*w)+3*(C*p+_*b),C*d+w*_,y,x,c),y.sort()}}}},new function(){function e(d,C,b,w,_,x,c){var y=!c&&b.getPrevious()===_,k=!c&&b!==_&&b.getNext()===_,A=1e-8,S=1-A;if(w!==null&&w>=(y?A:0)&&w<=(k?S:1)&&x!==null&&x>=(k?A:0)&&x<=(y?S:1)){var E=new yt(b,w,null,c),T=new yt(_,x,null,c);E._intersection=T,T._intersection=E,(!C||C(E))&&yt.insert(d,E,!0)}}function t(d,C,b,w,_,x,c,y,k,A,S,E,T){if(++k>=4096||++y>=40)return k;var O=1e-9,V=C[0],L=C[1],z=C[6],B=C[7],q=Ae.getSignedDistance,U=q(V,L,z,B,C[2],C[3]),W=q(V,L,z,B,C[4],C[5]),J=U*W>0?3/4:4/9,ee=J*Math.min(0,U,W),ne=J*Math.max(0,U,W),le=q(V,L,z,B,d[0],d[1]),K=q(V,L,z,B,d[2],d[3]),Q=q(V,L,z,B,d[4],d[5]),se=q(V,L,z,B,d[6],d[7]),ce=n(le,K,Q,se),de=ce[0],me=ce[1],_e,we;if(U===0&&W===0&&le===0&&K===0&&Q===0&&se===0||(_e=r(de,me,ee,ne))==null||(we=r(de.reverse(),me.reverse(),ee,ne))==null)return k;var Se=A+(S-A)*_e,be=A+(S-A)*we;if(Math.max(T-E,be-Se)<O){var it=(Se+be)/2,ae=(E+T)/2;e(_,x,c?w:b,c?ae:it,c?b:w,c?it:ae)}else{d=re.getPart(d,_e,we);var De=T-E;if(we-_e>.8)if(be-Se>De){var Xe=re.subdivide(d,.5),it=(Se+be)/2;k=t(C,Xe[0],w,b,_,x,!c,y,k,E,T,Se,it),k=t(C,Xe[1],w,b,_,x,!c,y,k,E,T,it,be)}else{var Xe=re.subdivide(C,.5),ae=(E+T)/2;k=t(Xe[0],d,w,b,_,x,!c,y,k,E,ae,Se,be),k=t(Xe[1],d,w,b,_,x,!c,y,k,ae,T,Se,be)}else De===0||De>=O?k=t(C,d,w,b,_,x,!c,y,k,E,T,Se,be):k=t(d,C,b,w,_,x,c,y,k,Se,be,E,T)}return k}function n(d,C,b,w){var _=[0,d],x=[1/3,C],c=[2/3,b],y=[1,w],k=C-(2*d+w)/3,A=b-(d+2*w)/3,S;if(k*A<0)S=[[_,x,y],[_,c,y]];else{var E=k/A;S=[E>=2?[_,x,y]:E<=.5?[_,c,y]:[_,x,c,y],[_,y]]}return(k||A)<0?S.reverse():S}function r(d,C,b,w){return d[0][1]<b?s(d,!0,b):C[0][1]>w?s(C,!1,w):d[0][0]}function s(d,C,b){for(var w=d[0][0],_=d[0][1],x=1,c=d.length;x<c;x++){var y=d[x][0],k=d[x][1];if(C?k>=b:k<=b)return k===b?y:w+(b-_)*(y-w)/(k-_);w=y,_=k}return null}function a(d,C,b,w,_){var x=Me.isZero;if(x(w)&&x(_)){var c=re.getTimeOf(d,new D(C,b));return c===null?[]:[c]}for(var y=Math.atan2(-_,w),k=Math.sin(y),A=Math.cos(y),S=[],E=[],T=0;T<8;T+=2){var O=d[T]-C,V=d[T+1]-b;S.push(O*A-V*k,O*k+V*A)}return re.solveCubic(S,1,0,E,0,1),E}function h(d,C,b,w,_,x,c){for(var y=C[0],k=C[1],A=C[6],S=C[7],E=a(d,y,k,A-y,S-k),T=0,O=E.length;T<O;T++){var V=E[T],L=re.getPoint(d,V),z=re.getTimeOf(C,L);z!==null&&e(_,x,c?w:b,c?z:V,c?b:w,c?V:z)}}function o(d,C,b,w,_,x){var c=Ae.intersect(d[0],d[1],d[6],d[7],C[0],C[1],C[6],C[7]);c&&e(_,x,b,re.getTimeOf(d,c),w,re.getTimeOf(C,c))}function l(d,C,b,w,_,x){var c=1e-12,y=Math.min,k=Math.max;if(k(d[0],d[2],d[4],d[6])+c>y(C[0],C[2],C[4],C[6])&&y(d[0],d[2],d[4],d[6])-c<k(C[0],C[2],C[4],C[6])&&k(d[1],d[3],d[5],d[7])+c>y(C[1],C[3],C[5],C[7])&&y(d[1],d[3],d[5],d[7])-c<k(C[1],C[3],C[5],C[7])){var A=v(d,C);if(A)for(var S=0;S<2;S++){var E=A[S];e(_,x,b,E[0],w,E[1],!0)}else{var T=re.isStraight(d),O=re.isStraight(C),V=T&&O,L=T&&!O,z=_.length;if((V?o:T||O?h:t)(L?C:d,L?d:C,L?w:b,L?b:w,_,x,L,0,0,0,1,0,1),!V||_.length===z)for(var S=0;S<4;S++){var B=S>>1,q=S&1,U=B*6,W=q*6,J=new D(d[U],d[U+1]),ee=new D(C[W],C[W+1]);J.isClose(ee,c)&&e(_,x,b,B,w,q)}}}return _}function f(d,C,b,w){var _=re.classify(d);if(_.type==="loop"){var x=_.roots;e(b,w,C,x[0],C,x[1])}return b}function g(d,C,b,w,_,x){var c=1e-7,y=!C;y&&(C=d);for(var k=d.length,A=C.length,S=new Array(k),E=y?S:new Array(A),T=[],O=0;O<k;O++)S[O]=d[O].getValues(w);if(!y)for(var O=0;O<A;O++)E[O]=C[O].getValues(_);for(var V=bt.findCurveBoundsCollisions(S,E,c),L=0;L<k;L++){var z=d[L],B=S[L];y&&f(B,z,T,b);var q=V[L];if(q)for(var U=0;U<q.length;U++){if(x&&T.length)return T;var W=q[U];if(!y||W>L){var J=C[W],ee=E[W];l(B,ee,z,J,T,b)}}}return T}function v(d,C){function b(se){var ce=se[6]-se[0],de=se[7]-se[1];return ce*ce+de*de}var w=Math.abs,_=Ae.getDistance,x=1e-8,c=1e-7,y=re.isStraight(d),k=re.isStraight(C),A=y&&k,S=b(d)<b(C),E=S?C:d,T=S?d:C,O=E[0],V=E[1],L=E[6]-O,z=E[7]-V;if(_(O,V,L,z,T[0],T[1],!0)<c&&_(O,V,L,z,T[6],T[7],!0)<c)!A&&_(O,V,L,z,E[2],E[3],!0)<c&&_(O,V,L,z,E[4],E[5],!0)<c&&_(O,V,L,z,T[2],T[3],!0)<c&&_(O,V,L,z,T[4],T[5],!0)<c&&(y=k=A=!0);else if(A)return null;if(y^k)return null;for(var B=[d,C],q=[],U=0;U<4&&q.length<2;U++){var W=U&1,J=W^1,ee=U>>1,ne=re.getTimeOf(B[W],new D(B[J][ee?6:0],B[J][ee?7:1]));if(ne!=null){var le=W?[ee,ne]:[ne,ee];(!q.length||w(le[0]-q[0][0])>x&&w(le[1]-q[0][1])>x)&&q.push(le)}if(U>2&&!q.length)break}if(q.length!==2)q=null;else if(!A){var K=re.getPart(d,q[0][0],q[1][0]),Q=re.getPart(C,q[0][1],q[1][1]);(w(Q[2]-K[2])>c||w(Q[3]-K[3])>c||w(Q[4]-K[4])>c||w(Q[5]-K[5])>c)&&(q=null)}return q}function p(d,C){var b=d[0],w=d[1],_=d[2],x=d[3],c=d[4],y=d[5],k=d[6],A=d[7],S=C.normalize(),E=S.x,T=S.y,O=3*k-9*c+9*_-3*b,V=3*A-9*y+9*x-3*w,L=6*c-12*_+6*b,z=6*y-12*x+6*w,B=3*_-3*b,q=3*x-3*w,U=2*O*T-2*V*E,W=[];if(Math.abs(U)<Me.CURVETIME_EPSILON){var J=O*q-V*B,U=O*z-V*L;if(U!=0){var ee=-J/U;ee>=0&&ee<=1&&W.push(ee)}}else{var ne=(L*L-4*O*B)*T*T+(-2*L*z+4*V*B+4*O*q)*E*T+(z*z-4*V*q)*E*E,le=L*T-z*E;if(ne>=0&&U!=0){var K=Math.sqrt(ne),Q=-(le+K)/U,se=(-le+K)/U;Q>=0&&Q<=1&&W.push(Q),se>=0&&se<=1&&W.push(se)}}return W}return{getIntersections:function(d){var C=this.getValues(),b=d&&d!==this&&d.getValues();return b?l(C,b,this,d,[]):f(C,this,[])},statics:{getOverlaps:v,getIntersections:g,getCurveLineIntersections:a,getTimesWithTangent:p}}}),yt=R.extend({_class:"CurveLocation",initialize:function(t,n,r,s,a){if(n>=.99999999){var h=t.getNext();h&&(n=0,t=h)}this._setCurve(t),this._time=n,this._point=r||t.getPointAtTime(n),this._overlap=s,this._distance=a,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();n===0?e=t._segment1:n===1?e=t._segment2:n!=null&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function n(r){var s=r&&r.getCurve();if(s&&(t._time=s.getTimeOf(t._point))!=null)return t._setCurve(s),s}return this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&t==null?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(e==null){e=0;var t=this.getPath(),n=this.getIndex();if(t&&n!=null)for(var r=t.getCurves(),s=0;s<n;s++)e+=r[s].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(e==null){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=n!=null&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof yt){var r=this.getCurve(),s=e.getCurve(),a=r._path,h=s._path;if(a===h){var o=Math.abs,l=1e-7,f=o(this.getOffset()-e.getOffset()),g=!t&&this._intersection,v=!t&&e._intersection;n=(f<l||a&&o(a.getLength()-f)<l)&&(!g&&!v||g&&v&&g.equals(v,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=at.instance;t&&e.push("point: "+t);var r=this.getIndex();r!=null&&e.push("index: "+r);var s=this.getTime();return s!=null&&e.push("time: "+n.number(s)),this._distance!=null&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),r=1e-8,s=1-r,a=t>=r&&t<=s,h=n>=r&&n<=s;if(a&&h)return!this.isTouching();var o=this.getCurve(),l=o&&t<r?o.getPrevious():o,f=e.getCurve(),g=f&&n<r?f.getPrevious():f;if(t>s&&(o=o.getNext()),n>s&&(f=f.getNext()),!l||!o||!g||!f)return!1;var v=[];function p(E,T){var O=E.getValues(),V=re.classify(O).roots||re.getPeaks(O),L=V.length,z=re.getLength(O,T&&L?V[L-1]:0,!T&&L?V[0]:1);v.push(L?z:z/32)}function d(E,T,O){return T<O?E>T&&E<O:E>T||E<O}a||(p(l,!0),p(o,!1)),h||(p(g,!0),p(f,!1));var C=this.getPoint(),b=Math.min.apply(Math,v),w=a?o.getTangentAtTime(t):o.getPointAt(b).subtract(C),_=a?w.negate():l.getPointAt(-b).subtract(C),x=h?f.getTangentAtTime(n):f.getPointAt(b).subtract(C),c=h?x.negate():g.getPointAt(-b).subtract(C),y=_.getAngle(),k=w.getAngle(),A=c.getAngle(),S=x.getAngle();return!!(a?d(y,A,S)^d(k,A,S)&&d(y,S,A)^d(k,S,A):d(A,y,k)^d(S,y,k)&&d(A,k,y)^d(S,k,y))},hasOverlap:function(){return!!this._overlap}},R.each(re._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var n=this.getCurve(),r=this.getTime();return r!=null&&n&&n[t](r,!0)}},{preserve:!0}),new function(){function e(t,n,r){var s=t.length,a=0,h=s-1;function o(C,b){for(var w=C+b;w>=-1&&w<=s;w+=b){var _=t[(w%s+s)%s];if(!n.getPoint().isClose(_.getPoint(),1e-7))break;if(n.equals(_))return _}return null}for(;a<=h;){var l=a+h>>>1,f=t[l],g;if(r&&(g=n.equals(f)?f:o(l,-1)||o(l,1)))return n._overlap&&(g._overlap=g._intersection._overlap=!0),g;var v=n.getPath(),p=f.getPath(),d=v!==p?v._id-p._id:n.getIndex()+n.getTime()-(f.getIndex()+f.getTime());d<0?h=l-1:a=l+1}return t.splice(a,0,n),n}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),r=t.length-1;r>=0;r--)e(n,t[r]._intersection,!1);return n}}}}),Nt=P.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,r;if(R.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:typeof e=="string"&&(t=e),n){var s=n[0];r=s&&Array.isArray(s[0])}else t&&(r=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var a=r?ut:Ee;return new a(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),n,r=!1,s,a,h=new D,o=new D;function l(c,y){var k=+n[c];return r&&(k+=h[y]),k}function f(c){return new D(l(c,"x"),l(c+1,"y"))}this.clear();for(var g=0,v=t&&t.length;g<v;g++){var p=t[g],d=p[0],C=d.toLowerCase();n=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var b=n&&n.length;switch(r=d===C,s==="z"&&!/[mz]/.test(C)&&this.moveTo(h),C){case"m":case"l":for(var w=C==="m",_=0;_<b;_+=2)this[w?"moveTo":"lineTo"](h=f(_)),w&&(o=h,w=!1);a=h;break;case"h":case"v":var x=C==="h"?"x":"y";h=h.clone();for(var _=0;_<b;_++)h[x]=l(_,x),this.lineTo(h);a=h;break;case"c":for(var _=0;_<b;_+=6)this.cubicCurveTo(f(_),a=f(_+2),h=f(_+4));break;case"s":for(var _=0;_<b;_+=4)this.cubicCurveTo(/[cs]/.test(s)?h.multiply(2).subtract(a):h,a=f(_),h=f(_+2)),s=C;break;case"q":for(var _=0;_<b;_+=4)this.quadraticCurveTo(a=f(_),h=f(_+2));break;case"t":for(var _=0;_<b;_+=2)this.quadraticCurveTo(a=/[qt]/.test(s)?h.multiply(2).subtract(a):h,h=f(_)),s=C;break;case"a":for(var _=0;_<b;_+=7)this.arcTo(h=f(_+5),new $(+n[_],+n[_+1]),+n[_+2],+n[_+4],+n[_+3]);break;case"z":this.closePath(1e-12),h=o;break}s=C}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!(this.getFillRule()==="evenodd"?t.windingL&1||t.windingR&1:t.winding)},getIntersections:function(e,t,n,r){var s=this===e||!e,a=this._matrix._orNullIfIdentity(),h=s?a:(n||e._matrix)._orNullIfIdentity();return s||this.getBounds(a).intersects(e.getBounds(h),1e-12)?re.getIntersections(this.getCurves(),!s&&e.getCurves(),t,a,h,r):[]},getCrossings:function(e){return this.getIntersections(e,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var e=D.read(arguments),t=this.getCurves(),n=1/0,r=null,s=0,a=t.length;s<a;s++){var h=t[s].getNearestLocation(e);h._distance<n&&(n=h._distance,r=h)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,n){var r=!this._children,s=r?"_segments":"_children",a=e[s],h=t[s],o=this[s];if(!a||!h||a.length!==h.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var l=o.length,f=h.length;if(l<f)for(var g=r?ve:Ee,v=l;v<f;v++)this.add(new g);else l>f&&this[r?"removeSegments":"removeChildren"](f,l);for(var v=0;v<f;v++)o[v].interpolate(a[v],h[v],n);r&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],r=e._children?e._children.slice():[e],s=n.length,a=r.length,h=[],o=0;t=!0;for(var l=bt.findItemBoundsCollisions(n,r,Me.GEOMETRIC_EPSILON),f=s-1;f>=0&&t;f--){var g=n[f];t=!1;var v=l[f];if(v)for(var p=v.length-1;p>=0&&!t;p--)g.compare(r[v[p]])&&(h[v[p]]||(h[v[p]]=!0,o++),t=!0)}t=t&&o===a}return t}}),Ee=Nt.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var n=arguments,r=Array.isArray(t)?typeof t[0]=="object"?t:n:t&&t.size===X&&(t.x!==X||t.point!==X)?n:null;r&&r.length>0?this.setSegments(r):(this._curves=X,this._segmentSelection=0,!r&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!r&&t)},_equals:function(e){return this._closed===e._closed&&R.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),t&8){if(this._length=this._area=X,t&32)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else t&64&&(this._bounds=X)},getStyle:function(){var e=this._parent;return(e instanceof ut?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),n=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=X,n){var r=e[n-1];typeof r=="boolean"&&(this.setClosed(r),n--),this._add(ve.readList(e,0,{},n))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var r=0;r<n;r++)e[r]=new re(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new re(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n=this._segments,r=n.length,s=new at(t),a=new Array(6),h=!0,o,l,f,g,v,p,d,C,b=[];function w(x,c){if(x._transformCoordinates(e,a),o=a[0],l=a[1],h)b.push("M"+s.pair(o,l)),h=!1;else if(v=a[2],p=a[3],v===o&&p===l&&d===f&&C===g){if(!c){var y=o-f,k=l-g;b.push(y===0?"v"+s.number(k):k===0?"h"+s.number(y):"l"+s.pair(y,k))}}else b.push("c"+s.pair(d-f,C-g)+" "+s.pair(v-f,p-g)+" "+s.pair(o-f,l-g));f=o,g=l,d=a[4],C=a[5]}if(!r)return"";for(var _=0;_<r;_++)w(n[_]);return this._closed&&r>0&&(w(n[0],!0),b.push("z")),b.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),r=0,s=t.length;r<s;r++)t[r]._transformCoordinates(e,n,!0);return!0},_add:function(e,h){for(var n=this._segments,r=this._curves,s=e.length,a=h==null,h=a?n.length:h,o=0;o<s;o++){var l=e[o];l._path&&(l=e[o]=l.clone()),l._path=this,l._index=h+o,l._selection&&this._updateSelection(l,0,l._selection)}if(a)R.push(n,e);else{n.splice.apply(n,[h,0].concat(e));for(var o=h+s,f=n.length;o<f;o++)n[o]._index=o}if(r){var g=this._countCurves(),v=h>0&&h+s-1===g?h-1:h,p=v,d=Math.min(v+s,g);e._curves&&(r.splice.apply(r,[v,0].concat(e._curves)),p+=e._curves.length);for(var o=p;o<d;o++)r.splice(o,0,new re(this,null,null));this._adjustCurves(v,d)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n=this._segments,r=this._curves,s,a=e;a<t;a++)s=r[a],s._path=this,s._segment1=n[a],s._segment2=n[a+1]||n[0],s._changed();(s=r[this._closed&&!e?n.length-1:e-1])&&(s._segment2=n[e]||n[0],s._changed()),(s=r[t])&&(s._segment1=n[t],s._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&typeof e!="number"?this._add(ve.readList(t)):this._add([ve.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&typeof t!="number"?this._add(ve.readList(n,1),e):this._add([ve.read(n,1)],e)[0]},addSegment:function(){return this._add([ve.read(arguments)])[0]},insertSegment:function(e){return this._add([ve.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(ve.readList(e))},insertSegments:function(e,t){return this._add(ve.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=R.pick(t,this._segments.length);var r=this._segments,s=this._curves,a=r.length,h=r.splice(e,t-e),o=h.length;if(!o)return h;for(var l=0;l<o;l++){var f=h[l];f._selection&&this._updateSelection(f,f._selection,0),f._index=f._path=null}for(var l=e,g=r.length;l<g;l++)r[l]._index=l;if(s){for(var v=e>0&&t===a+(this._closed?1:0)?e-1:e,s=s.splice(v,o),l=s.length-1;l>=0;l--)s[l]._path=null;n&&(h._curves=s.slice(1)),this._adjustCurves(v,v)}return this._changed(41),h},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(this._length==null){for(var e=this.getCurves(),t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(e==null){var t=this._segments,n=this._closed;e=0;for(var r=0,s=t.length;r<s;r++){var a=r+1===s;e+=re.getArea(re.getValues(t[r],t[a?0:r+1],null,a&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===e*7},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){t&1||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,r=e?7:0;this._segmentSelection=r*n;for(var s=0;s<n;s++)t[s]._selection=r},_updateSelection:function(e,t,n){e._selection=n;var r=this._segmentSelection+=n-t;r>0&&this.setSelected(!0)},divideAt:function(e){var t=this.getLocationAt(e),n;return t&&(n=t.getCurve().divideAt(t.getCurveOffset()))?n._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,r=t&&t.time,s=1e-8,a=1-s;r>a&&(n++,r=0);var h=this.getCurves();if(n>=0&&n<h.length){r>=s&&h[n++].divideAtTime(r);var o=this.removeSegments(n,this._segments.length,!0),l;return this._closed?(this.setClosed(!1),l=this):(l=new Ee(P.NO_INSERT),l.insertAbove(this),l.copyAttributes(this)),l._add(o,0),this.addSegment(o[0]),l}return null},split:function(e,t){var n,r=t===X?e:(n=this.getCurves()[e])&&n.getLocationAtTime(t);return r!=null?this.splitAt(r):null},join:function(e,t){var n=t||0;if(e&&e!==this){var r=e._segments,s=this.getLastSegment(),a=e.getLastSegment();if(!a)return this;s&&s._point.isClose(a._point,n)&&e.reverse();var h=e.getFirstSegment();if(s&&s._point.isClose(h._point,n))s.setHandleOut(h._handleOut),this._add(r.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(h._point,n)&&e.reverse(),a=e.getLastSegment(),o&&o._point.isClose(a._point,n)?(o.setHandleIn(a._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var l=this.getFirstSegment(),f=this.getLastSegment();return l!==f&&l._point.isClose(f._point,n)&&(l.setHandleIn(f._handleIn),f.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,r=n?1e-7:0,s=t.length-1;s>=0;s--){var a=t[s];!a.hasHandles()&&(!a.hasLength(r)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new Pi(this,e||.25,256,!0),n=t.parts,r=n.length,s=[],a=0;a<r;a++)s.push(new ve(n[a].curve.slice(0,2)));!this._closed&&r>0&&s.push(new ve(n[r-1].curve.slice(6))),this.setSegments(s)},simplify:function(e){var t=new Bt(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,n=e||{},r=n.type||"asymmetric",s=this._segments,a=s.length,h=this._closed;function o(de,me){var _e=de&&de.index;if(_e!=null){var we=de.path;if(we&&we!==t)throw new Error(de._class+" "+_e+" of "+we+" is not part of "+t);me&&de instanceof re&&_e++}else _e=typeof de=="number"?de:me;return Math.min(_e<0&&h?_e%a:_e<0?_e+a:_e,a-1)}var l=h&&n.from===X&&n.to===X,f=o(n.from,0),g=o(n.to,a-1);if(f>g)if(h)f-=a;else{var v=f;f=g,g=v}if(/^(?:asymmetric|continuous)$/.test(r)){var p=r==="asymmetric",d=Math.min,C=g-f+1,b=C-1,w=l?d(C,4):1,_=w,x=w,c=[];if(h||(_=d(1,f),x=d(1,a-g-1)),b+=_+x,b<=1)return;for(var y=0,k=f-_;y<=b;y++,k++)c[y]=s[(k<0?k+a:k)%a]._point;for(var A=c[0]._x+2*c[1]._x,S=c[0]._y+2*c[1]._y,E=2,T=b-1,O=[A],V=[S],L=[E],z=[],B=[],y=1;y<b;y++){var q=y<T,U=q||p?1:2,W=q?4:p?2:7,J=q?4:p?3:8,ee=q?2:p?0:1,ne=U/E;E=L[y]=W-ne,A=O[y]=J*c[y]._x+ee*c[y+1]._x-ne*A,S=V[y]=J*c[y]._y+ee*c[y+1]._y-ne*S}z[T]=O[T]/L[T],B[T]=V[T]/L[T];for(var y=b-2;y>=0;y--)z[y]=(O[y]-z[y+1])/L[y],B[y]=(V[y]-B[y+1])/L[y];z[b]=(3*c[b]._x-z[T])/2,B[b]=(3*c[b]._y-B[T])/2;for(var y=_,le=b-x,k=f;y<=le;y++,k++){var K=s[k<0?k+a:k],Q=K._point,se=z[y]-Q._x,ce=B[y]-Q._y;(l||y<le)&&K.setHandleOut(se,ce),(l||y>_)&&K.setHandleIn(-se,-ce)}}else for(var y=f;y<=g;y++)s[y<0?y+a:y].smooth(n,!l&&y===f,!l&&y===g)},toShape:function(e){if(!this._closed)return null;var t=this._segments,n,r,s,a;function h(p,d){var C=t[p],b=C.getNext(),w=t[d],_=w.getNext();return C._handleOut.isZero()&&b._handleIn.isZero()&&w._handleOut.isZero()&&_._handleIn.isZero()&&b._point.subtract(C._point).isCollinear(_._point.subtract(w._point))}function o(p){var d=t[p],C=d.getPrevious(),b=d.getNext();return C._handleOut.isZero()&&d._handleIn.isZero()&&d._handleOut.isZero()&&b._handleIn.isZero()&&d._point.subtract(C._point).isOrthogonal(b._point.subtract(d._point))}function l(p){var d=t[p],C=d.getNext(),b=d._handleOut,w=C._handleIn,_=.5522847498307936;if(b.isOrthogonal(w)){var x=d._point,c=C._point,y=new Ae(x,b,!0).intersect(new Ae(c,w,!0),!0);return y&&Me.isZero(b.getLength()/y.subtract(x).getLength()-_)&&Me.isZero(w.getLength()/y.subtract(c).getLength()-_)}return!1}function f(p,d){return t[p]._point.getDistance(t[d]._point)}if(!this.hasHandles()&&t.length===4&&h(0,2)&&h(1,3)&&o(1)?(n=Fe.Rectangle,r=new $(f(0,3),f(0,1)),a=t[1]._point.add(t[2]._point).divide(2)):t.length===8&&l(0)&&l(2)&&l(4)&&l(6)&&h(1,5)&&h(3,7)?(n=Fe.Rectangle,r=new $(f(1,6),f(0,3)),s=r.subtract(new $(f(0,7),f(1,2))).divide(2),a=t[3]._point.add(t[4]._point).divide(2)):t.length===4&&l(0)&&l(1)&&l(2)&&l(3)&&(Me.isZero(f(0,2)-f(1,3))?(n=Fe.Circle,s=f(0,2)/2):(n=Fe.Ellipse,s=new $(f(2,0)/2,f(3,1)/2)),a=t[1]._point),n){var g=this.getPosition(!0),v=new n({center:g,size:r,radius:s,insert:!1});return v.copyAttributes(this,!0),v._matrix.prepend(this._matrix),v.rotate(a.subtract(g).getAngle()+90),(e===X||e)&&v.insertAbove(this),v}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof ut)return e.base.call(this,t);var n=this.getCurves(),r=t.getCurves(),s=n.length,a=r.length;if(!s||!a)return s==a;for(var h=n[0].getValues(),o=[],l=0,f,g=0,v,p=0;p<a;p++){var w=r[p].getValues();o.push(w);var d=re.getOverlaps(h,w);if(d){f=!p&&d[0][0]>0?a-1:p,v=d[0][1];break}}for(var C=Math.abs,b=1e-8,w=o[f],_;h&&w;){var d=re.getOverlaps(h,w);if(d){var x=d[0][0];if(C(x-g)<b){g=d[1][0],g===1&&(h=++l<s?n[l].getValues():null,g=0);var c=d[0][1];if(C(c-v)<b){if(_||(_=[f,c]),v=d[1][1],v===1&&(++f>=a&&(f=0),w=o[f]||r[f].getValues(),v=0),!h)return _[0]===f&&_[1]===v;continue}}}break}return!1},_hitTestSelf:function(e,t,n,r){var s=this,a=this.getStyle(),h=this._segments,o=h.length,l=this._closed,f=t._tolerancePadding,g=f,v,p,d,C,b,w,_=t.stroke&&a.hasStroke(),x=t.fill&&a.hasFill(),c=t.curves,y=_?a.getStrokeWidth()/2:x&&t.tolerance>0||c?0:null;y!==null&&(y>0?(v=a.getStrokeJoin(),p=a.getStrokeCap(),d=a.getMiterLimit(),g=g.add(Ee._getStrokePadding(y,r))):v=p="round");function k(z,B){return e.subtract(z).divide(B).length<=1}function A(z,B,q){if(!t.selected||B.isSelected()){var U=z._point;if(B!==U&&(B=B.add(U)),k(B,g))return new It(q,s,{segment:z,point:B})}}function S(z,B){return(B||t.segments)&&A(z,z._point,"segment")||!B&&t.handles&&(A(z,z._handleIn,"handle-in")||A(z,z._handleOut,"handle-out"))}function E(z){C.add(z)}function T(z){var B=l||z._index>0&&z._index<o-1;if((B?v:p)==="round")return k(z._point,g);if(C=new Ee({internal:!0,closed:!0}),B?z.isSmooth()||Ee._addBevelJoin(z,v,y,d,null,r,E,!0):p==="square"&&Ee._addSquareCap(z,p,y,null,r,E,!0),!C.isEmpty()){var q;return C.contains(e)||(q=C.getNearestLocation(e))&&k(q.getPoint(),f)}}if(t.ends&&!t.segments&&!l){if(w=S(h[0],!0)||S(h[o-1],!0))return w}else if(t.segments||t.handles){for(var O=0;O<o;O++)if(w=S(h[O]))return w}if(y!==null){if(b=this.getNearestLocation(e),b){var V=b.getTime();V===0||V===1&&o>1?T(b.getSegment())||(b=null):k(b.getPoint(),g)||(b=null)}if(!b&&v==="miter"&&o>1)for(var O=0;O<o;O++){var L=h[O];if(e.getDistance(L._point)<=d*y&&T(L)){b=L.getLocation();break}}}return!b&&x&&this._contains(e)||b&&!_&&!c?new It("fill",this):b?new It(_?"stroke":"curve",this,{location:b,point:b.getPoint()}):null}},R.each(re._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}},{beans:!1,getLocationOf:function(){for(var e=D.read(arguments),t=this.getCurves(),n=0,r=t.length;n<r;n++){var s=t[n].getLocationOf(e);if(s)return s}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if(typeof e=="number"){for(var t=this.getCurves(),n=0,r=0,s=t.length;r<s;r++){var a=n,h=t[r];if(n+=h.getLength(),n>e)return h.getLocationAt(e-a)}if(t.length>0&&e<=this.getLength())return new yt(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=D.read(arguments);if(e.isZero())return[];for(var t=[],n=0,r=this.getCurves(),s=0,a=r.length;s<a;s++){for(var h=r[s],o=h.getTimesWithTangent(e),l=0,f=o.length;l<f;l++){var g=n+h.getOffsetAtTime(o[l]);t.indexOf(g)<0&&t.push(g)}n+=h.length}return t}}),new function(){function e(n,r,s,a){if(a<=0)return;var h=a/2,o=a-2,l=h-1,f=new Array(6),g,v;function p(x){var c=f[x],y=f[x+1];(g!=c||v!=y)&&(n.beginPath(),n.moveTo(g,v),n.lineTo(c,y),n.stroke(),n.beginPath(),n.arc(c,y,h,0,Math.PI*2,!0),n.fill())}for(var d=0,C=r.length;d<C;d++){var b=r[d],w=b._selection;if(b._transformCoordinates(s,f),g=f[0],v=f[1],w&2&&p(2),w&4&&p(4),n.fillRect(g-h,v-h,a,a),o>0&&!(w&1)){var _=n.fillStyle;n.fillStyle="#ffffff",n.fillRect(g-l,v-l,o,o),n.fillStyle=_}}}function t(n,r,s){var a=r._segments,h=a.length,o=new Array(6),l=!0,f,g,v,p,d,C,b,w;function _(c){if(s)c._transformCoordinates(s,o),f=o[0],g=o[1];else{var y=c._point;f=y._x,g=y._y}if(l)n.moveTo(f,g),l=!1;else{if(s)d=o[2],C=o[3];else{var k=c._handleIn;d=f+k._x,C=g+k._y}d===f&&C===g&&b===v&&w===p?n.lineTo(f,g):n.bezierCurveTo(b,w,d,C,f,g)}if(v=f,p=g,s)b=o[4],w=o[5];else{var k=c._handleOut;b=v+k._x,w=p+k._y}}for(var x=0;x<h;x++)_(a[x]);r._closed&&h>0&&_(a[0])}return{_draw:function(n,r,s,a){var h=r.dontStart,o=r.dontFinish||r.clip,l=this.getStyle(),f=l.hasFill(),g=l.hasStroke(),v=l.getDashArray(),p=!Pe.support.nativeDash&&g&&v&&v.length;h||n.beginPath(),(f||g&&!p||o)&&(t(n,this,a),this._closed&&n.closePath());function d(c){return v[(c%p+p)%p]}if(!o&&(f||g)&&(this._setStyles(n,r,s),f&&(n.fill(l.getFillRule()),n.shadowColor="rgba(0,0,0,0)"),g)){if(p){h||n.beginPath();for(var C=new Pi(this,.25,32,!1,a),b=C.length,w=-l.getDashOffset(),_,x=0;w>0;)w-=d(x--)+d(x--);for(;w<b;)_=w+d(x++),(w>0||_>0)&&C.drawPart(n,Math.max(w,0),Math.max(_,0)),w=_+d(x++)}n.stroke()}},_drawSelected:function(n,r){n.beginPath(),t(n,this,r),n.stroke(),e(n,this._segments,r,Pe.settings.handleSize)}}},new function(){function e(t){var n=t._segments;if(!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return{moveTo:function(){var t=this._segments;t.length===1&&this.removeSegment(0),t.length||this._add([new ve(D.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new ve(D.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=D.read(t),r=D.read(t),s=D.read(t),a=e(this);a.setHandleOut(n.subtract(a._point)),this._add([new ve(s,r.subtract(s))])},quadraticCurveTo:function(){var t=arguments,n=D.read(t),r=D.read(t),s=e(this)._point;this.cubicCurveTo(n.add(s.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var t=arguments,n=D.read(t),r=D.read(t),s=R.pick(R.read(t),.5),a=1-s,h=e(this)._point,o=n.subtract(h.multiply(a*a)).subtract(r.multiply(s*s)).divide(2*s*a);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+s);this.quadraticCurveTo(o,r)},arcTo:function(){var t=arguments,n=Math.abs,r=Math.sqrt,s=e(this),a=s._point,h=D.read(t),o,l=R.peek(t),f=R.pick(l,!0),g,v,p,d;if(typeof f=="boolean")var C=a.add(h).divide(2),o=C.add(C.subtract(a).rotate(f?-90:90));else if(R.remain(t)<=2)o=h,h=D.read(t);else if(!a.equals(h)){var b=$.read(t),w=Me.isZero;if(w(b.width)||w(b.height))return this.lineTo(h);var _=R.read(t),f=!!R.read(t),x=!!R.read(t),C=a.add(h).divide(2),c=a.subtract(C).rotate(-_),y=c.x,k=c.y,A=n(b.width),S=n(b.height),E=A*A,T=S*S,O=y*y,V=k*k,L=r(O/E+V/T);if(L>1&&(A*=L,S*=L,E=A*A,T=S*S),L=(E*T-E*V-T*O)/(E*V+T*O),n(L)<1e-12&&(L=0),L<0)throw new Error("Cannot create an arc with the given arguments");g=new D(A*k/S,-S*y/A).multiply((x===f?-1:1)*r(L)).rotate(_).add(C),d=new oe().translate(g).rotate(_).scale(A,S),p=d._inverseTransform(a),v=p.getDirectedAngle(d._inverseTransform(h)),!f&&v>0?v-=360:f&&v<0&&(v+=360)}if(o){var z=new Ae(a.add(o).divide(2),o.subtract(a).rotate(90),!0),B=new Ae(o.add(h).divide(2),h.subtract(o).rotate(90),!0),q=new Ae(a,h),U=q.getSide(o);if(g=z.intersect(B,!0),!g){if(!U)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}p=a.subtract(g),v=p.getDirectedAngle(h.subtract(g));var W=q.getSide(g,!0);W===0?v=U*n(v):U===W&&(v+=v<0?360:-360)}if(v){for(var J=1e-5,ee=n(v),ne=ee>=360?4:Math.ceil((ee-J)/90),le=v/ne,K=le*Math.PI/360,Q=4/3*Math.sin(K)/(1+Math.cos(K)),se=[],ce=0;ce<=ne;ce++){var c=h,de=null;if(ce<ne&&(de=p.rotate(90).multiply(Q),d?(c=d._transformPoint(p),de=d._transformPoint(p.add(de)).subtract(c)):c=g.add(p)),!ce)s.setHandleOut(de);else{var me=p.rotate(-90).multiply(Q);d&&(me=d._transformPoint(p.add(me)).subtract(c)),se.push(new ve(c,me,de))}p=p.rotate(le)}this._add(se)}},lineBy:function(){var t=D.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=D.read(t),r=D.read(t),s=R.read(t),a=e(this)._point;this.curveTo(a.add(n),a.add(r),s)},cubicCurveBy:function(){var t=arguments,n=D.read(t),r=D.read(t),s=D.read(t),a=e(this)._point;this.cubicCurveTo(a.add(n),a.add(r),a.add(s))},quadraticCurveBy:function(){var t=arguments,n=D.read(t),r=D.read(t),s=e(this)._point;this.quadraticCurveTo(s.add(n),s.add(r))},arcBy:function(){var t=arguments,n=e(this)._point,r=n.add(D.read(t)),s=R.pick(R.peek(t),!0);typeof s=="boolean"?this.arcTo(r,s):this.arcTo(r,n.add(D.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return Ee[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,r,s,a){var h=e[0];if(!h)return new Z;var o=new Array(6),l=h._transformCoordinates(r,new Array(6)),f=l.slice(0,2),g=f.slice(),v=new Array(2);function p(b){b._transformCoordinates(r,o);for(var w=0;w<2;w++)re._addBounds(l[w],l[w+4],o[w+2],o[w],w,a?a[w]:0,f,g,v);var _=l;l=o,o=_}for(var d=1,C=e.length;d<C;d++)p(e[d]);return t&&p(h),new Z(f[0],f[1],g[0]-f[0],g[1]-f[1])},getStrokeBounds:function(e,t,n,r,s){var a=n.getStyle(),h=a.hasStroke(),o=a.getStrokeWidth(),l=h&&n._getStrokeMatrix(r,s),f=h&&Ee._getStrokePadding(o,l),g=Ee.getBounds(e,t,n,r,s,f);if(!h)return g;var v=o/2,p=a.getStrokeJoin(),d=a.getStrokeCap(),C=a.getMiterLimit(),b=new Z(new $(f));function w(A){g=g.include(A)}function _(A){g=g.unite(b.setCenter(A._point.transform(r)))}function x(A,S){S==="round"||A.isSmooth()?_(A):Ee._addBevelJoin(A,S,v,C,r,l,w)}function c(A,S){S==="round"?_(A):Ee._addSquareCap(A,S,v,r,l,w)}var y=e.length-(t?0:1);if(y>0){for(var k=1;k<y;k++)x(e[k],p);t?x(e[0],p):(c(e[0],d),c(e[e.length-1],d))}return g},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new D(e,0).transform(t),r=new D(0,e).transform(t),s=n.getAngleInRadians(),a=n.getLength(),h=r.getLength(),o=Math.sin(s),l=Math.cos(s),f=Math.tan(s),g=Math.atan2(h*f,a),v=Math.atan2(h,f*a);return[Math.abs(a*Math.cos(g)*l+h*Math.sin(g)*o),Math.abs(h*Math.sin(v)*l+a*Math.cos(v)*o)]},_addBevelJoin:function(e,t,n,r,s,a,h,o){var l=e.getCurve(),f=l.getPrevious(),g=l.getPoint1().transform(s),v=f.getNormalAtTime(1).multiply(n).transform(a),p=l.getNormalAtTime(0).multiply(n).transform(a),d=v.getDirectedAngle(p);if((d<0||d>=180)&&(v=v.negate(),p=p.negate()),o&&h(g),h(g.add(v)),t==="miter"){var C=new Ae(g.add(v),new D(-v.y,v.x),!0).intersect(new Ae(g.add(p),new D(-p.y,p.x),!0),!0);C&&g.getDistance(C)<=r*n&&h(C)}h(g.add(p))},_addSquareCap:function(e,t,n,r,s,a,h){var o=e._point.transform(r),l=e.getLocation(),f=l.getNormal().multiply(l.getTime()===0?n:-n).transform(s);t==="square"&&(h&&(a(o.subtract(f)),a(o.add(f))),o=o.add(f.rotate(-90))),a(o.add(f)),a(o.subtract(f))},getHandleBounds:function(e,t,n,r,s){var a=n.getStyle(),h=s.stroke&&a.hasStroke(),o,l;if(h){var f=n._getStrokeMatrix(r,s),g=a.getStrokeWidth()/2,v=g;a.getStrokeJoin()==="miter"&&(v=g*a.getMiterLimit()),a.getStrokeCap()==="square"&&(v=Math.max(v,g*Math.SQRT2)),o=Ee._getStrokePadding(g,f),l=Ee._getStrokePadding(v,f)}for(var p=new Array(6),d=1/0,C=-d,b=d,w=C,_=0,x=e.length;_<x;_++){var c=e[_];c._transformCoordinates(r,p);for(var y=0;y<6;y+=2){var k=y?o:l,A=k?k[0]:0,S=k?k[1]:0,E=p[y],T=p[y+1],O=E-A,V=E+A,L=T-S,z=T+S;O<d&&(d=O),V>C&&(C=V),L<b&&(b=L),z>w&&(w=z)}}return new Z(d,b,C-d,w-b)}}});Ee.inject({statics:new function(){var e=.5522847498307936,t=[new ve([-1,0],[0,e],[0,-e]),new ve([0,-1],[-e,0],[e,0]),new ve([1,0],[0,-e],[0,e]),new ve([0,1],[e,0],[-e,0])];function n(s,a,h){var o=R.getNamed(h),l=new Ee(o&&(o.insert==!0?P.INSERT:o.insert==!1?P.NO_INSERT:null));return l._add(s),l._closed=a,l.set(o,P.INSERT)}function r(s,a,h){for(var o=new Array(4),l=0;l<4;l++){var f=t[l];o[l]=new ve(f._point.multiply(a).add(s),f._handleIn.multiply(a),f._handleOut.multiply(a))}return n(o,!0,h)}return{Line:function(){var s=arguments;return n([new ve(D.readNamed(s,"from")),new ve(D.readNamed(s,"to"))],!1,s)},Circle:function(){var s=arguments,a=D.readNamed(s,"center"),h=R.readNamed(s,"radius");return r(a,new $(h),s)},Rectangle:function(){var s=arguments,a=Z.readNamed(s,"rectangle"),h=$.readNamed(s,"radius",0,{readNull:!0}),o=a.getBottomLeft(!0),l=a.getTopLeft(!0),f=a.getTopRight(!0),g=a.getBottomRight(!0),v;if(!h||h.isZero())v=[new ve(o),new ve(l),new ve(f),new ve(g)];else{h=$.min(h,a.getSize(!0).divide(2));var p=h.width,d=h.height,C=p*e,b=d*e;v=[new ve(o.add(p,0),null,[-C,0]),new ve(o.subtract(0,d),[0,b]),new ve(l.add(0,d),null,[0,-b]),new ve(l.add(p,0),[-C,0],null),new ve(f.subtract(p,0),null,[C,0]),new ve(f.add(0,d),[0,-b],null),new ve(g.subtract(0,d),null,[0,b]),new ve(g.subtract(p,0),[C,0])]}return n(v,!0,s)},RoundRectangle:"#Rectangle",Ellipse:function(){var s=arguments,a=Fe._readEllipse(s);return r(a.center,a.radius,s)},Oval:"#Ellipse",Arc:function(){var s=arguments,a=D.readNamed(s,"from"),h=D.readNamed(s,"through"),o=D.readNamed(s,"to"),l=R.getNamed(s),f=new Ee(l&&l.insert==!1&&P.NO_INSERT);return f.moveTo(a),f.arcTo(h,o),f.set(l)},RegularPolygon:function(){for(var s=arguments,a=D.readNamed(s,"center"),h=R.readNamed(s,"sides"),o=R.readNamed(s,"radius"),l=360/h,f=h%3===0,g=new D(0,f?-o:o),v=f?-1:.5,p=new Array(h),d=0;d<h;d++)p[d]=new ve(a.add(g.rotate((d+v)*l)));return n(p,!0,s)},Star:function(){for(var s=arguments,a=D.readNamed(s,"center"),h=R.readNamed(s,"points")*2,o=R.readNamed(s,"radius1"),l=R.readNamed(s,"radius2"),f=360/h,g=new D(0,-1),v=new Array(h),p=0;p<h;p++)v[p]=new ve(a.add(g.rotate(f*p).multiply(p%2?l:o)));return n(v,!0,s)}}}});var ut=Nt.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function e(t,n){var r=n,s=r[0];s&&typeof s[0]=="number"&&(r=[r]);for(var a=n.length-1;a>=0;a--){var h=r[a];r===n&&!(h instanceof Ee)&&(r=R.slice(r)),Array.isArray(h)?r[a]=new Ee({segments:h,insert:!1}):h instanceof ut&&(r.splice.apply(r,[a,1].concat(h.removeChildren())),h.remove())}return e.base.call(this,t,r)},reduce:function e(t){for(var n=this._children,r=n.length-1;r>=0;r--){var s=n[r].reduce(t);s.isEmpty()&&s.remove()}if(!n.length){var s=new Ee(P.NO_INSERT);return s.copyAttributes(this),s.insertAbove(this),this.remove(),s}return e.base.call(this)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,r=e.length;n<r;n++)R.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,r=[],s=0,a=n.length;s<a;s++){var h=n[s],o=h._matrix;r.push(h.getPathData(e&&!o.isIdentity()?e.appended(o):e,t))}return r.join("")},_hitTestChildren:function e(t,n,r){return e.base.call(this,t,n.class===Ee||n.type==="path"?n:R.set({},n,{fill:!1}),r)},_draw:function(e,t,n,r){var s=this._children;if(s.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var a=0,h=s.length;a<h;a++)s[a].draw(e,t,r);if(!t.clip){this._setStyles(e,t,n);var o=this._style;o.hasFill()&&(e.fill(o.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var r=this._children,s=0,a=r.length;s<a;s++){var h=r[s],o=h._matrix;n[h._id]||h._drawSelected(e,o.isIdentity()?t:t.appended(o))}}},new function(){function e(t,n){var r=t._children;if(n&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return R.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}},{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new Ee(P.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),r=D.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},R.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var n=this._children,r,s=0,a=n.length;s<a;s++)r=n[s][e](t)||r;return r}},{}));Nt.inject(new function(){var e=Math.min,t=Math.max,n=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(_){return _._children||[_]}function a(_,x){var c=_.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(x){for(var y=s(c),k=0,A=y.length;k<A;k++){var _=y[k];!_._closed&&!_.isEmpty()&&(_.closePath(1e-12),_.getFirstSegment().setHandleIn(0,0),_.getLastSegment().setHandleOut(0,0))}c=c.resolveCrossings().reorient(c.getFillRule()==="nonzero",!0)}return c}function h(_,x,c,y,k){var A=new ut(P.NO_INSERT);return A.addChildren(_,!0),A=A.reduce({simplify:x}),k&&k.insert==!1||A.insertAbove(y&&c.isSibling(y)&&c.getIndex()<y.getIndex()?y:c),A.copyAttributes(c,!0),A}function o(_){return _.hasOverlap()||_.isCrossing()}function l(_,x,c,y){if(y&&(y.trace==!1||y.stroke)&&/^(subtract|intersect)$/.test(c))return f(_,x,c);var k=a(_,!0),A=x&&_!==x&&a(x,!0),S=r[c];S[c]=!0,A&&(S.subtract||S.exclude)^(A.isClockwise()^k.isClockwise())&&A.reverse();var E=d(yt.expand(k.getIntersections(A,o))),T=s(k),O=A&&s(A),V=[],L=[],z;function B(de){for(var me=0,_e=de.length;me<_e;me++){var we=de[me];R.push(V,we._segments),R.push(L,we.getCurves()),we._overlapsOnly=!0}}function q(de){for(var me=[],_e=0,we=de&&de.length;_e<we;_e++)me.push(L[de[_e]]);return me}if(E.length){B(T),O&&B(O);for(var U=new Array(L.length),W=0,J=L.length;W<J;W++)U[W]=L[W].getValues();for(var ee=bt.findCurveBoundsCollisions(U,U,0,!0),ne={},W=0;W<L.length;W++){var le=L[W],K=le._path._id,Q=ne[K]=ne[K]||{};Q[le.getIndex()]={hor:q(ee[W].hor),ver:q(ee[W].ver)}}for(var W=0,J=E.length;W<J;W++)b(E[W]._segment,k,A,ne,S);for(var W=0,J=V.length;W<J;W++){var se=V[W],ce=se._intersection;se._winding||b(se,k,A,ne,S),ce&&ce._overlap||(se._path._overlapsOnly=!1)}z=w(V,S)}else z=p(O?T.concat(O):T.slice(),function(de){return!!S[de]});return h(z,!0,_,x,y)}function f(_,x,c){var y=a(_),k=a(x),A=y.getIntersections(k,o),S=c==="subtract",E=c==="divide",T={},O=[];function V(B){if(!T[B._id]&&(E||k.contains(B.getPointAt(B.getLength()/2))^S))return O.unshift(B),T[B._id]=!0}for(var L=A.length-1;L>=0;L--){var z=A[L].split();z&&(V(z)&&z.getFirstSegment().setHandleIn(0,0),y.getLastSegment().setHandleOut(0,0))}return V(y),h(O,!1,_,x)}function g(_,x){for(var c=_;c;){if(c===x)return;c=c._previous}for(;_._next&&_._next!==x;)_=_._next;if(!_._next){for(;x._previous;)x=x._previous;_._next=x,x._previous=_}}function v(_){for(var x=_.length-1;x>=0;x--)_[x].clearHandles()}function p(_,x,c){var y=_&&_.length;if(y){var k=R.each(_,function(ee,ne){this[ee._id]={container:null,winding:ee.isClockwise()?1:-1,index:ne}},{}),A=_.slice().sort(function(ee,ne){return n(ne.getArea())-n(ee.getArea())}),S=A[0],E=bt.findItemBoundsCollisions(A,null,Me.GEOMETRIC_EPSILON);c==null&&(c=S.isClockwise());for(var T=0;T<y;T++){var O=A[T],V=k[O._id],L=0,z=E[T];if(z){for(var B=null,q=z.length-1;q>=0;q--)if(z[q]<T){B=B||O.getInteriorPoint();var U=A[z[q]];if(U.contains(B)){var W=k[U._id];L=W.winding,V.winding+=L,V.container=W.exclude?W.container:U;break}}}if(x(V.winding)===x(L))V.exclude=!0,_[V.index]=null;else{var J=V.container;O.setClockwise(J?!J.isClockwise():c)}}}return _}function d(_,x,c){var y=x&&[],k=1e-8,A=1-k,S=!1,E=c||[],T=c&&{},O,V,L;function z(me){return me._path._id+"."+me._segment1._index}for(var B=(c&&c.length)-1;B>=0;B--){var q=c[B];q._path&&(T[z(q)]=!0)}for(var B=_.length-1;B>=0;B--){var U=_[B],W=U._time,J=W,ee=x&&!x(U),q=U._curve,ne;if(q&&(q!==V?(S=!q.hasHandles()||T&&T[z(q)],O=[],L=null,V=q):L>=k&&(W/=L)),ee){O&&O.push(U);continue}else x&&y.unshift(U);if(L=J,W<k)ne=q._segment1;else if(W>A)ne=q._segment2;else{var le=q.divideAtTime(W,!0);S&&E.push(q,le),ne=le._segment1;for(var K=O.length-1;K>=0;K--){var Q=O[K];Q._time=(Q._time-W)/(1-W)}}U._setSegment(ne);var se=ne._intersection,ce=U._intersection;if(se){g(se,ce);for(var de=se;de;)g(de._intersection,se),de=de._next}else ne._intersection=ce}return c||v(E),y||_}function C(_,x,c,y,k){var A=Array.isArray(x)?x:x[c?"hor":"ver"],S=c?1:0,E=S^1,T=[_.x,_.y],O=T[S],V=T[E],L=1e-9,z=1e-6,B=O-L,q=O+L,U=0,W=0,J=0,ee=0,ne=!1,le=!1,K=1,Q=[],se,ce;function de(Ve){var Je=Ve[E+0],ct=Ve[E+6];if(!(V<e(Je,ct)||V>t(Je,ct))){var nt=Ve[S+0],vt=Ve[S+2],ht=Ve[S+4],Qe=Ve[S+6];if(Je===ct){(nt<q&&Qe>B||Qe<q&&nt>B)&&(ne=!0);return}var Ct=V===Je?0:V===ct||B>t(nt,vt,ht,Qe)||q<e(nt,vt,ht,Qe)?1:re.solveCubic(Ve,E,V,Q,0,1)>0?Q[0]:1,dt=Ct===0?nt:Ct===1?Qe:re.getPoint(Ve,Ct)[c?"y":"x"],mt=Je>ct?1:-1,Lt=se[E]>se[E+6]?1:-1,St=se[S+6];return V!==Je?(dt<B?J+=mt:dt>q?ee+=mt:ne=!0,dt>O-z&&dt<O+z&&(K/=2)):(mt!==Lt?nt<B?J+=mt:nt>q&&(ee+=mt):nt!=St&&(St<q&&dt>q?(ee+=mt,ne=!0):St>B&&dt<B&&(J+=mt,ne=!0)),K/=4),se=Ve,!k&&dt>B&&dt<q&&re.getTangent(Ve,Ct)[c?"x":"y"]===0&&C(_,x,!c,y,!0)}}function me(Ve){var Je=Ve[E+0],ct=Ve[E+2],nt=Ve[E+4],vt=Ve[E+6];if(V<=t(Je,ct,nt,vt)&&V>=e(Je,ct,nt,vt)){for(var ht=Ve[S+0],Qe=Ve[S+2],Ct=Ve[S+4],dt=Ve[S+6],mt=B>t(ht,Qe,Ct,dt)||q<e(ht,Qe,Ct,dt)?[Ve]:re.getMonoCurves(Ve,c),Lt,St=0,si=mt.length;St<si;St++)if(Lt=de(mt[St]))return Lt}}for(var _e=0,we=A.length;_e<we;_e++){var Se=A[_e],be=Se._path,it=Se.getValues(),ae;if((!_e||A[_e-1]._path!==be)&&(se=null,be._closed||(ce=re.getValues(be.getLastCurve().getSegment2(),Se.getSegment1(),null,!y),ce[E]!==ce[E+6]&&(se=ce)),!se)){se=it;for(var De=be.getLastCurve();De&&De!==Se;){var Xe=De.getValues();if(Xe[E]!==Xe[E+6]){se=Xe;break}De=De.getPrevious()}}if(ae=me(it))return ae;if(_e+1===we||A[_e+1]._path!==be){if(ce&&(ae=me(ce)))return ae;ne&&!J&&!ee&&(J=ee=be.isClockwise(y)^c?1:-1),U+=J,W+=ee,J=ee=0,ne&&(le=!0,ne=!1),ce=null}}return U=n(U),W=n(W),{winding:t(U,W),windingL:U,windingR:W,quality:K,onPath:le}}function b(_,x,c,y,k){var A=[],S=_,E=0,L;do{var T=_.getCurve();if(T){var O=T.getLength();A.push({segment:_,curve:T,length:O}),E+=O}_=_.getNext()}while(_&&!_._intersection&&_!==S);for(var V=[.5,.25,.75],L={winding:0,quality:-1},z=.001,B=1-z,q=0;q<V.length&&L.quality<.5;q++)for(var O=E*V[q],U=0,W=A.length;U<W;U++){var J=A[U],ee=J.length;if(O<=ee){var T=J.curve,ne=T._path,le=ne._parent,K=le instanceof ut?le:ne,Q=Me.clamp(T.getTimeAt(O),z,B),se=T.getPointAtTime(Q),ce=n(T.getTangentAtTime(Q).y)<Math.SQRT1_2,de=null;if(k.subtract&&c){var me=K===x?c:x,_e=me._getWinding(se,ce,!0);if(K===x&&_e.winding||K===c&&!_e.winding){if(_e.quality<1)continue;de={winding:0,quality:1}}}de=de||C(se,y[ne._id][T.getIndex()],ce,!0),de.quality>L.quality&&(L=de);break}O-=ee}for(var U=A.length-1;U>=0;U--)A[U].segment._winding=L}function w(_,x){var c=[],y;function k(we){var Se;return!!(we&&!we._visited&&(!x||x[(Se=we._winding||{}).winding]&&!(x.unite&&Se.winding===2&&Se.windingL&&Se.windingR)))}function A(we){if(we){for(var Se=0,be=y.length;Se<be;Se++)if(we===y[Se])return!0}return!1}function S(we){for(var Se=we._segments,be=0,it=Se.length;be<it;be++)Se[be]._visited=!0}function E(we,Se){var be=we._intersection,it=be,ae=[];Se&&(y=[we]);function De(Xe,Ve){for(;Xe&&Xe!==Ve;){var Je=Xe._segment,ct=Je&&Je._path;if(ct){var nt=Je.getNext()||ct.getFirstSegment(),vt=nt._intersection;Je!==we&&(A(Je)||A(nt)||nt&&k(Je)&&(k(nt)||vt&&k(vt._segment)))&&ae.push(Je),Se&&y.push(Je)}Xe=Xe._next}}if(be){for(De(be);be&&be._previous;)be=be._previous;De(be,it)}return ae}_.sort(function(we,Se){var be=we._intersection,it=Se._intersection,ae=!!(be&&be._overlap),De=!!(it&&it._overlap),Xe=we._path,Ve=Se._path;return ae^De?ae?1:-1:!be^!it?be?1:-1:Xe!==Ve?Xe._id-Ve._id:we._index-Se._index});for(var T=0,O=_.length;T<O;T++){var V=_[T],L=k(V),z=null,B=!1,q=!0,U=[],W,J,ee;if(L&&V._path._overlapsOnly){var ne=V._path,le=V._intersection._segment._path;ne.compare(le)&&(ne.getArea()&&c.push(ne.clone(!1)),S(ne),S(le),L=!1)}for(;L;){var K=!z,Q=E(V,K),se=Q.shift(),B=!K&&(A(V)||A(se)),ce=!B&&se;if(K&&(z=new Ee(P.NO_INSERT),W=null),B){(V.isFirst()||V.isLast())&&(q=V._path._closed),V._visited=!0;break}if(ce&&W&&(U.push(W),W=null),W||(ce&&Q.push(V),W={start:z._segments.length,crossings:Q,visited:J=[],handleIn:ee}),ce&&(V=se),!k(V)){z.removeSegments(W.start);for(var de=0,me=J.length;de<me;de++)J[de]._visited=!1;J.length=0;do V=W&&W.crossings.shift(),(!V||!V._path)&&(V=null,W=U.pop(),W&&(J=W.visited,ee=W.handleIn));while(W&&!k(V));if(!V)break}var _e=V.getNext();z.add(new ve(V._point,ee,_e&&V._handleOut)),V._visited=!0,J.push(V),V=_e||V._path.getFirstSegment(),ee=_e&&_e._handleIn}B&&(q&&(z.getFirstSegment().setHandleIn(ee),z.setClosed(q)),z.getArea()!==0&&c.push(z))}return c}return{_getWinding:function(_,x,c){return C(_,this.getCurves(),x,c)},unite:function(_,x){return l(this,_,"unite",x)},intersect:function(_,x){return l(this,_,"intersect",x)},subtract:function(_,x){return l(this,_,"subtract",x)},exclude:function(_,x){return l(this,_,"exclude",x)},divide:function(_,x){return x&&(x.trace==!1||x.stroke)?f(this,_,"divide"):h([this.subtract(_,x),this.intersect(_,x)],!0,this,_,x)},resolveCrossings:function(){var _=this._children,x=_||[this];function c(W,J){var ee=W&&W._intersection;return ee&&ee._overlap&&ee._path===J}var y=!1,k=!1,A=this.getIntersections(null,function(W){return W.hasOverlap()&&(y=!0)||W.isCrossing()&&(k=!0)}),S=y&&k&&[];if(A=yt.expand(A),y)for(var E=d(A,function(W){return W.hasOverlap()},S),T=E.length-1;T>=0;T--){var O=E[T],V=O._path,L=O._segment,z=L.getPrevious(),B=L.getNext();c(z,V)&&c(B,V)&&(L.remove(),z._handleOut._set(0,0),B._handleIn._set(0,0),z!==L&&!z.getCurve().hasLength()&&(B._handleIn.set(z._handleIn),z.remove()))}k&&(d(A,y&&function(W){var J=W.getCurve(),ee=W.getSegment(),ne=W._intersection,le=ne._curve,K=ne._segment;if(J&&le&&J._path&&le._path)return!0;ee&&(ee._intersection=null),K&&(K._intersection=null)},S),S&&v(S),x=w(R.each(x,function(W){R.push(this,W._segments)},[])));var q=x.length,U;return q>1&&_?(x!==_&&this.setChildren(x),U=this):q===1&&!_&&(x[0]!==this&&this.setSegments(x[0].removeSegments()),U=this),U||(U=new ut(P.NO_INSERT),U.addChildren(x),U=U.reduce(),U.copyAttributes(this),this.replaceWith(U)),U},reorient:function(_,x){var c=this._children;return c&&c.length?this.setChildren(p(this.removeChildren(),function(y){return!!(_?y:y&1)},x)):x!==X&&this.setClockwise(x),this},getInteriorPoint:function(){var _=this.getBounds(),x=_.getCenter(!0);if(!this.contains(x)){for(var c=this.getCurves(),y=x.y,k=[],A=[],S=0,E=c.length;S<E;S++){var T=c[S].getValues(),O=T[1],V=T[3],L=T[5],z=T[7];if(y>=e(O,V,L,z)&&y<=t(O,V,L,z))for(var B=re.getMonoCurves(T),q=0,U=B.length;q<U;q++){var W=B[q],J=W[1],ee=W[7];if(J!==ee&&(y>=J&&y<=ee||y>=ee&&y<=J)){var ne=y===J?W[0]:y===ee?W[6]:re.solveCubic(W,1,y,A,0,1)===1?re.getPoint(W,A[0]).x:(W[0]+W[6])/2;k.push(ne)}}}k.length>1&&(k.sort(function(le,K){return le-K}),x.x=(k[0]+k[1])/2)}return x}}});var Pi=R.extend({_class:"PathFlattener",initialize:function(e,t,n,r,s){var a=[],h=[],o=0,l=1/(n||32),f=e._segments,g=f[0],v;function p(w,_){var x=re.getValues(w,_,s);a.push(x),d(x,w._index,0,1)}function d(w,_,x,c){if(c-x>l&&!(r&&re.isStraight(w))&&!re.isFlatEnough(w,t||.25)){var y=re.subdivide(w,.5),k=(x+c)/2;d(y[0],_,x,k),d(y[1],_,k,c)}else{var A=w[6]-w[0],S=w[7]-w[1],E=Math.sqrt(A*A+S*S);E>0&&(o+=E,h.push({offset:o,curve:w,index:_,time:c}))}}for(var C=1,b=f.length;C<b;C++)v=f[C],p(g,v),g=v;e._closed&&p(v||g,f[0]),this.curves=a,this.parts=h,this.length=o,this.index=0},_get:function(e){for(var t=this.parts,n=t.length,r,s=this.index;r=s,!(!s||t[--s].offset<e););for(;r<n;r++){var a=t[r];if(a.offset>=e){this.index=r;var h=t[r-1],o=h&&h.index===a.index?h.time:0,l=h?h.offset:0;return{index:a.index,time:o+(a.time-o)*(e-l)/(a.offset-l)}}}return{index:t[n-1].index,time:1}},drawPart:function(e,t,n){for(var r=this._get(t),s=this._get(n),a=r.index,h=s.index;a<=h;a++){var o=re.getPart(this.curves[a],a===r.index?r.time:0,a===s.index?s.time:1);a===r.index&&e.moveTo(o[0],o[1]),e.bezierCurveTo.apply(e,o.slice(2))}}},R.each(re._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this._get(t);return re[e](this.curves[n.index],n.time)}},{})),Bt=R.extend({initialize:function(e){for(var t=this.points=[],n=e._segments,r=e._closed,s=0,a,h=n.length;s<h;s++){var o=n[s].point;(!a||!a.equals(o))&&t.push(a=o.clone())}r&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=r},fit:function(e){var t=this.points,n=t.length,r=null;return n>0&&(r=[new ve(t[0])],n>1&&(this.fitCubic(r,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,n,r,s,a){var h=this.points;if(r-n===1){var o=h[n],l=h[r],f=o.getDistance(l)/3;this.addCurve(e,[o,o.add(s.normalize(f)),l.add(a.normalize(f)),l]);return}for(var g=this.chordLengthParameterize(n,r),v=Math.max(t,t*t),p,d=!0,C=0;C<=4;C++){var b=this.generateBezier(n,r,g,s,a),w=this.findMaxError(n,r,b,g);if(w.error<t&&d){this.addCurve(e,b);return}if(p=w.index,w.error>=v)break;d=this.reparameterize(n,r,g,b),v=w.error}var _=h[p-1].subtract(h[p+1]);this.fitCubic(e,t,n,p,s,_),this.fitCubic(e,t,p,r,_.negate(),a)},addCurve:function(e,t){var n=e[e.length-1];n.setHandleOut(t[1].subtract(t[0])),e.push(new ve(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,r,s){for(var a=1e-12,h=Math.abs,o=this.points,l=o[e],f=o[t],g=[[0,0],[0,0]],v=[0,0],p=0,d=t-e+1;p<d;p++){var C=n[p],b=1-C,w=3*C*b,_=b*b*b,x=w*b,c=w*C,y=C*C*C,k=r.normalize(x),A=s.normalize(c),S=o[e+p].subtract(l.multiply(_+x)).subtract(f.multiply(c+y));g[0][0]+=k.dot(k),g[0][1]+=k.dot(A),g[1][0]=g[0][1],g[1][1]+=A.dot(A),v[0]+=k.dot(S),v[1]+=A.dot(S)}var E=g[0][0]*g[1][1]-g[1][0]*g[0][1],T,O;if(h(E)>a){var V=g[0][0]*v[1]-g[1][0]*v[0],L=v[0]*g[1][1]-v[1]*g[0][1];T=L/E,O=V/E}else{var z=g[0][0]+g[0][1],B=g[1][0]+g[1][1];T=O=h(z)>a?v[0]/z:h(B)>a?v[1]/B:0}var q=f.getDistance(l),U=a*q,W,J;if(T<U||O<U)T=O=q/3;else{var ee=f.subtract(l);W=r.normalize(T),J=s.normalize(O),W.dot(ee)-J.dot(ee)>q*q&&(T=O=q/3,W=J=null)}return[l,l.add(W||r.normalize(T)),f.add(J||s.normalize(O)),f]},reparameterize:function(e,t,n,r){for(var s=e;s<=t;s++)n[s-e]=this.findRoot(r,this.points[s],n[s-e]);for(var s=1,a=n.length;s<a;s++)if(n[s]<=n[s-1])return!1;return!0},findRoot:function(e,t,n){for(var r=[],s=[],a=0;a<=2;a++)r[a]=e[a+1].subtract(e[a]).multiply(3);for(var a=0;a<=1;a++)s[a]=r[a+1].subtract(r[a]).multiply(2);var h=this.evaluate(3,e,n),o=this.evaluate(2,r,n),l=this.evaluate(1,s,n),f=h.subtract(t),g=o.dot(o)+f.dot(l);return Me.isMachineZero(g)?n:n-f.dot(o)/g},evaluate:function(e,t,n){for(var r=t.slice(),s=1;s<=e;s++)for(var a=0;a<=e-s;a++)r[a]=r[a].multiply(1-n).add(r[a+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){for(var n=[0],r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,s=t-e;r<=s;r++)n[r]/=n[s];return n},findMaxError:function(e,t,n,r){for(var s=Math.floor((t-e+1)/2),a=0,h=e+1;h<t;h++){var o=this.evaluate(3,n,r[h-e]),l=o.subtract(this.points[h]),f=l.x*l.x+l.y*l.y;f>=a&&(a=f,s=h)}return{error:a,index:s}}}),Tt=P.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var n=t&&R.isPlainObject(t)&&t.x===X&&t.y===X;this._initialize(n&&t,!n&&D.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),ci=Tt.extend({_class:"PointText",initialize:function(){Tt.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new fe(e.x,e.y,this,"setPoint")},setPoint:function(){var e=D.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var r=this._lines,s=this._style,a=s.hasFill(),h=s.hasStroke(),o=s.getLeading(),l=e.shadowColor;e.font=s.getFontStyle(),e.textAlign=s.getJustification();for(var f=0,g=r.length;f<g;f++){e.shadowColor=l;var v=r[f];a&&(e.fillText(v,0,0),e.shadowColor="rgba(0,0,0,0)"),h&&e.strokeText(v,0,0),e.translate(0,o)}}},_getBounds:function(e,t){var n=this._style,r=this._lines,s=r.length,a=n.getJustification(),h=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),r),l=0;a!=="left"&&(l-=o/(a==="center"?2:1));var f=new Z(l,s?-.75*h:0,o,s*h);return e?e._transformBounds(f,f):f}}),Ze=R.extend(new function(){var e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},n={transparent:[0,0,0,0]},r;function s(o){var l=o.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||o.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),f="rgb",g;if(l){var v=l[4]?4:3;g=new Array(v);for(var p=0;p<v;p++){var d=l[p+1];g[p]=parseInt(d.length==1?d+d:d,16)/255}}else if(l=o.match(/^(rgb|hsl)a?\((.*)\)$/)){f=l[1],g=l[2].trim().split(/[,\s]+/g);for(var C=f==="hsl",p=0,b=Math.min(g.length,4);p<b;p++){var w=g[p],d=parseFloat(w);if(C)if(p===0){var _=w.match(/([a-z]*)$/)[1];d*={turn:360,rad:180/Math.PI,grad:.9}[_]||1}else p<3&&(d/=100);else p<3&&(d/=/%$/.test(w)?100:255);g[p]=d}}else{var x=n[o];if(!x)if(Re){r||(r=Ye.getContext(1,1,{willReadFrequently:!0}),r.globalCompositeOperation="copy"),r.fillStyle="rgba(0,0,0,0)",r.fillStyle=o,r.fillRect(0,0,1,1);var c=r.getImageData(0,0,1,1).data;x=n[o]=[c[0]/255,c[1]/255,c[2]/255]}else x=[0,0,0];g=x.slice()}return[f,g]}var a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(o,l,f){var g=Math.max(o,l,f),v=Math.min(o,l,f),p=g-v,d=p===0?0:(g==o?(l-f)/p+(l<f?6:0):g==l?(f-o)/p+2:(o-l)/p+4)*60;return[d,g===0?0:p/g,g]},"hsb-rgb":function(o,l,f){o=(o/60%6+6)%6;var v=Math.floor(o),g=o-v,v=a[v],p=[f,f*(1-l),f*(1-l*g),f*(1-l*(1-g))];return[p[v[0]],p[v[1]],p[v[2]]]},"rgb-hsl":function(o,l,f){var g=Math.max(o,l,f),v=Math.min(o,l,f),p=g-v,d=p===0,C=d?0:(g==o?(l-f)/p+(l<f?6:0):g==l?(f-o)/p+2:(o-l)/p+4)*60,b=(g+v)/2,w=d?0:b<.5?p/(g+v):p/(2-g-v);return[C,w,b]},"hsl-rgb":function(o,l,f){if(o=(o/360%1+1)%1,l===0)return[f,f,f];for(var g=[o+1/3,o,o-1/3],v=f<.5?f*(1+l):f+l-f*l,p=2*f-v,d=[],C=0;C<3;C++){var b=g[C];b<0&&(b+=1),b>1&&(b-=1),d[C]=6*b<1?p+(v-p)*6*b:2*b<1?v:3*b<2?p+(v-p)*(2/3-b)*6:p}return d},"rgb-gray":function(o,l,f){return[o*.2989+l*.587+f*.114]},"gray-rgb":function(o){return[o,o,o]},"gray-hsb":function(o){return[0,0,o]},"gray-hsl":function(o){return[0,0,o]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return R.each(e,function(o,l){t[l]=[],R.each(o,function(f,g){var v=R.capitalize(f),p=/^(hue|saturation)$/.test(f),d=t[l][g]=l==="gradient"?f==="gradient"?function(C){var b=this._components[0];return C=Gt.read(Array.isArray(C)?C:arguments,0,{readNull:!0}),b!==C&&(b&&b._removeOwner(this),C&&C._addOwner(this)),C}:function(){return D.read(arguments,0,{readNull:f==="highlight",clone:!0})}:function(C){return C==null||isNaN(C)?0:+C};this["get"+v]=function(){return this._type===l||p&&/^hs[bl]$/.test(this._type)?this._components[g]:this._convert(l)[g]},this["set"+v]=function(C){this._type!==l&&!(p&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(l),this._properties=e[l],this._type=l),this._components[g]=d.call(this,C),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function o(l){var f=arguments,g=this.__read,v=0,p,d,C,b;Array.isArray(l)&&(f=l,l=f[0]);var w=l!=null&&typeof l;if(w==="string"&&l in e&&(p=l,l=f[1],Array.isArray(l)?(d=l,C=f[2]):(g&&(v=1),f=R.slice(f,1),w=typeof l)),!d){if(b=w==="number"?f:w==="object"&&l.length!=null?l:null,b){p||(p=b.length>=3?"rgb":"gray");var _=e[p].length;C=b[_],g&&(v+=b===arguments?_+(C!=null?1:0):1),b.length>_&&(b=R.slice(b,0,_))}else if(w==="string"){var x=s(l);p=x[0],d=x[1],d.length===4&&(C=d[3],d.length--)}else if(w==="object")if(l.constructor===o){if(p=l._type,d=l._components.slice(),C=l._alpha,p==="gradient")for(var c=1,y=d.length;c<y;c++){var k=d[c];k&&(d[c]=k.clone())}}else if(l.constructor===Gt)p="gradient",b=f;else{p="hue"in l?"lightness"in l?"hsl":"hsb":"gradient"in l||"stops"in l||"radial"in l?"gradient":"gray"in l?"gray":"rgb";var A=e[p],S=t[p];this._components=d=[];for(var c=0,y=A.length;c<y;c++){var E=l[A[c]];E==null&&!c&&p==="gradient"&&"stops"in l&&(E={stops:l.stops,radial:l.radial}),E=S[c].call(this,E),E!=null&&(d[c]=E)}C=l.alpha}g&&p&&(v=1)}if(this._type=p||"rgb",!d){this._components=d=[];for(var S=t[this._type],c=0,y=S.length;c<y;c++){var E=S[c].call(this,b&&b[c]);E!=null&&(d[c]=E)}}return this._components=d,this._properties=e[this._type],this._alpha=C,g&&(this.__read=v),this},set:"#initialize",_serialize:function(o,l){var f=this.getComponents();return R.serialize(/^(gray|rgb)$/.test(this._type)?f:[this._type].concat(f),o,!0,l)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(o){var l;return this._type===o?this._components.slice():(l=h[this._type+"-"+o])?l.apply(this,this._components):h["rgb-"+o].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(o){return new Ze(o,this._convert(o),this._alpha)},getType:function(){return this._type},setType:function(o){this._components=this._convert(o),this._properties=e[o],this._type=o},getComponents:function(){var o=this._components.slice();return this._alpha!=null&&o.push(this._alpha),o},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(o){this._alpha=o==null?null:Math.min(Math.max(o,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(o){var l=R.isPlainValue(o,!0)?Ze.read(arguments):o;return l===this||l&&this._class===l._class&&this._type===l._type&&this.getAlpha()===l.getAlpha()&&R.equals(this._components,l._components)||!1},toString:function(){for(var o=this._properties,l=[],f=this._type==="gradient",g=at.instance,v=0,p=o.length;v<p;v++){var d=this._components[v];d!=null&&l.push(o[v]+": "+(f?d:g.number(d)))}return this._alpha!=null&&l.push("alpha: "+g.number(this._alpha)),"{ "+l.join(", ")+" }"},toCSS:function(o){var l=this._convert("rgb"),f=o||this._alpha==null?1:this._alpha;function g(v){return Math.round((v<0?0:v>1?1:v)*255)}return l=[g(l[0]),g(l[1]),g(l[2])],f<1&&l.push(f<0?0:f),o?"#"+((1<<24)+(l[0]<<16)+(l[1]<<8)+l[2]).toString(16).slice(1):(l.length==4?"rgba(":"rgb(")+l.join(",")+")"},toCanvasStyle:function(o,l){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var f=this._components,g=f[0],v=g._stops,p=f[1],d=f[2],C=f[3],b=l&&l.inverted(),w;if(b&&(p=b._transformPoint(p),d=b._transformPoint(d),C&&(C=b._transformPoint(C))),g._radial){var _=d.getDistance(p);if(C){var x=C.subtract(p);x.getLength()>_&&(C=p.add(x.normalize(_-.1)))}var c=C||p;w=o.createRadialGradient(c.x,c.y,0,p.x,p.y,_)}else w=o.createLinearGradient(p.x,p.y,d.x,d.y);for(var y=0,k=v.length;y<k;y++){var A=v[y],S=A._offset;w.addColorStop(S??y/(k-1),A._color.toCanvasStyle())}return this._canvasStyle=w},transform:function(o){if(this._type==="gradient"){for(var l=this._components,f=1,g=l.length;f<g;f++){var v=l[f];o._transformPoint(v,v,!0)}this._changed()}},statics:{_types:e,random:function(){var o=Math.random;return new Ze(o(),o(),o())},_setOwner:function(o,l,f){return o&&(o._owner&&l&&o._owner!==l&&(o=o.clone()),!o._owner^!l&&(o._owner=l||null,o._setter=f||null)),o}}})},new function(){var e={add:function(t,n){return t+n},subtract:function(t,n){return t-n},multiply:function(t,n){return t*n},divide:function(t,n){return t/n}};return R.each(e,function(t,n){this[n]=function(r){r=Ze.read(arguments);for(var s=this._type,a=this._components,h=r._convert(s),o=0,l=a.length;o<l;o++)h[o]=t(a[o],h[o]);return new Ze(s,h,this._alpha!=null?t(this._alpha,r.getAlpha()):null)}},{})}),Gt=R.extend({_class:"Gradient",initialize:function(t,n){this._id=xt.get(),t&&R.isPlainObject(t)&&(this.set(t),t=n=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof n=="string"&&n==="radial"||n||!1)},_serialize:function(e,t){return t.add(this,function(){return R.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length||(this._owners=X))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new Gt(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var n=0,r=t.length;n<r;n++)t[n]._owner=X;t=this._stops=di.readList(e,0,{clone:!0});for(var n=0,r=t.length;n<r;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,r=t.length;if(r===n.length){for(var s=0;s<r;s++)if(!t[s].equals(n[s]))return!1;return!0}}return!1}}),di=R.extend({_class:"GradientStop",initialize:function(t,n){var r=t,s=n;typeof t=="object"&&n===X&&(Array.isArray(t)&&typeof t[0]!="number"?(r=t[0],s=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(r=t.color,s=t.offset||t.rampPoint||0)),this.setColor(r),this.setOffset(s)},clone:function(){return new di(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,r=this._offset;return R.serialize(r==null?[n]:[n,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Ze._setOwner(this._color,null),this._color=Ze._setOwner(Ze.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),pi=R.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new D,selectedColor:null},t=R.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=R.set({},t,{fillColor:new Ze}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},a={_class:"Style",beans:!0,initialize:function(o,l,f){this._values={},this._owner=l,this._project=l&&l._project||f||Pe.project,this._defaults=!l||l instanceof ie?t:l instanceof Tt?n:e,o&&this.set(o)}};return R.each(t,function(h,o){var l=/Color$/.test(o),f=o==="shadowOffset",g=R.capitalize(o),v=r[o],p="set"+g,d="get"+g;a[p]=function(C){var b=this._owner,w=b&&b._children,_=w&&w.length>0&&!(b instanceof ut);if(_)for(var x=0,c=w.length;x<c;x++)w[x]._style[p](C);if((o==="selectedColor"||!_)&&o in this._defaults){var y=this._values[o];y!==C&&(l&&(y&&(Ze._setOwner(y,null),y._canvasStyle=null),C&&C.constructor===Ze&&(C=Ze._setOwner(C,b,_&&p))),this._values[o]=C,b&&b._changed(v||129))}},a[d]=function(C){var b=this._owner,w=b&&b._children,_=w&&w.length>0&&!(b instanceof ut),x;if(_&&!C)for(var c=0,y=w.length;c<y;c++){var k=w[c]._style[d]();if(!c)x=k;else if(!R.equals(x,k))return X}else if(o in this._defaults){var x=this._values[o];if(x===X)x=this._defaults[o],x&&x.clone&&(x=x.clone());else{var A=l?Ze:f?D:null;A&&!(x&&x.constructor===A)&&(this._values[o]=x=A.read([x],0,{readNull:!0,clone:!0}))}}return x&&l&&(x=Ze._setOwner(x,b,_&&p)),x},s[d]=function(C){return this._style[d](C)},s[p]=function(C){this._style[p](C)}}),R.each({Font:"FontFamily",WindingRule:"FillRule"},function(h,o){var l="get"+o,f="set"+o;a[l]=s[l]="#get"+h,a[f]=s[f]="#set"+h}),P.inject(s),a},{set:function(e){var t=e instanceof pi,n=t?e._values:e;if(n){for(var r in n)if(r in this._defaults){var s=n[r];this[r]=s&&t&&s.clone?s.clone():s}}},equals:function(e){function t(n,r,s){var a=n._values,h=r._values,o=r._defaults;for(var l in a){var f=a[l],g=h[l];if(!(s&&l in h)&&!R.equals(f,g===X?o[l]:g))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;e=this.getFillColor(),e&&(e._canvasStyle=null),e=this.getStrokeColor(),e&&(e._canvasStyle=null),e=this.getShadowColor(),e&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),t??n*1.2}}),He=new function(){function e(t,n,r,s){for(var a=["","webkit","moz","Moz","ms","o"],h=n[0].toUpperCase()+n.substring(1),o=0;o<6;o++){var l=a[o],f=l?l+h:n;if(f in t){if(r)t[f]=s;else return t[f];break}}}return{getStyles:function(t){var n=t&&t.nodeType!==9?t.ownerDocument:t,r=n&&n.defaultView;return r&&r.getComputedStyle(t,"")},getBounds:function(t,n){var r=t.ownerDocument,s=r.body,a=r.documentElement,h;try{h=t.getBoundingClientRect()}catch{h={left:0,top:0,width:0,height:0}}var o=h.left-(a.clientLeft||s.clientLeft||0),l=h.top-(a.clientTop||s.clientTop||0);if(!n){var f=r.defaultView;o+=f.pageXOffset||a.scrollLeft||s.scrollLeft,l+=f.pageYOffset||a.scrollTop||s.scrollTop}return new Z(o,l,h.width,h.height)},getViewportBounds:function(t){var n=t.ownerDocument,r=n.defaultView,s=n.documentElement;return new Z(0,0,r.innerWidth||s.clientWidth,r.innerHeight||s.clientHeight)},getOffset:function(t,n){return He.getBounds(t,n).getPoint()},getSize:function(t){return He.getBounds(t,!0).getSize()},isInvisible:function(t){return He.getSize(t).equals(new $(0,0))},isInView:function(t){return!He.isInvisible(t)&&He.getViewportBounds(t).intersects(He.getBounds(t,!0))},isInserted:function(t){return Le.body.contains(t)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,r){if(typeof n=="object")for(var s in n)e(t,s,!0,n[s]);else e(t,n,!0,r)}}},We={add:function(e,t){if(e)for(var n in t)for(var r=t[n],s=n.split(/[\s,]+/g),a=0,h=s.length;a<h;a++){var o=s[a],l=e===Le&&(o==="touchstart"||o==="touchmove")?{passive:!1}:!1;e.addEventListener(o,r,l)}},remove:function(e,t){if(e)for(var n in t)for(var r=t[n],s=n.split(/[\s,]+/g),a=0,h=s.length;a<h;a++)e.removeEventListener(s[a],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new D(t.pageX||t.clientX+Le.documentElement.scrollLeft,t.pageY||t.clientY+Le.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return We.getPoint(e).subtract(He.getOffset(t||We.getTarget(e)))}};We.requestAnimationFrame=new function(){var e=He.getPrefixed(Re,"requestAnimationFrame"),t=!1,n=[],r;function s(){var a=n;n=[];for(var h=0,o=a.length;h<o;h++)a[h]();t=e&&n.length,t&&e(s)}return function(a){n.push(a),e?t||(e(s),t=!0):r||(r=setInterval(s,1e3/60))}};var Ge=R.extend(je,{_class:"View",initialize:function e(t,n){function r(v){return n[v]||parseInt(n.getAttribute(v),10)}function s(){var v=He.getSize(n);return v.isNaN()||v.isZero()?new $(r("width"),r("height")):v}var a;if(Re&&n){this._id=n.getAttribute("id"),this._id==null&&n.setAttribute("id",this._id="paper-view-"+e._id++),We.add(n,this._viewEvents);var h="none";if(He.setPrefixed(n.style,{userDrag:h,userSelect:h,touchCallout:h,contentZooming:h,tapHighlightColor:"rgba(0,0,0,0)"}),Ue.hasAttribute(n,"resize")){var o=this;We.add(Re,this._windowEvents={resize:function(){o.setViewSize(s())}})}if(a=s(),Ue.hasAttribute(n,"stats")&&typeof Stats<"u"){this._stats=new Stats;var l=this._stats.domElement,f=l.style,g=He.getOffset(n);f.position="absolute",f.left=g.x+"px",f.top=g.y+"px",Le.body.appendChild(l)}}else a=new $(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=Re&&Re.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new oe)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Pe.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Ge._focused===this&&(Ge._focused=null),Ge._views.splice(Ge._views.indexOf(this),1),delete Ge._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),We.remove(this._element,this._viewEvents),We.remove(Re,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:R.each(P._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;We.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!He.getPrefixed(Le,"hidden")||Ue.getAttribute(t,"keepalive")==="true")&&He.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Pe=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new R({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete n[e._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new R(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=X},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var e=this._viewSize;return new ue(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=$.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new Z(new D,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return He.isInView(this._element)},isInserted:function(){return He.isInserted(this._element)},getPixelSize:function(e){var t=this._element,n;if(t){var r=t.parentNode,s=Le.createElement("div");s.style.fontSize=e,r.appendChild(s),n=parseFloat(He.getStyles(s).fontSize),r.removeChild(s)}else n=parseFloat(n);return n},getTextWidth:function(e,t){return 0}},R.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var n=arguments,r=(t?R:D).read(n),s=D.read(n,0,{readNull:!0});return this.transform(new oe()[e](r,s||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new oe;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=D.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform(new oe().scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();t!=null&&e!=null&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new fe(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=D.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(D.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(D.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(D.read(arguments))},getEventPoint:function(e){return this.viewToProject(We.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){Le&&typeof t=="string"&&(t=Le.getElementById(t));var n=Re?Ai:Ge;return new n(e,t)}}},new function(){if(!Re)return;var e,t,n=!1,r=!1;function s(L){var z=We.getTarget(L);return z.getAttribute&&Ge._viewsById[z.getAttribute("id")]}function a(){var L=Ge._focused;if(!L||!L.isVisible()){for(var z=0,B=Ge._views.length;z<B;z++)if((L=Ge._views[z]).isVisible()){Ge._focused=t=L;break}}}function h(L,z,B){L._handleMouseEvent("mousemove",z,B)}var o=Re.navigator,l,f,g;o.pointerEnabled||o.msPointerEnabled?(l="pointerdown MSPointerDown",f="pointermove MSPointerMove",g="pointerup pointercancel MSPointerUp MSPointerCancel"):(l="touchstart",f="touchmove",g="touchend touchcancel","ontouchstart"in Re&&o.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(l+=" mousedown",f+=" mousemove",g+=" mouseup"));var v={},p={mouseout:function(L){var z=Ge._focused,B=We.getRelatedTarget(L);if(z&&(!B||B.nodeName==="HTML")){var q=We.getOffset(L,z._element),U=q.x,W=Math.abs,J=W(U),ee=1<<25,ne=J-ee;q.x=W(ne)<J?ne*(U<0?-1:1):U,h(z,L,z.viewToProject(q))}},scroll:a};v[l]=function(L){var z=Ge._focused=s(L);n||(n=!0,z._handleMouseEvent("mousedown",L))},p[f]=function(L){var z=Ge._focused;if(!r){var B=s(L);B?z!==B&&(z&&h(z,L),e||(e=z),z=Ge._focused=t=B):t&&t===z&&(e&&!e.isInserted()&&(e=null),z=Ge._focused=e,e=null,a())}z&&h(z,L)},p[l]=function(){r=!0},p[g]=function(L){var z=Ge._focused;z&&n&&z._handleMouseEvent("mouseup",L),r=n=!1},We.add(Le,p),We.add(Re,{load:a});var d=!1,C=!1,b={doubleclick:"click",mousedrag:"mousemove"},w=!1,_,x,c,y,k,A,S,E;function T(L,z,B,q,U,W,J){var ee=!1,ne;function le(K,Q){if(K.responds(Q)){if(ne||(ne=new Ti(Q,q,U,z||K,W?U.subtract(W):null)),K.emit(Q,ne)&&(d=!0,ne.prevented&&(C=!0),ne.stopped))return ee=!0}else{var se=b[Q];if(se)return le(K,se)}}for(;L&&L!==J&&!le(L,B);)L=L._parent;return ee}function O(L,z,B,q,U,W){return L._project.removeOn(B),C=d=!1,k&&T(k,null,B,q,U,W)||z&&z!==k&&!z.isDescendant(k)&&T(z,null,B==="mousedrag"?"mousemove":B,q,U,W,k)||T(L,k||z||L,B,q,U,W)}var V={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:v,_handleMouseEvent:function(L,z,B){var q=this._itemEvents,U=q.native[L],W=L==="mousemove",J=this._scope.tool,ee=this;function ne(me){return q.virtual[me]||ee.responds(me)||J&&J.responds(me)}W&&n&&ne("mousedrag")&&(L="mousedrag"),B||(B=this.getEventPoint(z));var le=this.getBounds().contains(B),K=U&&le&&ee._project.hitTest(B,{tolerance:0,fill:!0,stroke:!0}),Q=K&&K.item||null,se=!1,ce={};if(ce[L.substr(5)]=!0,U&&Q!==y&&(y&&T(y,null,"mouseleave",z,B),Q&&T(Q,null,"mouseenter",z,B),y=Q),w^le&&(T(this,null,le?"mouseenter":"mouseleave",z,B),se=!0),(le||ce.drag)&&!B.equals(x)&&(O(this,Q,W?L:"mousemove",z,B,x),se=!0),w=le,ce.down&&le||ce.up&&_){if(O(this,Q,L,z,B,_),ce.down){if(E=Q===A&&Date.now()-S<300,c=A=Q,!C&&Q){for(var de=Q;de&&!de.responds("mousedrag");)de=de._parent;de&&(k=Q)}_=B}else ce.up&&(!C&&Q===c&&(S=Date.now(),O(this,Q,E?"doubleclick":"click",z,B,_),E=!1),c=k=null);w=!1,se=!0}x=B,se&&J&&(d=J._handleMouseEvent(L,z,B,ce)||d),z.cancelable!==!1&&(d&&!ce.move||ce.down&&ne("mouseup"))&&z.preventDefault()},_handleKeyEvent:function(L,z,B,q){var U=this._scope,W=U.tool,J;function ee(ne){ne.responds(L)&&(Pe=U,ne.emit(L,J=J||new Ei(L,z,B,q)))}this.isVisible()&&(ee(this),W&&W.responds(L)&&ee(W))},_countItemEvent:function(L,z){var B=this._itemEvents,q=B.native,U=B.virtual;for(var W in V)q[W]=(q[W]||0)+(V[W][L]||0)*z;U[L]=(U[L]||0)+z},statics:{updateFocus:a,_resetState:function(){n=r=d=w=!1,e=t=_=x=c=y=k=A=S=E=null}}}}),Ai=Ge.extend({_class:"CanvasView",initialize:function(t,n){if(!(n instanceof Re.HTMLCanvasElement)){var r=$.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+R.slice(arguments,1));n=Ye.getCanvas(r)}var s=this._context=n.getContext("2d");if(s.save(),this._pixelRatio=1,!/^off|false$/.test(Ue.getAttribute(n,"hidpi"))){var a=Re.devicePixelRatio||1,h=He.getPrefixed(s,"backingStorePixelRatio")||1;this._pixelRatio=a/h}Ge.call(this,t,n),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var r=this._pixelRatio;if(e.base.call(this,t*r,n*r),r!==1){var s=this._element,a=this._context;if(!Ue.hasAttribute(s,"resize")){var h=s.style;h.width=t+"px",h.height=n+"px"}a.restore(),a.save(),a.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function e(t){var n=Pe.agent,r;if(n&&n.firefox)r=e.base.call(this,t);else{var s=this._context,a=s.font;s.font=t+" serif",r=parseFloat(s.font),s.font=a}return r},getTextWidth:function(e,t){var n=this._context,r=n.font,s=0;n.font=e;for(var a=0,h=t.length;a<h;a++)s=Math.max(s,n.measureText(t[a]).width);return n.font=r,s},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),jt=R.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return ri.modifiers}}),Ei=jt.extend({_class:"KeyEvent",initialize:function(t,n,r,s){this.type=t,this.event=n,this.key=r,this.character=s},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),ri=new function(){var e={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"	",space:" ",enter:"\r"},n={},r={},s,a,h=new R({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var f=Pe&&Pe.agent;return f&&f.mac?this.meta:this.control}}});function o(f){var g=f.key||f.keyIdentifier;return g=/^U\+/.test(g)?String.fromCharCode(parseInt(g.substr(2),16)):/^Arrow[A-Z]/.test(g)?g.substr(5):g==="Unidentified"||g===X?String.fromCharCode(f.keyCode):g,e[g]||(g.length>1?R.hyphenate(g):g.toLowerCase())}function l(f,g,v,p){var d=Ge._focused,C;if(n[g]=f,f?r[g]=v:delete r[g],g.length>1&&(C=R.camelize(g))in h){h[C]=f;var b=Pe&&Pe.agent;if(C==="meta"&&b&&b.mac)if(f)s={};else{for(var w in s)w in r&&l(!1,w,s[w],p);s=null}}else f&&s&&(s[g]=v);d&&d._handleKeyEvent(f?"keydown":"keyup",p,g,v)}return We.add(Le,{keydown:function(f){var g=o(f),v=Pe&&Pe.agent;g.length>1||v&&v.chrome&&(f.altKey||v.mac&&f.metaKey||!v.mac&&f.ctrlKey)?l(!0,g,t[g]||(g.length>1?"":g),f):a=g},keypress:function(f){if(a){var g=o(f),v=f.charCode,p=v>=32?String.fromCharCode(v):g.length>1?"":g;g!==a&&(g=p.toLowerCase()),l(!0,g,p,f),a=null}},keyup:function(f){var g=o(f);g in r&&l(!1,g,r[g],f)}}),We.add(Re,{blur:function(f){for(var g in r)l(!1,g,r[g],f)}}),{modifiers:h,isDown:function(f){return!!n[f]}}},Ti=jt.extend({_class:"MouseEvent",initialize:function(t,n,r,s,a){this.type=t,this.event=n,this.point=r,this.target=s,this.delta=a},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Zt=jt.extend({_class:"ToolEvent",_item:null,initialize:function(t,n,r){this.tool=t,this.type=n,this.event=r},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),gi=st.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){st.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,e!=null&&this._maxDistance!=null&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&e!=null&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,r){Pe=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var s=r.move||r.drag,a=this.responds(e),h=this.minDistance,o=this.maxDistance,l=!1,f=this;function g(p,d){var C=n,b=s?f._point:f._downPoint||C;if(s){if(f._moveCount>=0&&C.equals(b))return!1;if(b&&(p!=null||d!=null)){var w=C.subtract(b),_=w.getLength();if(_<(p||0))return!1;d&&(C=b.add(w.normalize(Math.min(_,d))))}f._moveCount++}return f._point=C,f._lastPoint=b||C,r.down&&(f._moveCount=-1,f._downPoint=C,f._downCount++),!0}function v(){a&&(l=f.emit(e,new Zt(f,e,t))||l)}if(r.down)g(),v();else if(r.up)g(null,o),v();else if(a)for(;g(h,o);)v();return l}}),_i=R.extend(je,{_class:"Tween",statics:{easings:new R({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+2*(2-e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,n,r,s,a,h){this.object=t;var o=typeof a,l=o==="function";this.type=l?o:o==="string"?a:"linear",this.easing=l?a:e.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null;var f=n||r;this._keys=f?Object.keys(f):[],this._parsedKeys=this._parseKeys(this._keys),this._from=f&&this._getState(n),this._to=f&&this._getState(r),h!==!1&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,r=function(g){return typeof g=="function"?g(t,e):g},s=0,a=n&&n.length;s<a;s++){var h=n[s],o=r(this._from[h]),l=r(this._to[h]),f=o&&l&&o.__add&&l.__add?l.__subtract(o).__multiply(t).__add(o):(l-o)*t+o;this._setProperty(this._parsedKeys[h],f)}this.responds("update")&&this.emit("update",new R({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},r=0,s=t.length;r<s;r++){var a=t[r],h=this._parsedKeys[a],o=this._getProperty(h),l;if(e){var f=this._resolveValue(o,e[a]);this._setProperty(h,f),l=this._getProperty(h),l=l&&l.clone?l.clone():l,this._setProperty(h,o)}else l=o&&o.clone?o.clone():o;n[a]=l}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&t.length===2){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}else if(typeof t=="string"){var r=t.match(/^[+\-*/]=(.*)/);if(r){var s=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],s)}}}return t},_calculate:function(e,t,n){return Pe.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,r=e.length;n<r;n++){var s=e[n],a=s.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[s]=a.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,r=0,s=e.length-(t||0);r<s&&n;r++)n=n[e[r]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),Kt={request:function(e){var t=new ot.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,R.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var n=t.status;n===0||n===200?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var n=t.status,r='Could not load "'+e.url+'" (Status: '+n+")";if(e.onError)e.onError(r,n);else throw new Error(r)},t.send(null)}},Ye=R.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,n){if(!Re)return null;var r,s=!0;typeof e=="object"&&(t=e.height,e=e.width),this.canvases.length?r=this.canvases.pop():(r=Le.createElement("canvas"),s=!1);var a=r.getContext("2d",n||{});if(!a)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===e&&r.height===t?s&&a.clearRect(0,0,e+1,t+1):(r.width=e,r.height=t),a.save(),r},getContext:function(e,t,n){var r=this.getCanvas(e,t,n);return r?r.getContext("2d",n||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},wt=new function(){var e=Math.min,t=Math.max,n=Math.abs,r,s,a,h,o,l,f,g,v,p,d;function C(k,A,S){return .2989*k+.587*A+.114*S}function b(k,A,S,O){var T=O-C(k,A,S);v=k+T,p=A+T,d=S+T;var O=C(v,p,d),V=e(v,p,d),L=t(v,p,d);if(V<0){var z=O-V;v=O+(v-O)*O/z,p=O+(p-O)*O/z,d=O+(d-O)*O/z}if(L>255){var B=255-O,q=L-O;v=O+(v-O)*B/q,p=O+(p-O)*B/q,d=O+(d-O)*B/q}}function w(k,A,S){return t(k,A,S)-e(k,A,S)}function _(k,A,S,E){var T=[k,A,S],O=t(k,A,S),V=e(k,A,S),L;V=V===k?0:V===A?1:2,O=O===k?0:O===A?1:2,L=e(V,O)===0?t(V,O)===1?2:1:0,T[O]>T[V]?(T[L]=(T[L]-T[V])*E/(T[O]-T[V]),T[O]=E):T[L]=T[O]=0,T[V]=0,v=T[0],p=T[1],d=T[2]}var x={multiply:function(){v=o*r/255,p=l*s/255,d=f*a/255},screen:function(){v=o+r-o*r/255,p=l+s-l*s/255,d=f+a-f*a/255},overlay:function(){v=o<128?2*o*r/255:255-2*(255-o)*(255-r)/255,p=l<128?2*l*s/255:255-2*(255-l)*(255-s)/255,d=f<128?2*f*a/255:255-2*(255-f)*(255-a)/255},"soft-light":function(){var k=r*o/255;v=k+o*(255-(255-o)*(255-r)/255-k)/255,k=s*l/255,p=k+l*(255-(255-l)*(255-s)/255-k)/255,k=a*f/255,d=k+f*(255-(255-f)*(255-a)/255-k)/255},"hard-light":function(){v=r<128?2*r*o/255:255-2*(255-r)*(255-o)/255,p=s<128?2*s*l/255:255-2*(255-s)*(255-l)/255,d=a<128?2*a*f/255:255-2*(255-a)*(255-f)/255},"color-dodge":function(){v=o===0?0:r===255?255:e(255,255*o/(255-r)),p=l===0?0:s===255?255:e(255,255*l/(255-s)),d=f===0?0:a===255?255:e(255,255*f/(255-a))},"color-burn":function(){v=o===255?255:r===0?0:t(0,255-(255-o)*255/r),p=l===255?255:s===0?0:t(0,255-(255-l)*255/s),d=f===255?255:a===0?0:t(0,255-(255-f)*255/a)},darken:function(){v=o<r?o:r,p=l<s?l:s,d=f<a?f:a},lighten:function(){v=o>r?o:r,p=l>s?l:s,d=f>a?f:a},difference:function(){v=o-r,v<0&&(v=-v),p=l-s,p<0&&(p=-p),d=f-a,d<0&&(d=-d)},exclusion:function(){v=o+r*(255-o-o)/255,p=l+s*(255-l-l)/255,d=f+a*(255-f-f)/255},hue:function(){_(r,s,a,w(o,l,f)),b(v,p,d,C(o,l,f))},saturation:function(){_(o,l,f,w(r,s,a)),b(v,p,d,C(o,l,f))},luminosity:function(){b(o,l,f,C(r,s,a))},color:function(){b(r,s,a,C(o,l,f))},add:function(){v=e(o+r,255),p=e(l+s,255),d=e(f+a,255)},subtract:function(){v=t(o-r,0),p=t(l-s,0),d=t(f-a,0)},average:function(){v=(o+r)/2,p=(l+s)/2,d=(f+a)/2},negation:function(){v=255-n(255-r-o),p=255-n(255-s-l),d=255-n(255-a-f)}},c=this.nativeModes=R.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(k){this[k]=!0},{}),y=Ye.getContext(1,1,{willReadFrequently:!0});y&&(R.each(x,function(k,A){var S=A==="darken",E=!1;y.save();try{y.fillStyle=S?"#300":"#a00",y.fillRect(0,0,1,1),y.globalCompositeOperation=A,y.globalCompositeOperation===A&&(y.fillStyle=S?"#a00":"#300",y.fillRect(0,0,1,1),E=y.getImageData(0,0,1,1).data[0]!==S?170:51)}catch{}y.restore(),c[A]=E}),Ye.release(y)),this.process=function(k,A,S,E,T){var O=A.canvas,V=k==="normal";if(V||c[k])S.save(),S.setTransform(1,0,0,1,0,0),S.globalAlpha=E,V||(S.globalCompositeOperation=k),S.drawImage(O,T.x,T.y),S.restore();else{var L=x[k];if(!L)return;for(var z=S.getImageData(T.x,T.y,O.width,O.height),B=z.data,q=A.getImageData(0,0,O.width,O.height).data,U=0,W=B.length;U<W;U+=4){r=q[U],o=B[U],s=q[U+1],l=B[U+1],a=q[U+2],f=B[U+2],h=q[U+3],g=B[U+3],L();var J=h*E/255,ee=1-J;B[U]=J*v+ee*o,B[U+1]=J*p+ee*l,B[U+2]=J*d+ee*f,B[U+3]=h*E+ee*g}S.putImageData(z,T.x,T.y)}}},Ke=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function s(o,l,f){return h(Le.createElementNS(e,o),l,f)}function a(o,l){var f=r[l],g=f?o.getAttributeNS(f,l):o.getAttribute(l);return g==="null"?null:g}function h(o,l,f){for(var g in l){var v=l[g],p=r[g];typeof v=="number"&&f&&(v=f.number(v)),p?o.setAttributeNS(p,g,v):o.setAttribute(g,v)}return o}return{svg:e,xmlns:t,xlink:n,create:s,get:a,set:h}},vi=R.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof Nt||e instanceof Fe||e instanceof Tt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var n=R.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&R.each(r,function(s,a){this[s]=a},{}),exportFilter:e[3],get:"get"+n,set:"set"+n}},{});new function(){var e;function t(x,c,y){var k=new R,A=x.getTranslation();if(c){var S;x.isInvertible()?(x=x._shiftless(),S=x._inverseTransform(A),A=null):S=new D,k[y?"cx":"x"]=S.x,k[y?"cy":"y"]=S.y}if(!x.isIdentity()){var E=x.decompose();if(E){var T=[],O=E.rotation,V=E.scaling,L=E.skewing;A&&!A.isZero()&&T.push("translate("+e.point(A)+")"),O&&T.push("rotate("+e.number(O)+")"),(!Me.isZero(V.x-1)||!Me.isZero(V.y-1))&&T.push("scale("+e.point(V)+")"),L.x&&T.push("skewX("+e.number(L.x)+")"),L.y&&T.push("skewY("+e.number(L.y)+")"),k.transform=T.join(" ")}else k.transform="matrix("+x.getValues().join(",")+")"}return k}function n(x,c){for(var y=t(x._matrix),k=x._children,A=Ke.create("g",y,e),S=0,E=k.length;S<E;S++){var T=k[S],O=w(T,c);if(O)if(T.isClipMask()){var V=Ke.create("clipPath");V.appendChild(O),C(T,V,"clip"),Ke.set(A,{"clip-path":"url(#"+V.id+")"})}else A.appendChild(O)}return A}function r(x,c){var y=t(x._matrix,!0),k=x.getSize(),A=x.getImage();return y.x-=k.width/2,y.y-=k.height/2,y.width=k.width,y.height=k.height,y.href=c.embedImages==!1&&A&&A.src||x.toDataURL(),Ke.create("image",y,e)}function s(x,c){var y=c.matchShapes;if(y){var k=x.toShape(!1);if(k)return a(k)}var A=x._segments,S=A.length,E,T=t(x._matrix);if(y&&S>=2&&!x.hasHandles())if(S>2){E=x._closed?"polygon":"polyline";for(var O=[],V=0;V<S;V++)O.push(e.point(A[V]._point));T.points=O.join(" ")}else{E="line";var L=A[0]._point,z=A[1]._point;T.set({x1:L.x,y1:L.y,x2:z.x,y2:z.y})}else E="path",T.d=x.getPathData(null,c.precision);return Ke.create(E,T,e)}function a(x){var c=x._type,y=x._radius,k=t(x._matrix,!0,c!=="rectangle");if(c==="rectangle"){c="rect";var A=x._size,S=A.width,E=A.height;k.x-=S/2,k.y-=E/2,k.width=S,k.height=E,y.isZero()&&(y=null)}return y&&(c==="circle"?k.r=y:(k.rx=y.width,k.ry=y.height)),Ke.create(c,k,e)}function h(x,c){var y=t(x._matrix),k=x.getPathData(null,c.precision);return k&&(y.d=k),Ke.create("path",y,e)}function o(x,c){var y=t(x._matrix,!0),k=x._definition,A=d(k,"symbol"),S=k._item,E=S.getStrokeBounds();return A||(A=Ke.create("symbol",{viewBox:e.rectangle(E)}),A.appendChild(w(S,c)),C(k,A,"symbol")),y.href="#"+A.id,y.x+=E.x,y.y+=E.y,y.width=E.width,y.height=E.height,y.overflow="visible",Ke.create("use",y,e)}function l(x){var c=d(x,"color");if(!c){var y=x.getGradient(),k=y._radial,A=x.getOrigin(),S=x.getDestination(),E;if(k){E={cx:A.x,cy:A.y,r:A.getDistance(S)};var T=x.getHighlight();T&&(E.fx=T.x,E.fy=T.y)}else E={x1:A.x,y1:A.y,x2:S.x,y2:S.y};E.gradientUnits="userSpaceOnUse",c=Ke.create((k?"radial":"linear")+"Gradient",E,e);for(var O=y._stops,V=0,L=O.length;V<L;V++){var z=O[V],B=z._color,q=B.getAlpha(),U=z._offset;E={offset:U??V/(L-1)},B&&(E["stop-color"]=B.toCSS(!0)),q<1&&(E["stop-opacity"]=q),c.appendChild(Ke.create("stop",E,e))}C(x,c,"color")}return"url(#"+c.id+")"}function f(x){var c=Ke.create("text",t(x._matrix,!0),e);return c.textContent=x._content,c}var g={Group:n,Layer:n,Raster:r,Path:s,Shape:a,CompoundPath:h,SymbolItem:o,PointText:f};function v(x,c,y){var k={},A=!y&&x.getParent(),S=[];return x._name!=null&&(k.id=x._name),R.each(vi,function(E){var T=E.get,O=E.type,V=x[T]();if(E.exportFilter?E.exportFilter(x,V):!A||!R.equals(A[T](),V)){if(O==="color"&&V!=null){var L=V.getAlpha();L<1&&(k[E.attribute+"-opacity"]=L)}O==="style"?S.push(E.attribute+": "+V):k[E.attribute]=V==null?"none":O==="color"?V.gradient?l(V):V.toCSS(!0):O==="array"?V.join(","):O==="lookup"?E.toSVG[V]:V}}),S.length&&(k.style=S.join(";")),k.opacity===1&&delete k.opacity,x._visible||(k.visibility="hidden"),Ke.set(c,k,e)}var p;function d(x,c){return p||(p={ids:{},svgs:{}}),x&&p.svgs[c+"-"+(x._id||x.__id||(x.__id=xt.get("svg")))]}function C(x,c,y){p||d();var k=p.ids[y]=(p.ids[y]||0)+1;c.id=y+"-"+k,p.svgs[y+"-"+(x._id||x.__id)]=c}function b(x,c){var y=x,k=null;if(p){y=x.nodeName.toLowerCase()==="svg"&&x;for(var A in p.svgs)k||(y||(y=Ke.create("svg"),y.appendChild(x)),k=y.insertBefore(Ke.create("defs"),y.firstChild)),k.appendChild(p.svgs[A]);p=null}return c.asString?new ot.XMLSerializer().serializeToString(y):y}function w(x,c,y){var k=g[x._class],A=k&&k(x,c);if(A){var S=c.onExport;S&&(A=S(x,A,c)||A);var E=JSON.stringify(x._data);E&&E!=="{}"&&E!=="null"&&A.setAttribute("data-paper-data",E)}return A&&v(x,A,y)}function _(x){return x||(x={}),e=new at(x.precision),x}P.inject({exportSVG:function(x){return x=_(x),b(w(this,x,!0),x)}}),ge.inject({exportSVG:function(x){x=_(x);var c=this._children,y=this.getView(),k=R.pick(x.bounds,"view"),A=x.matrix||k==="view"&&y._matrix,S=A&&oe.read([A]),E=k==="view"?new Z([0,0],y.getViewSize()):k==="content"?P._getBounds(c,S,{stroke:!0}).rect:Z.read([k],0,{readNull:!0}),T={version:"1.1",xmlns:Ke.svg,"xmlns:xlink":Ke.xlink};E&&(T.width=E.width,T.height=E.height,(E.x||E.x===0||E.y||E.y===0)&&(T.viewBox=e.rectangle(E)));var O=Ke.create("svg",T,e),V=O;S&&!S.isIdentity()&&(V=O.appendChild(Ke.create("g",t(S),e)));for(var L=0,z=c.length;L<z;L++)V.appendChild(w(c[L],x,!0));return b(O,x)}})},new function(){var e={},t;function n(c,y,k,A,S,E){var T=Ke.get(c,y)||E,O=T==null?A?null:k?"":0:k?T:parseFloat(T);return/%\s*$/.test(T)?O/100*(S?1:t[/x|^width/.test(y)?"width":"height"]):O}function r(c,y,k,A,S,E,T){return y=n(c,y||"x",!1,A,S,E),k=n(c,k||"y",!1,A,S,T),A&&(y==null||k==null)?null:new D(y,k)}function s(c,y,k,A,S){return y=n(c,y||"width",!1,A,S),k=n(c,k||"height",!1,A,S),A&&(y==null||k==null)?null:new $(y,k)}function a(c,y,k){return c==="none"?null:y==="number"?parseFloat(c):y==="array"?c?c.split(/[\s,]+/g).map(parseFloat):[]:y==="color"?w(c)||c:y==="lookup"?k[c]:c}function h(c,y,k,A){var S=c.childNodes,E=y==="clippath",T=y==="defs",O=new ie,V=O._project,L=V._currentStyle,z=[];if(!E&&!T&&(O=b(O,c,A),V._currentStyle=O._style.clone()),A)for(var B=c.querySelectorAll("defs"),q=0,U=B.length;q<U;q++)_(B[q],k,!1);for(var q=0,U=S.length;q<U;q++){var W=S[q],J;W.nodeType===1&&!/^defs$/i.test(W.nodeName)&&(J=_(W,k,!1))&&!(J instanceof tt)&&z.push(J)}return O.addChildren(z),E&&(O=b(O.reduce(),c,A)),V._currentStyle=L,(E||T)&&(O.remove(),O=null),O}function o(c,y){for(var k=c.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),A=[],S=0,E=k.length;S<E;S+=2)A.push(new D(parseFloat(k[S]),parseFloat(k[S+1])));var T=new Ee(A);return y==="polygon"&&T.closePath(),T}function l(c){return Nt.create(c.getAttribute("d"))}function f(c,y){var k=(n(c,"href",!0)||"").substring(1),A=y==="radialgradient",S;if(k)S=e[k].getGradient(),S._radial^A&&(S=S.clone(),S._radial=A);else{for(var E=c.childNodes,T=[],O=0,V=E.length;O<V;O++){var L=E[O];L.nodeType===1&&T.push(b(new di,L))}S=new Gt(T,A)}var z,B,q,U=n(c,"gradientUnits",!0)!=="userSpaceOnUse";A?(z=r(c,"cx","cy",!1,U,"50%","50%"),B=z.add(n(c,"r",!1,!1,U,"50%"),0),q=r(c,"fx","fy",!0,U)):(z=r(c,"x1","y1",!1,U,"0%","0%"),B=r(c,"x2","y2",!1,U,"100%","0%"));var W=b(new Ze(S,z,B,q),c);return W._scaleToBounds=U,null}var g={"#document":function(c,y,k,A){for(var S=c.childNodes,E=0,T=S.length;E<T;E++){var O=S[E];if(O.nodeType===1)return _(O,k,A)}},g:h,svg:h,clippath:h,polygon:o,polyline:o,path:l,lineargradient:f,radialgradient:f,image:function(c){var y=new Vt(n(c,"href",!0));return y.on("load",function(){var k=s(c);this.setSize(k);var A=r(c).add(k.divide(2));this._matrix.append(new oe().translate(A))}),y},symbol:function(c,y,k,A){return new tt(h(c,y,k,A),!0)},defs:h,use:function(c){var y=(n(c,"href",!0)||"").substring(1),k=e[y],A=r(c);return k?k instanceof tt?k.place(A):k.clone().translate(A):null},circle:function(c){return new Fe.Circle(r(c,"cx","cy"),n(c,"r"))},ellipse:function(c){return new Fe.Ellipse({center:r(c,"cx","cy"),radius:s(c,"rx","ry")})},rect:function(c){return new Fe.Rectangle(new Z(r(c),s(c)),s(c,"rx","ry"))},line:function(c){return new Ee.Line(r(c,"x1","y1"),r(c,"x2","y2"))},text:function(c){var y=new ci(r(c).add(r(c,"dx","dy")));return y.setContent(c.textContent.trim()||""),y},switch:h};function v(c,y,k,A){if(c.transform){for(var S=(A.getAttribute(k)||"").split(/\)\s*/g),E=new oe,T=0,O=S.length;T<O;T++){var V=S[T];if(!V)break;for(var L=V.split(/\(\s*/),z=L[0],B=L[1].split(/[\s,]+/g),q=0,U=B.length;q<U;q++)B[q]=parseFloat(B[q]);switch(z){case"matrix":E.append(new oe(B[0],B[1],B[2],B[3],B[4],B[5]));break;case"rotate":E.rotate(B[0],B[1]||0,B[2]||0);break;case"translate":E.translate(B[0],B[1]||0);break;case"scale":E.scale(B);break;case"skewX":E.skew(B[0],0);break;case"skewY":E.skew(0,B[0]);break}}c.transform(E)}}function p(c,y,k){var A=k==="fill-opacity"?"getFillColor":"getStrokeColor",S=c[A]&&c[A]();S&&S.setAlpha(parseFloat(y))}var d=R.set(R.each(vi,function(c){this[c.attribute]=function(y,k){if(y[c.set]&&(y[c.set](a(k,c.type,c.fromSVG)),c.type==="color")){var A=y[c.get]();if(A&&A._scaleToBounds){var S=y.getBounds();A.transform(new oe().translate(S.getPoint()).scale(S.getSize()))}}}},{}),{id:function(c,y){e[y]=c,c.setName&&c.setName(y)},"clip-path":function(c,y){var k=w(y);if(k)if(k=k.clone(),k.setClipMask(!0),c instanceof ie)c.insertChild(0,k);else return new ie(k,c)},gradientTransform:v,transform:v,"fill-opacity":p,"stroke-opacity":p,visibility:function(c,y){c.setVisible&&c.setVisible(y==="visible")},display:function(c,y){c.setVisible&&c.setVisible(y!==null)},"stop-color":function(c,y){c.setColor&&c.setColor(y)},"stop-opacity":function(c,y){c._color&&c._color.setAlpha(parseFloat(y))},offset:function(c,y){if(c.setOffset){var k=y.match(/(.*)%$/);c.setOffset(k?k[1]/100:parseFloat(y))}},viewBox:function(c,y,k,A,S){var E=new Z(a(y,"array")),T=s(A,null,null,!0),O,V;if(c instanceof ie){var L=T?T.divide(E.getSize()):1,V=new oe().scale(L).translate(E.getPoint().negate());O=c}else c instanceof tt&&(T&&E.setSize(T),O=c._item);if(O){if(C(A,"overflow",S)!=="visible"){var z=new Fe.Rectangle(E);z.setClipMask(!0),O.addChild(z)}V&&O.transform(V)}}});function C(c,y,k){var A=c.attributes[y],S=A&&A.value;if(!S&&c.style){var E=R.camelize(y);S=c.style[E],!S&&k.node[E]!==k.parent[E]&&(S=k.node[E])}return S?S==="none"?null:S:X}function b(c,y,k){var A=y.parentNode,S={node:He.getStyles(y)||{},parent:!k&&!/^defs$/i.test(A.tagName)&&He.getStyles(A)||{}};return R.each(d,function(E,T){var O=C(y,T,S);c=O!==X&&E(c,O,T,y,S)||c}),c}function w(c){var y=c&&c.match(/\((?:["'#]*)([^"')]+)/),k=y&&y[1],A=k&&e[Re?k.replace(Re.location.href.split("#")[0]+"#",""):k];return A&&A._scaleToBounds&&(A=A.clone(),A._scaleToBounds=!0),A}function _(c,y,k){var A=c.nodeName.toLowerCase(),S=A!=="#document",E=Le.body,T,O,V;k&&S&&(t=Pe.getView().getSize(),t=s(c,null,null,!0)||t,T=Ke.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),O=c.parentNode,V=c.nextSibling,T.appendChild(c),E.appendChild(T));var L=Pe.settings,z=L.applyMatrix,B=L.insertItems;L.applyMatrix=!1,L.insertItems=!1;var q=g[A],U=q&&q(c,A,y,k)||null;if(L.insertItems=B,L.applyMatrix=z,U){S&&!(U instanceof ie)&&(U=b(U,c,k));var W=y.onImport,J=S&&c.getAttribute("data-paper-data");W&&(U=W(c,U,y)||U),y.expandShapes&&U instanceof Fe&&(U.remove(),U=U.toPath()),J&&(U._data=JSON.parse(J))}return T&&(E.removeChild(T),O&&(V?O.insertBefore(c,V):O.appendChild(c))),k&&(e={},U&&R.pick(y.applyMatrix,z)&&U.matrix.apply(!0,!0)),U}function x(c,y,k){if(!c)return null;y=typeof y=="function"?{onLoad:y}:y||{};var A=Pe,S=null;function E(L){try{var z=typeof L=="object"?L:new ot.DOMParser().parseFromString(L.trim(),"image/svg+xml");if(!z.nodeName)throw z=null,new Error("Unsupported SVG source: "+c);Pe=A,S=_(z,y,!0),(!y||y.insert!==!1)&&k._insertItem(X,S);var B=y.onLoad;B&&B(S,L)}catch(q){T(q)}}function T(L,z){var B=y.onError;if(B)B(L,z);else throw new Error(L)}if(typeof c=="string"&&!/^[\s\S]*</.test(c)){var O=Le.getElementById(c);O?E(O):Kt.request({url:c,async:!0,onLoad:E,onError:T})}else if(typeof File<"u"&&c instanceof File){var V=new FileReader;return V.onload=function(){E(V.result)},V.onerror=function(){T(V.error)},V.readAsText(c)}else E(c);return S}P.inject({importSVG:function(c,y){return x(c,y,this)}}),ge.inject({importSVG:function(c,y){return this.activate(),x(c,y,this)}})},R.exports.PaperScript=(function(){var e=this,t=e.acorn;if(!t&&typeof ar<"u")try{t=hr()}catch{}if(!t){var n,r;t=n=r={},function(b,w){if(typeof n=="object"&&typeof r=="object")return w(n);if(typeof X=="function"&&X.amd)return X(["exports"],w);w(b.acorn||(b.acorn={}))}(this,function(b){b.version="0.5.0";var w,_,x,c;b.parse=function(M,F){return _=String(M),x=_.length,k(F),nn(),Bn(w.program)};var y=b.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function k(M){w=M||{};for(var F in y)Object.prototype.hasOwnProperty.call(w,F)||(w[F]=y[F]);c=w.sourceFile||null}var A=b.getLineInfo=function(M,F){for(var j=1,Y=0;;){ui.lastIndex=Y;var ye=ui.exec(M);if(ye&&ye.index<F)++j,Y=ye.index+ye[0].length;else break}return{line:j,column:F-Y}};b.tokenize=function(M,F){_=String(M),x=_.length,k(F),nn();var j={};function Y(ye){return J=T,ti(ye),j.start=E,j.end=T,j.startLoc=O,j.endLoc=V,j.type=L,j.value=z,j}return Y.jumpTo=function(ye,Ce){if(S=ye,w.locations){q=1,U=ui.lastIndex=0;for(var ke;(ke=ui.exec(_))&&ke.index<ye;)++q,U=ke.index+ke[0].length}B=Ce,oi()},Y};var S,E,T,O,V,L,z,B,q,U,W,J,ee,ne,le,K;function Q(M,F){var j=A(_,M);F+=" ("+j.line+":"+j.column+")";var Y=new SyntaxError(F);throw Y.pos=M,Y.loc=j,Y.raisedAt=S,Y}var se=[],ce={type:"num"},de={type:"regexp"},me={type:"string"},_e={type:"name"},we={type:"eof"},Se={keyword:"break"},be={keyword:"case",beforeExpr:!0},it={keyword:"catch"},ae={keyword:"continue"},De={keyword:"debugger"},Xe={keyword:"default"},Ve={keyword:"do",isLoop:!0},Je={keyword:"else",beforeExpr:!0},ct={keyword:"finally"},nt={keyword:"for",isLoop:!0},vt={keyword:"function"},ht={keyword:"if"},Qe={keyword:"return",beforeExpr:!0},Ct={keyword:"switch"},dt={keyword:"throw",beforeExpr:!0},mt={keyword:"try"},Lt={keyword:"var"},St={keyword:"while",isLoop:!0},si={keyword:"with"},Xt={keyword:"new",beforeExpr:!0},mi={keyword:"this"},xi={keyword:"null",atomValue:null},bi={keyword:"true",atomValue:!0},Qt={keyword:"false",atomValue:!1},Te={keyword:"in",binop:7,beforeExpr:!0},yi={break:Se,case:be,catch:it,continue:ae,debugger:De,default:Xe,do:Ve,else:Je,finally:ct,for:nt,function:vt,if:ht,return:Qe,switch:Ct,throw:dt,try:mt,var:Lt,while:St,with:si,null:xi,true:bi,false:Qt,new:Xt,in:Te,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:mi,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Yt={type:"[",beforeExpr:!0},Jt={type:"]"},Ot={type:"{",beforeExpr:!0},Mt={type:"}"},Pt={type:"(",beforeExpr:!0},kt={type:")"},i={type:",",beforeExpr:!0},u={type:";",beforeExpr:!0},m={type:":",beforeExpr:!0},I={type:"."},N={type:"?",beforeExpr:!0},H={binop:10,beforeExpr:!0},G={isAssign:!0,beforeExpr:!0},te={isAssign:!0,beforeExpr:!0},he={postfix:!0,prefix:!0,isUpdate:!0},Ie={prefix:!0,beforeExpr:!0},Ne={binop:1,beforeExpr:!0},et={binop:2,beforeExpr:!0},Rt={binop:3,beforeExpr:!0},$t={binop:4,beforeExpr:!0},Ft={binop:5,beforeExpr:!0},ai={binop:6,beforeExpr:!0},Dt={binop:7,beforeExpr:!0},qt={binop:8,beforeExpr:!0},mn={binop:9,prefix:!0,beforeExpr:!0},xn={binop:10,beforeExpr:!0};b.tokTypes={bracketL:Yt,bracketR:Jt,braceL:Ot,braceR:Mt,parenL:Pt,parenR:kt,comma:i,semi:u,colon:m,dot:I,question:N,slash:H,eq:G,name:_e,eof:we,num:ce,regexp:de,string:me};for(var Yi in yi)b.tokTypes["_"+Yi]=yi[Yi];function wi(M){M=M.split(" ");var F="",j=[];e:for(var Y=0;Y<M.length;++Y){for(var ye=0;ye<j.length;++ye)if(j[ye][0].length==M[Y].length){j[ye].push(M[Y]);continue e}j.push([M[Y]])}function Ce(Be){if(Be.length==1)return F+="return str === "+JSON.stringify(Be[0])+";";F+="switch(str){";for(var Et=0;Et<Be.length;++Et)F+="case "+JSON.stringify(Be[Et])+":";F+="return true}return false;"}if(j.length>3){j.sort(function(Be,Et){return Et.length-Be.length}),F+="switch(str.length){";for(var Y=0;Y<j.length;++Y){var ke=j[Y];F+="case "+ke[0].length+":",Ce(ke)}F+="}"}else Ce(M);return new Function("str",F)}var bn=wi("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),yn=wi("class enum extends super const export import"),Ji=wi("implements interface let package private protected public static yield"),Li=wi("eval arguments"),wn=wi("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Cn=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,$i="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Sn="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",en=new RegExp("["+$i+"]"),kn=new RegExp("["+$i+Sn+"]"),Ni=/[\n\r\u2028\u2029]/,ui=/\r\n|[\n\r\u2028\u2029]/g,Oi=b.isIdentifierStart=function(M){return M<65?M===36:M<91?!0:M<97?M===95:M<123?!0:M>=170&&en.test(String.fromCharCode(M))},tn=b.isIdentifierChar=function(M){return M<48?M===36:M<58?!0:M<65?!1:M<91?!0:M<97?M===95:M<123?!0:M>=170&&kn.test(String.fromCharCode(M))};function ei(){this.line=q,this.column=S-U}function nn(){q=1,S=U=0,B=!0,oi()}function lt(M,F){T=S,w.locations&&(V=new ei),L=M,oi(),z=F,B=M.beforeExpr}function In(){var M=w.onComment&&w.locations&&new ei,F=S,j=_.indexOf("*/",S+=2);if(j===-1&&Q(S-2,"Unterminated comment"),S=j+2,w.locations){ui.lastIndex=F;for(var Y;(Y=ui.exec(_))&&Y.index<S;)++q,U=Y.index+Y[0].length}w.onComment&&w.onComment(!0,_.slice(F+2,j),F,S,M,w.locations&&new ei)}function Fi(){for(var M=S,F=w.onComment&&w.locations&&new ei,j=_.charCodeAt(S+=2);S<x&&j!==10&&j!==13&&j!==8232&&j!==8233;)++S,j=_.charCodeAt(S);w.onComment&&w.onComment(!1,_.slice(M+2,S),M,S,F,w.locations&&new ei)}function oi(){for(;S<x;){var M=_.charCodeAt(S);if(M===32)++S;else if(M===13){++S;var F=_.charCodeAt(S);F===10&&++S,w.locations&&(++q,U=S)}else if(M===10||M===8232||M===8233)++S,w.locations&&(++q,U=S);else if(M>8&&M<14)++S;else if(M===47){var F=_.charCodeAt(S+1);if(F===42)In();else if(F===47)Fi();else break}else if(M===160)++S;else if(M>=5760&&Cn.test(String.fromCharCode(M)))++S;else break}}function Pn(){var M=_.charCodeAt(S+1);return M>=48&&M<=57?sn(!0):(++S,lt(I))}function An(){var M=_.charCodeAt(S+1);return B?(++S,rn()):M===61?ft(te,2):ft(H,1)}function En(){var M=_.charCodeAt(S+1);return M===61?ft(te,2):ft(xn,1)}function Tn(M){var F=_.charCodeAt(S+1);return F===M?ft(M===124?Ne:et,2):F===61?ft(te,2):ft(M===124?Rt:Ft,1)}function Ln(){var M=_.charCodeAt(S+1);return M===61?ft(te,2):ft($t,1)}function Nn(M){var F=_.charCodeAt(S+1);return F===M?F==45&&_.charCodeAt(S+2)==62&&Ni.test(_.slice(J,S))?(S+=3,Fi(),oi(),ti()):ft(he,2):F===61?ft(te,2):ft(mn,1)}function On(M){var F=_.charCodeAt(S+1),j=1;return F===M?(j=M===62&&_.charCodeAt(S+2)===62?3:2,_.charCodeAt(S+j)===61?ft(te,j+1):ft(qt,j)):F==33&&M==60&&_.charCodeAt(S+2)==45&&_.charCodeAt(S+3)==45?(S+=4,Fi(),oi(),ti()):(F===61&&(j=_.charCodeAt(S+2)===61?3:2),ft(Dt,j))}function Mn(M){var F=_.charCodeAt(S+1);return F===61?ft(ai,_.charCodeAt(S+2)===61?3:2):ft(M===61?G:Ie,1)}function Rn(M){switch(M){case 46:return Pn();case 40:return++S,lt(Pt);case 41:return++S,lt(kt);case 59:return++S,lt(u);case 44:return++S,lt(i);case 91:return++S,lt(Yt);case 93:return++S,lt(Jt);case 123:return++S,lt(Ot);case 125:return++S,lt(Mt);case 58:return++S,lt(m);case 63:return++S,lt(N);case 48:var F=_.charCodeAt(S+1);if(F===120||F===88)return zn();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return sn(!1);case 34:case 39:return Vn(M);case 47:return An();case 37:case 42:return En();case 124:case 38:return Tn(M);case 94:return Ln();case 43:case 45:return Nn(M);case 60:case 62:return On(M);case 61:case 33:return Mn(M);case 126:return ft(Ie,1)}return!1}function ti(M){if(M?S=E+1:E=S,w.locations&&(O=new ei),M)return rn();if(S>=x)return lt(we);var F=_.charCodeAt(S);if(Oi(F)||F===92)return un();var j=Rn(F);if(j===!1){var Y=String.fromCharCode(F);if(Y==="\\"||en.test(Y))return un();Q(S,"Unexpected character '"+Y+"'")}return j}function ft(M,F){var j=_.slice(S,S+F);S+=F,lt(M,j)}function rn(){for(var ye="",M,F,j=S;;){S>=x&&Q(j,"Unterminated regular expression");var Y=_.charAt(S);if(Ni.test(Y)&&Q(j,"Unterminated regular expression"),M)M=!1;else{if(Y==="[")F=!0;else if(Y==="]"&&F)F=!1;else if(Y==="/"&&!F)break;M=Y==="\\"}++S}var ye=_.slice(j,S);++S;var Ce=an();Ce&&!/^[gmsiy]*$/.test(Ce)&&Q(j,"Invalid regexp flag");try{var ke=new RegExp(ye,Ce)}catch(Be){Be instanceof SyntaxError&&Q(j,Be.message),Q(Be)}return lt(de,ke)}function Ci(M,F){for(var j=S,Y=0,ye=0,Ce=F??1/0;ye<Ce;++ye){var ke=_.charCodeAt(S),Be;if(ke>=97?Be=ke-97+10:ke>=65?Be=ke-65+10:ke>=48&&ke<=57?Be=ke-48:Be=1/0,Be>=M)break;++S,Y=Y*M+Be}return S===j||F!=null&&S-j!==F?null:Y}function zn(){S+=2;var M=Ci(16);return M==null&&Q(E+2,"Expected hexadecimal number"),Oi(_.charCodeAt(S))&&Q(S,"Identifier directly after number"),lt(ce,M)}function sn(M){var F=S,j=!1,Y=_.charCodeAt(S)===48;!M&&Ci(10)===null&&Q(F,"Invalid number"),_.charCodeAt(S)===46&&(++S,Ci(10),j=!0);var ye=_.charCodeAt(S);(ye===69||ye===101)&&(ye=_.charCodeAt(++S),(ye===43||ye===45)&&++S,Ci(10)===null&&Q(F,"Invalid number"),j=!0),Oi(_.charCodeAt(S))&&Q(S,"Identifier directly after number");var Ce=_.slice(F,S),ke;return j?ke=parseFloat(Ce):!Y||Ce.length===1?ke=parseInt(Ce,10):/[89]/.test(Ce)||K?Q(F,"Invalid number"):ke=parseInt(Ce,8),lt(ce,ke)}function Vn(M){S++;for(var F="";;){S>=x&&Q(E,"Unterminated string constant");var j=_.charCodeAt(S);if(j===M)return++S,lt(me,F);if(j===92){j=_.charCodeAt(++S);var Y=/^[0-7]+/.exec(_.slice(S,S+3));for(Y&&(Y=Y[0]);Y&&parseInt(Y,8)>255;)Y=Y.slice(0,-1);if(Y==="0"&&(Y=null),++S,Y)K&&Q(S-2,"Octal literal in strict mode"),F+=String.fromCharCode(parseInt(Y,8)),S+=Y.length-1;else switch(j){case 110:F+=`
`;break;case 114:F+="\r";break;case 120:F+=String.fromCharCode(Mi(2));break;case 117:F+=String.fromCharCode(Mi(4));break;case 85:F+=String.fromCharCode(Mi(8));break;case 116:F+="	";break;case 98:F+="\b";break;case 118:F+="\v";break;case 102:F+="\f";break;case 48:F+="\0";break;case 13:_.charCodeAt(S)===10&&++S;case 10:w.locations&&(U=S,++q);break;default:F+=String.fromCharCode(j);break}}else(j===13||j===10||j===8232||j===8233)&&Q(E,"Unterminated string constant"),F+=String.fromCharCode(j),++S}}function Mi(M){var F=Ci(16,M);return F===null&&Q(E,"Bad character escape sequence"),F}var hi;function an(){hi=!1;for(var M,F=!0,j=S;;){var Y=_.charCodeAt(S);if(tn(Y))hi&&(M+=_.charAt(S)),++S;else if(Y===92){hi||(M=_.slice(j,S)),hi=!0,_.charCodeAt(++S)!=117&&Q(S,"Expecting Unicode escape sequence \\uXXXX"),++S;var ye=Mi(4),Ce=String.fromCharCode(ye);Ce||Q(S-1,"Invalid Unicode escape"),(F?Oi(ye):tn(ye))||Q(S-4,"Invalid Unicode escape"),M+=Ce}else break;F=!1}return hi?M:_.slice(j,S)}function un(){var M=an(),F=_e;return!hi&&wn(M)&&(F=yi[M]),lt(F,M)}function ze(){W=E,J=T,ee=V,ti()}function Di(M){if(K=M,S=E,w.locations)for(;S<U;)U=_.lastIndexOf(`
`,U-2)+1,--q;oi(),ti()}function on(){this.type=null,this.start=E,this.end=null}function hn(){this.start=O,this.end=null,c!==null&&(this.source=c)}function pt(){var M=new on;return w.locations&&(M.loc=new hn),w.directSourceFile&&(M.sourceFile=w.directSourceFile),w.ranges&&(M.range=[E,0]),M}function Ut(M){var F=new on;return F.start=M.start,w.locations&&(F.loc=new hn,F.loc.start=M.loc.start),w.ranges&&(F.range=[M.range[0],0]),F}function Oe(M,F){return M.type=F,M.end=J,w.locations&&(M.loc.end=ee),w.ranges&&(M.range[1]=J),M}function qi(M){return w.ecmaVersion>=5&&M.type==="ExpressionStatement"&&M.expression.type==="Literal"&&M.expression.value==="use strict"}function $e(M){if(L===M)return ze(),!0}function Ri(){return!w.strictSemicolons&&(L===we||L===Mt||Ni.test(_.slice(J,E)))}function ii(){!$e(u)&&!Ri()&&zt()}function rt(M){L===M?ze():zt()}function zt(){Q(E,"Unexpected token")}function zi(M){M.type!=="Identifier"&&M.type!=="MemberExpression"&&Q(M.start,"Assigning to rvalue"),K&&M.type==="Identifier"&&Li(M.name)&&Q(M.start,"Assigning to "+M.name+" in strict mode")}function Bn(M){W=J=S,w.locations&&(ee=new ei),ne=K=null,le=[],ti();var F=M||pt(),j=!0;for(M||(F.body=[]);L!==we;){var Y=At();F.body.push(Y),j&&qi(Y)&&Di(!0),j=!1}return Oe(F,"Program")}var Ui={kind:"loop"},Fn={kind:"switch"};function At(){(L===H||L===te&&z=="/=")&&ti(!0);var M=L,F=pt();switch(M){case Se:case ae:ze();var j=M===Se;$e(u)||Ri()?F.label=null:L!==_e?zt():(F.label=Ht(),ii());for(var Y=0;Y<le.length;++Y){var ye=le[Y];if((F.label==null||ye.name===F.label.name)&&(ye.kind!=null&&(j||ye.kind==="loop")||F.label&&j))break}return Y===le.length&&Q(F.start,"Unsyntactic "+M.keyword),Oe(F,j?"BreakStatement":"ContinueStatement");case De:return ze(),ii(),Oe(F,"DebuggerStatement");case Ve:return ze(),le.push(Ui),F.body=At(),le.pop(),rt(St),F.test=Si(),ii(),Oe(F,"DoWhileStatement");case nt:if(ze(),le.push(Ui),rt(Pt),L===u)return Hi(F,null);if(L===Lt){var Ce=pt();return ze(),fn(Ce,!0),Oe(Ce,"VariableDeclaration"),Ce.declarations.length===1&&$e(Te)?ln(F,Ce):Hi(F,Ce)}var Ce=gt(!1,!0);return $e(Te)?(zi(Ce),ln(F,Ce)):Hi(F,Ce);case vt:return ze(),Ki(F,!0);case ht:return ze(),F.test=Si(),F.consequent=At(),F.alternate=$e(Je)?At():null,Oe(F,"IfStatement");case Qe:return!ne&&!w.allowReturnOutsideFunction&&Q(E,"'return' outside of function"),ze(),$e(u)||Ri()?F.argument=null:(F.argument=gt(),ii()),Oe(F,"ReturnStatement");case Ct:ze(),F.discriminant=Si(),F.cases=[],rt(Ot),le.push(Fn);for(var ke,Be;L!=Mt;)if(L===be||L===Xe){var Et=L===be;ke&&Oe(ke,"SwitchCase"),F.cases.push(ke=pt()),ke.consequent=[],ze(),Et?ke.test=gt():(Be&&Q(W,"Multiple default clauses"),Be=!0,ke.test=null),rt(m)}else ke||zt(),ke.consequent.push(At());return ke&&Oe(ke,"SwitchCase"),ze(),le.pop(),Oe(F,"SwitchStatement");case dt:return ze(),Ni.test(_.slice(J,E))&&Q(J,"Illegal newline after throw"),F.argument=gt(),ii(),Oe(F,"ThrowStatement");case mt:if(ze(),F.block=ki(),F.handler=null,L===it){var ni=pt();ze(),rt(Pt),ni.param=Ht(),K&&Li(ni.param.name)&&Q(ni.param.start,"Binding "+ni.param.name+" in strict mode"),rt(kt),ni.guard=null,ni.body=ki(),F.handler=Oe(ni,"CatchClause")}return F.guardedHandlers=se,F.finalizer=$e(ct)?ki():null,!F.handler&&!F.finalizer&&Q(F.start,"Missing catch or finally clause"),Oe(F,"TryStatement");case Lt:return ze(),fn(F),ii(),Oe(F,"VariableDeclaration");case St:return ze(),F.test=Si(),le.push(Ui),F.body=At(),le.pop(),Oe(F,"WhileStatement");case si:return K&&Q(E,"'with' in strict mode"),ze(),F.object=Si(),F.body=At(),Oe(F,"WithStatement");case Ot:return ki();case u:return ze(),Oe(F,"EmptyStatement");default:var Qi=z,Vi=gt();if(M===_e&&Vi.type==="Identifier"&&$e(m)){for(var Y=0;Y<le.length;++Y)le[Y].name===Qi&&Q(Vi.start,"Label '"+Qi+"' is already declared");var Gn=L.isLoop?"loop":L===Ct?"switch":null;return le.push({name:Qi,kind:Gn}),F.body=At(),le.pop(),F.label=Vi,Oe(F,"LabeledStatement")}else return F.expression=Vi,ii(),Oe(F,"ExpressionStatement")}}function Si(){rt(Pt);var M=gt();return rt(kt),M}function ki(M){var F=pt(),j=!0,Y=!1,ye;for(F.body=[],rt(Ot);!$e(Mt);){var Ce=At();F.body.push(Ce),j&&M&&qi(Ce)&&(ye=Y,Di(Y=!0)),j=!1}return Y&&!ye&&Di(!1),Oe(F,"BlockStatement")}function Hi(M,F){return M.init=F,rt(u),M.test=L===u?null:gt(),rt(u),M.update=L===kt?null:gt(),rt(kt),M.body=At(),le.pop(),Oe(M,"ForStatement")}function ln(M,F){return M.left=F,M.right=gt(),rt(kt),M.body=At(),le.pop(),Oe(M,"ForInStatement")}function fn(M,F){for(M.declarations=[],M.kind="var";;){var j=pt();if(j.id=Ht(),K&&Li(j.id.name)&&Q(j.id.start,"Binding "+j.id.name+" in strict mode"),j.init=$e(G)?gt(!0,F):null,M.declarations.push(Oe(j,"VariableDeclarator")),!$e(i))break}return M}function gt(M,F){var j=Wi(F);if(!M&&L===i){var Y=Ut(j);for(Y.expressions=[j];$e(i);)Y.expressions.push(Wi(F));return Oe(Y,"SequenceExpression")}return j}function Wi(M){var F=Dn(M);if(L.isAssign){var j=Ut(F);return j.operator=z,j.left=F,ze(),j.right=Wi(M),zi(F),Oe(j,"AssignmentExpression")}return F}function Dn(M){var F=qn(M);if($e(N)){var j=Ut(F);return j.test=F,j.consequent=gt(!0),rt(m),j.alternate=gt(!0,M),Oe(j,"ConditionalExpression")}return F}function qn(M){return Gi(ji(),-1,M)}function Gi(M,F,j){var Y=L.binop;if(Y!=null&&(!j||L!==Te)&&Y>F){var ye=Ut(M);ye.left=M,ye.operator=z;var Ce=L;ze(),ye.right=Gi(ji(),Y,j);var ke=Oe(ye,Ce===Ne||Ce===et?"LogicalExpression":"BinaryExpression");return Gi(ke,F,j)}return M}function ji(){if(L.prefix){var M=pt(),F=L.isUpdate;return M.operator=z,M.prefix=!0,B=!0,ze(),M.argument=ji(),F?zi(M.argument):K&&M.operator==="delete"&&M.argument.type==="Identifier"&&Q(M.start,"Deleting local variable in strict mode"),Oe(M,F?"UpdateExpression":"UnaryExpression")}for(var j=Un();L.postfix&&!Ri();){var M=Ut(j);M.operator=z,M.prefix=!1,M.argument=j,zi(j),ze(),j=Oe(M,"UpdateExpression")}return j}function Un(){return Ii(Zi())}function Ii(M,F){if($e(I)){var j=Ut(M);return j.object=M,j.property=Ht(!0),j.computed=!1,Ii(Oe(j,"MemberExpression"),F)}else if($e(Yt)){var j=Ut(M);return j.object=M,j.property=gt(),j.computed=!0,rt(Jt),Ii(Oe(j,"MemberExpression"),F)}else if(!F&&$e(Pt)){var j=Ut(M);return j.callee=M,j.arguments=Xi(kt,!1),Ii(Oe(j,"CallExpression"),F)}else return M}function Zi(){switch(L){case mi:var Y=pt();return ze(),Oe(Y,"ThisExpression");case _e:return Ht();case ce:case me:case de:var Y=pt();return Y.value=z,Y.raw=_.slice(E,T),ze(),Oe(Y,"Literal");case xi:case bi:case Qt:var Y=pt();return Y.value=L.atomValue,Y.raw=L.keyword,ze(),Oe(Y,"Literal");case Pt:var M=O,F=E;ze();var j=gt();return j.start=F,j.end=T,w.locations&&(j.loc.start=M,j.loc.end=V),w.ranges&&(j.range=[F,T]),rt(kt),j;case Yt:var Y=pt();return ze(),Y.elements=Xi(Jt,!0,!0),Oe(Y,"ArrayExpression");case Ot:return Wn();case vt:var Y=pt();return ze(),Ki(Y,!1);case Xt:return Hn();default:zt()}}function Hn(){var M=pt();return ze(),M.callee=Ii(Zi(),!0),$e(Pt)?M.arguments=Xi(kt,!1):M.arguments=se,Oe(M,"NewExpression")}function Wn(){var M=pt(),F=!0,j=!1;for(M.properties=[],ze();!$e(Mt);){if(F)F=!1;else if(rt(i),w.allowTrailingCommas&&$e(Mt))break;var Y={key:cn()},ye=!1,Ce;if($e(m)?(Y.value=gt(!0),Ce=Y.kind="init"):w.ecmaVersion>=5&&Y.key.type==="Identifier"&&(Y.key.name==="get"||Y.key.name==="set")?(ye=j=!0,Ce=Y.kind=Y.key.name,Y.key=cn(),L!==Pt&&zt(),Y.value=Ki(pt(),!1)):zt(),Y.key.type==="Identifier"&&(K||j))for(var ke=0;ke<M.properties.length;++ke){var Be=M.properties[ke];if(Be.key.name===Y.key.name){var Et=Ce==Be.kind||ye&&Be.kind==="init"||Ce==="init"&&(Be.kind==="get"||Be.kind==="set");Et&&!K&&Ce==="init"&&Be.kind==="init"&&(Et=!1),Et&&Q(Y.key.start,"Redefinition of property")}}M.properties.push(Y)}return Oe(M,"ObjectExpression")}function cn(){return L===ce||L===me?Zi():Ht(!0)}function Ki(M,F){L===_e?M.id=Ht():F?zt():M.id=null,M.params=[];var j=!0;for(rt(Pt);!$e(kt);)j?j=!1:rt(i),M.params.push(Ht());var Y=ne,ye=le;if(ne=!0,le=[],M.body=ki(!0),ne=Y,le=ye,K||M.body.body.length&&qi(M.body.body[0]))for(var Ce=M.id?-1:0;Ce<M.params.length;++Ce){var ke=Ce<0?M.id:M.params[Ce];if((Ji(ke.name)||Li(ke.name))&&Q(ke.start,"Defining '"+ke.name+"' in strict mode"),Ce>=0)for(var Be=0;Be<Ce;++Be)ke.name===M.params[Be].name&&Q(ke.start,"Argument name clash in strict mode")}return Oe(M,F?"FunctionDeclaration":"FunctionExpression")}function Xi(M,F,j){for(var Y=[],ye=!0;!$e(M);){if(ye)ye=!1;else if(rt(i),F&&w.allowTrailingCommas&&$e(M))break;j&&L===i?Y.push(null):Y.push(gt(!0))}return Y}function Ht(M){var F=pt();return M&&w.forbidReserved=="everywhere"&&(M=!1),L===_e?(!M&&(w.forbidReserved&&(w.ecmaVersion===3?bn:yn)(z)||K&&Ji(z))&&_.slice(E,T).indexOf("\\")==-1&&Q(E,"The keyword '"+z+"' is reserved"),F.name=z):M&&L.keyword?F.name=L.keyword:zt(),B=!1,ze(),Oe(F,"Identifier")}}),t.version||(t=null)}function s(b,w){return(e.acorn||t).parse(b,w)}var a={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},h={"-":"__negate","+":"__self"},o=R.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(b){this["__"+b]="#"+b},{__self:function(){return this}});D.inject(o),$.inject(o),Ze.inject(o);function l(b,w,_){var x=a[w];if(b&&b[x]){var c=b[x](_);return w==="!="?!c:c}switch(w){case"+":return b+_;case"-":return b-_;case"*":return b*_;case"/":return b/_;case"%":return b%_;case"==":return b==_;case"!=":return b!=_}}function f(b,w){var _=h[b];if(w&&w[_])return w[_]();switch(b){case"+":return+w;case"-":return-w}}function g(b,w){if(!b)return"";w=w||{};var _=[];function x(K){for(var Q=0,se=_.length;Q<se;Q++){var ce=_[Q];if(ce[0]>=K)break;K+=ce[1]}return K}function c(K){return b.substring(x(K.range[0]),x(K.range[1]))}function y(K,Q){return b.substring(x(K.range[1]),x(Q.range[0]))}function k(K,Q){for(var se=x(K.range[0]),ce=x(K.range[1]),de=0,me=_.length-1;me>=0;me--)if(se>_[me][0]){de=me+1;break}_.splice(de,0,[se,Q.length-ce+se]),b=b.substring(0,se)+Q+b.substring(ce)}function A(K,Q){switch(K.type){case"UnaryExpression":if(K.operator in h&&K.argument.type!=="Literal"){var se=c(K.argument);k(K,'$__("'+K.operator+'", '+se+")")}break;case"BinaryExpression":if(K.operator in a&&K.left.type!=="Literal"){var ce=c(K.left),de=c(K.right),me=y(K.left,K.right),_e=K.operator;k(K,"__$__("+ce+","+me.replace(new RegExp("\\"+_e),'"'+_e+'"')+", "+de+")")}break;case"UpdateExpression":case"AssignmentExpression":var we=Q&&Q.type;if(!(we==="ForStatement"||we==="BinaryExpression"&&/^[=!<>]/.test(Q.operator)||we==="MemberExpression"&&Q.computed)){if(K.type==="UpdateExpression"){var se=c(K.argument),Se="__$__("+se+', "'+K.operator[0]+'", 1)',be=se+" = "+Se;K.prefix?be="("+be+")":(we==="AssignmentExpression"||we==="VariableDeclarator"||we==="BinaryExpression")&&(c(Q.left||Q.id)===se&&(be=Se),be=se+"; "+be),k(K,be)}else if(/^.=$/.test(K.operator)&&K.left.type!=="Literal"){var ce=c(K.left),de=c(K.right),Se=ce+" = __$__("+ce+', "'+K.operator[0]+'", '+de+")";k(K,/^\(.*\)$/.test(c(K))?"("+Se+")":Se)}}break}}function S(K){switch(K.type){case"ExportDefaultDeclaration":k({range:[K.start,K.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Q=K.declaration,se=K.specifiers;if(Q){var ce=Q.declarations;ce&&(ce.forEach(function(me){k(me,"module.exports."+c(me))}),k({range:[K.start,Q.start+Q.kind.length]},""))}else if(se){var de=se.map(function(me){var _e=c(me);return"module.exports."+_e+" = "+_e+"; "}).join("");de&&k(K,de)}break}}function E(K,Q,se){if(K){for(var ce in K)if(ce!=="range"&&ce!=="loc"){var de=K[ce];if(Array.isArray(de))for(var me=0,_e=de.length;me<_e;me++)E(de[me],K,se);else de&&typeof de=="object"&&E(de,K,se)}se.operatorOverloading!==!1&&A(K,Q),se.moduleExports!==!1&&S(K)}}function T(K){var Q="",se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(K=(Math.abs(K)<<1)+(K<0?1:0);K||!Q;){var ce=K&31;K>>=5,K&&(ce|=32),Q+=se[ce]}return Q}var O=w.url||"",V=w.sourceMaps,L=w.paperFeatures||{},z=w.source||b,B=w.offset||0,q=Pe.agent,U=q.versionNumber,W=!1,J=/\r\n|\n|\r/mg,ee;if(V&&(q.chrome&&U>=30||q.webkit&&U>=537.76||q.firefox&&U>=23||q.node)){if(q.node)B-=2;else if(Re&&O&&!Re.location.href.indexOf(O)){var ne=Le.getElementsByTagName("html")[0].innerHTML;B=ne.substr(0,ne.indexOf(b)+1).match(J).length+1}W=B>0&&!(q.chrome&&U>=36||q.safari&&U>=600||q.firefox&&U>=40||q.node);var le=["AA"+T(W?0:B)+"A"];le.length=(b.match(J)||[]).length+1+(W?B:0),ee={version:3,file:O,names:[],mappings:le.join(";AACA"),sourceRoot:"",sources:[O],sourcesContent:[z]}}return(L.operatorOverloading!==!1||L.moduleExports!==!1)&&E(s(b,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,L),ee&&(W&&(b=new Array(B+1).join(`
`)+b),/^(inline|both)$/.test(V)&&(b+=`
//# sourceMappingURL=data:application/json;base64,`+ot.btoa(unescape(encodeURIComponent(JSON.stringify(ee))))),b+=`
//# sourceURL=`+(O||"paperscript")),{url:O,source:z,code:b,map:ee}}function v(b,w,_){Pe=w;var x=w.getView(),c=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(b)&&!/\bnew\s+Tool\b/.test(b)?new gi:null,y=c?c._events:[],k=["onFrame","onResize"].concat(y),A=[],S=[],E,T=typeof b=="object"?b:g(b,_);b=T.code;function O(U,W){for(var J in U)(W||!/^_/.test(J))&&new RegExp("([\\b\\s\\W]|^)"+J.replace(/\$/g,"\\$")+"\\b").test(b)&&(A.push(J),S.push(U[J]))}O({__$__:l,$__:f,paper:w,tool:c},!0),O(w),b="var module = { exports: {} }; "+b;var B=R.each(k,function(U){new RegExp("\\s+"+U+"\\b").test(b)&&(A.push(U),this.push("module.exports."+U+" = "+U+";"))},[]).join(`
`);B&&(b+=`
`+B),b+=`
return module.exports;`;var V=Pe.agent;if(Le&&(V.chrome||V.firefox&&V.versionNumber<40)){var L=Le.createElement("script"),z=Le.head||Le.getElementsByTagName("head")[0];V.firefox&&(b=`
`+b),L.appendChild(Le.createTextNode("document.__paperscript__ = function("+A+") {"+b+`
}`)),z.appendChild(L),E=Le.__paperscript__,delete Le.__paperscript__,z.removeChild(L)}else E=Function(A,b);var B=E&&E.apply(w,S),q=B||{};return R.each(y,function(U){var W=q[U];W&&(c[U]=W)}),x&&(q.onResize&&x.setOnResize(q.onResize),x.emit("resize",{size:x.size,delta:new D}),q.onFrame&&x.setOnFrame(q.onFrame),x.requestUpdate()),B}function p(b){if(/^text\/(?:x-|)paperscript$/.test(b.type)&&Ue.getAttribute(b,"ignore")!=="true"){var w=Ue.getAttribute(b,"canvas"),_=Le.getElementById(w),x=b.src||b.getAttribute("data-src"),c=Ue.hasAttribute(b,"async"),y="data-paper-scope";if(!_)throw new Error('Unable to find canvas with id "'+w+'"');var k=Ue.get(_.getAttribute(y))||new Ue().setup(_);return _.setAttribute(y,k._id),x?Kt.request({url:x,async:c,mimeType:"text/plain",onLoad:function(A){v(A,k,x)}}):v(b.innerHTML,k,b.baseURI),b.setAttribute("data-paper-ignore","true"),k}}function d(){R.each(Le&&Le.getElementsByTagName("script"),p)}function C(b){return b?p(b):d()}return Re&&(Le.readyState==="complete"?setTimeout(d):We.add(Re,{load:d})),{compile:g,execute:v,load:C,parse:s,calculateBinary:l,calculateUnary:f}}).call(this);var Pe=new(Ue.inject(R.exports,{Base:R,Numerical:Me,Key:ri,DomEvent:We,DomElement:He,document:Le,window:Re,Symbol:tt,PlacedSymbol:Wt}));return Pe.agent.node&&dn(Pe),typeof X=="function"&&X.amd?X("paper",Pe):qe&&(qe.exports=Pe),Pe}).call(gn,typeof self=="object"?self:null)})(vn);var pe=vn.exports;const lr=qe=>{qe={...{zoom:!0,canvasHandle:"drag",itemHandle:"none",tooltips:"我是提示"},...qe};const X=li(new pe.PaperScope),Re=li(),Le=li(1),R=li(),je=li(),Ue=li("default"),st={x:0,y:0},bt=new WeakMap;Zn(()=>je.value,(fe,$)=>{$&&$[0].remove()});const at=fe=>{qe.zoom&&(fe.preventDefault(),X.value.view.zoom=X.value.view.zoom*(1+fe.wheelDelta/1e3),Le.value=X.value.view.zoom)},Me=()=>{X.value.view.onMouseDown=fe=>{var Z,xe;const $=fe.target,ue=Qn(X.value.view);if(qe.canvasHandle==="drag"){const oe=ge=>{const P=ge.x-st.x,ie=ge.y-st.y;X.value.view.translate({x:P/Le.value,y:ie/Le.value}),st.x=ge.x,st.y=ge.y},Ae=()=>{var ge,P;(ge=Re.value)==null||ge.removeEventListener("mousemove",oe),(P=Re.value)==null||P.removeEventListener("mouseup",Ae)};$===ue&&(st.x=fe.event.pageX,st.y=fe.event.pageY,Le.value=X.value.view.zoom,(Z=Re.value)==null||Z.addEventListener("mousemove",oe),(xe=Re.value)==null||xe.addEventListener("mouseup",Ae))}qe.canvasHandle==="select"&&($===ue&&(R.value=new pe.Path.Rectangle(fe.point,new pe.Size(1,1)),R.value.strokeWidth=1,R.value.strokeColor=new pe.Color(0,0,0,.5),R.value.style.dashArray=[4,4]),je.value&&$===ue&&je.value[0].remove())},X.value.view.onMouseDrag=fe=>{R.value&&(R.value.bounds.width+=fe.delta.x,R.value.bounds.height+=fe.delta.y)},X.value.view.onMouseUp=fe=>{var $;if(R.value){const ue=X.value.project.getItems({match:xe=>{const{topLeft:oe,bottomRight:Ae}=xe.bounds;if(oe.x>R.value.bounds.topLeft.x&&oe.y>R.value.bounds.topLeft.y&&Ae.x<R.value.bounds.bottomRight.x&&Ae.y<R.value.bounds.bottomRight.y)return xe}}),Z=new pe.Group([...ue]);je.value=xt(Z),($=X.value.project)==null||$.activeLayer.addChild(je.value[1]),R.value.remove(),R.value=void 0,st.x=0,st.y=0}}},xt=fe=>{var P;const $=new pe.Path.Rectangle({center:fe.bounds.center,size:fe.bounds.size,strokeColor:new pe.Color("blue"),strokeWidth:1}),ue=new pe.Path.Rectangle({center:fe.bounds.topLeft,size:[10,10],fillColor:new pe.Color("#fff"),strokeColor:new pe.Color("blue"),strokeWidth:1,name:"topLeftRect"}),Z=new pe.Path.Rectangle({center:fe.bounds.topRight,size:[10,10],fillColor:new pe.Color("#fff"),strokeColor:new pe.Color("blue"),strokeWidth:1,name:"topRightRect"}),xe=new pe.Path.Rectangle({center:fe.bounds.bottomLeft,size:[10,10],fillColor:new pe.Color("#fff"),strokeColor:new pe.Color("blue"),strokeWidth:1,name:"bottomLeftRect"}),oe=new pe.Path.Rectangle({center:fe.bounds.bottomRight,size:[10,10],fillColor:new pe.Color("#fff"),strokeColor:new pe.Color("blue"),strokeWidth:1,name:"bottomRightRect"}),Ae=new pe.Group([$,ue,Z,xe,oe]),ge=new pe.Group([fe,Ae]);return(P=qe.itemHandle)!=null&&P.includes("drag")&&(ge.onMouseDrag=ie=>{ie.stopPropagation(),ge.position.set(fe.position.x+ie.delta.x,fe.position.y+ie.delta.y)}),ue.onMouseDrag=ie=>{ie.stopPropagation(),!(fe.bounds.size.height-ie.delta.y<=20||fe.bounds.size.width-ie.delta.x<=20)&&(fe.bounds.center.y+=ie.delta.y,fe.bounds.center.x+=ie.delta.x,fe.bounds.size.height-=ie.delta.y,fe.bounds.size.width-=ie.delta.x,$.bounds.center.y+=ie.delta.y,$.bounds.center.x+=ie.delta.x,$.bounds.size.height-=ie.delta.y,$.bounds.size.width-=ie.delta.x,ue.bounds.x+=ie.delta.x,ue.bounds.y+=ie.delta.y,Z.bounds.y+=ie.delta.y,xe.bounds.x+=ie.delta.x)},Z.onMouseDrag=ie=>{ie.stopPropagation(),!(fe.bounds.size.height-ie.delta.y<=20||fe.bounds.size.width+ie.delta.x<=20)&&(fe.bounds.center.y+=ie.delta.y,fe.bounds.size.height-=ie.delta.y,fe.bounds.size.width+=ie.delta.x,$.bounds.center.y+=ie.delta.y,$.bounds.size.height-=ie.delta.y,$.bounds.size.width+=ie.delta.x,Z.bounds.x+=ie.delta.x,Z.bounds.y+=ie.delta.y,ue.bounds.y+=ie.delta.y,oe.bounds.x+=ie.delta.x)},xe.onMouseDrag=ie=>{ie.stopPropagation(),!(fe.bounds.size.height+ie.delta.y<=20||fe.bounds.size.width-ie.delta.x<=20)&&(fe.bounds.center.x+=ie.delta.x,fe.bounds.size.height+=ie.delta.y,fe.bounds.size.width-=ie.delta.x,$.bounds.center.x+=ie.delta.x,$.bounds.size.height+=ie.delta.y,$.bounds.size.width-=ie.delta.x,xe.bounds.x+=ie.delta.x,xe.bounds.y+=ie.delta.y,ue.bounds.x+=ie.delta.x,oe.bounds.y+=ie.delta.y)},oe.onMouseDrag=ie=>{ie.stopPropagation(),!(fe.bounds.size.height+ie.delta.y<=20||fe.bounds.size.width+ie.delta.x<=20)&&(fe.bounds.size.height+=ie.delta.y,fe.bounds.size.width+=ie.delta.x,$.bounds.size.height+=ie.delta.y,$.bounds.size.width+=ie.delta.x,oe.bounds.x+=ie.delta.x,oe.bounds.y+=ie.delta.y,Z.bounds.x+=ie.delta.x,xe.bounds.y+=ie.delta.y)},[ue,Z,xe,oe].forEach(ie=>{ie.onMouseLeave=_t=>{_t.stopPropagation(),Ue.value="default"},ie.onMouseEnter=_t=>{switch(_t.stopPropagation(),_t.target.name){case"topLeftRect":Ue.value="nw-resize";break;case"topRightRect":Ue.value="ne-resize";break;case"bottomLeftRect":Ue.value="sw-resize";break;case"bottomRightRect":Ue.value="se-resize";break}}}),[Ae,ge]},D=()=>{const fe=X.value.project.activeLayer.children;fe==null||fe.forEach($=>{$.onMouseDown=ue=>{var Z;(Z=qe.itemHandle)!=null&&Z.includes("select")?(bt.has(ue.target)?(je.value=bt.get(ue.target),je.value[0].remove(),bt.delete(ue.target),je.value=xt(ue.target)):je.value?je.value[1].getItems({match:oe=>{if(oe===ue.target)return oe}}).length||(je.value=xt(ue.target),bt.set(ue.target,je.value)):je.value=xt(ue.target),X.value.project.activeLayer.addChild(je.value[1])):(qe.itemHandle==="drag"||qe.itemHandle&&qe.itemHandle[0]==="drag")&&X.value.project.activeLayer.addChild(ue.target)},$.onMouseDrag=ue=>{(qe.itemHandle==="drag"||qe.itemHandle&&qe.itemHandle[0]==="drag")&&$.position.set($.position.x+ue.delta.x,$.position.y+ue.delta.y);let Z=document.querySelector(".tootips");Z?(Z.style.display="block",Z.style.left=ue.event.offsetX+10+"px",Z.style.top=ue.event.offsetY+10+"px"):(Z=document.createElement("div"),document.body.appendChild(Z),Z.innerHTML=typeof qe.tooltips=="string"?qe.tooltips:qe.tooltips(),Z.className="tootips",Z.style.position="absolute",Z.style.left=ue.event.offsetX+10+"px",Z.style.top=ue.event.offsetY+10+"px",Z.style.color="#999")},$.onMouseEnter=ue=>{Ue.value="pointer"},$.onMouseLeave=()=>{Ue.value="defatul";let ue=document.querySelector(".tootips");ue.style.display="none"},$.onMouseMove=ue=>{let Z=document.querySelector(".tootips");Z?(Z.style.display="block",Z.style.left=ue.event.offsetX+10+"px",Z.style.top=ue.event.offsetY+10+"px"):(Z=document.createElement("div"),document.body.appendChild(Z),Z.innerHTML=typeof qe.tooltips=="string"?qe.tooltips:qe.tooltips(),Z.className="tootips",Z.style.position="absolute",Z.style.left=ue.event.offsetX+10+"px",Z.style.top=ue.event.offsetY+10+"px",Z.style.color="#999")}})};return _n(()=>{var fe;X.value.setup(Re.value),(fe=Re.value)==null||fe.addEventListener("wheel",at),Kn(()=>{Me(),D()})}),Xn(()=>{var fe;X.value.project.clear(),(fe=Re.value)==null||fe.removeEventListener("wheel",at)}),{paperInstance:X,canvasEl:Re,zoom:Le,cursor:Ue,selectionGroup:je,addSelect:xt,registerMouseEvent:D}},fr={class:"container"},cr={name:"Paper"},dr=Yn({...cr,setup(qe){Jn(Z=>({b3d8b872:nr(Le)}));let ot="right";const X=$n({zoom:!0,canvasHandle:"select",itemHandle:["select","drag"],tooltips:()=>"123"}),{canvasEl:Re,cursor:Le,registerMouseEvent:R}=lr(X),je=()=>{const Z=new pe.Path.Circle({center:[200,100],radius:50});Z.strokeColor=new pe.Color("black"),Z.fillColor=new pe.Color("white"),Z.onFrame=()=>{const xe=document.body.clientWidth;ot==="right"?Z.bounds.right>=xe&&(ot="left"):Z.bounds.left<=0&&(ot="right"),ot==="right"?Z.bounds.x+=5:Z.bounds.x-=5}},Ue=()=>{const Z=new pe.Path.Circle({center:[200,100],radius:50,fillColor:new pe.Color("red"),strokeColor:new pe.Color("black"),cursor:"pointer"});Z.strokeWidth=2;const xe="M 50 100 L 100 0 L 0 0 Z",oe=new pe.Path(xe);oe.strokeColor=new pe.Color("black"),oe.fillColor=new pe.Color("green"),oe.strokeWidth=2,oe.strokeWidth=2,oe.position.set(400,100)},st=()=>{const Z=new pe.Point(500,100),xe=new pe.Path;xe.add(Z);const oe=Z.clone();oe.set(600,100),xe.add(oe),xe.strokeColor=new pe.Color("black"),xe.strokeWidth=4},bt=()=>{new pe.Path.Rectangle({center:[200,400],size:[50,100],radius:[5,5],fillColor:"orange",strokeColor:"black",strokeWidth:4,rotation:45});const Z=new pe.Point(200,20),xe=new pe.Size(200,200),oe=new pe.Rectangle(Z,xe),Ae=new pe.Size(30,30),ge=new pe.Path.Rectangle(oe,Ae);ge.fillColor=new pe.Color("blue"),ge.position.set({x:300,y:300})},at=()=>{const Z=new pe.Raster(rr),xe=new pe.Rectangle(Z.bounds.topLeft,Z.bounds.size),oe=new pe.Path.Rectangle(xe);oe.strokeColor=new pe.Color("transparent"),oe.strokeWidth=4,Z.position.set(700,600),Z.scale(.2)},Me=()=>{new pe.PointText({position:[1600,50],fillColor:"black",justification:"center",fontSize:20,content:"下载",locked:!1,name:"download",style:{cursor:"pointer"}})},xt=()=>{const Z=new pe.Group,xe=new pe.PointText({position:[0,-60],content:"圆",fillColor:"black",justification:"center",fontSize:20}),oe=new pe.Path.Circle({center:[0,0],radius:50,fillColor:"red"});Z.addChildren([xe,oe]),Z.position.set(1200,800)},D=()=>{const Z=new pe.Group,xe=new pe.Path.Circle({center:[800,200],radius:50,fillColor:new pe.Color("green")});var oe=ue(800,200,50,Math.PI/18*19),Ae=ue(800,200,50,Math.PI/18*1),ge=new pe.Point(160,60),P=new pe.Point(-160,20),ie=new pe.Segment(oe,void 0,P),_t=new pe.Segment(Ae,ge,void 0);const Fe=new pe.Path([ie,_t]);Fe.strokeColor=new pe.Color("black"),Fe.strokeWidth=8,Fe.locked=!0,Fe.selected=!1,Fe.style.strokeCap="round",Z.addChildren([xe,Fe])},fe=()=>{const Z=new pe.Path.Line({from:[1200,200],to:[1200,600],strokeColor:new pe.Color("red"),strokeWidth:8});Z.style.dashArray=[10,10],Z.onFrame=()=>{Z.style.dashOffset-=1,Z.style.dashOffset<=0&&(Z.style.dashOffset=100)}},$=()=>{const Z=new pe.Group,xe=new pe.Path.Arc({from:[0,50],through:[50,0],to:[50,100],strokeColor:"black",fillColor:"red",strokeWidth:4}),oe="M 50 50 L 50 101 L -1 50 Z",Ae=new pe.Path(oe);Ae.fillColor=new pe.Color("white"),Ae.strokeWidth=0,Z.addChildren([xe,Ae])},ue=(Z,xe,oe,Ae)=>{var ge=Z+oe*Math.cos(Ae),P=xe+oe*Math.sin(Ae);return new pe.Point(ge,P)};return _n(()=>{Ue(),st(),bt(),at(),Me(),xt(),fe(),je(),$(),setTimeout(()=>{D(),R()},3e3)}),(Z,xe)=>(er(),tr("div",fr,[ir("canvas",{id:"myCanvas",ref_key:"canvasEl",ref:Re},null,512)]))}}),vr=sr(dr,[["__scopeId","data-v-1d85735d"]]);export{vr as default};
